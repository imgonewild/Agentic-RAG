to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save “Set” Ladder Instruction Automatic Save “Set” Configuration Dialog BoxTIP Some Logix controllers support additional types of removable media that can be used to write the controller log entries. Refer to the Logix controller documentation for information regarding the type of removable media your Logix controller supports.28 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging The current state of the automatic write setting can be retrieved by using a message instruction with a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Get” . A rung of ladder logic that gets this value and the configuration of the message instruction are shown below. Automatic Save “Get” Ladder Instruction Automatic Save “Get” Configuration Dialog BoxRockwell Automation Publication 1756-PM015E-EN-P - November 2012 29Controller Logging Chapter
temperatures. IMPORTANT Identifies information that is critical for succe ssful application and understanding of the product.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 3Summary of Changes This manual contains new and updated information. The following controllers are no longer supported in the Logix Designer application, version 21. Changes throughout this revision are marked by change bars, as shown in the margin of this page. There are a number of minor changes throughout this publication that were made to clarify existing information. The major changes are listed below.IMPORTANT RSLogix 5000 programming software is now known as Studio 5000™ Logix Designer application, a component of Studio 5000 Engineering and Design Environment. Catalog Number Description 1756-L61 ControlLogix 5561 Controller1756-L61S ControlLogix 5561S Controller 1756-L62 ControlLogix 5562 Controller 1756-L62S ControlLogix 5562S Controller 1756-L63 ControlLogix 5563 Controller 1756-L63S ControlLogix 5563S Controller 1756-L64 ControlLogix 5564 Controller 1756-L65 ControlLogix 5565 Controller 1768-L43 CompactLogix 5343 Controller 1768-L43S CompactLogix 5343S Controller 1768-L45 CompactLogix 5345 Controller 1768-L45S CompactLogix 5345S Controller 1769-L23E-QBF1 CompactLogix 5323E-QB1 Controller 1769-L23E-QBFC1 CompactLogix 5323E-QBFC1 Controller 1769-L23-QBFC1 CompactLogix 5323-QBFC1 Controller 1769-L31 CompactLogix 5331 Controller 1769-L32C CompactLogix 5332C Controller 1769-L32E
describes status keywords and how to get controller information, such as memory resources. This manual is one of a set of related manuals that show common procedures for programming and operating Logix5000 controllers. Additional ResourcesThese documents contain additional information concerning related Rockwell Automation products. Y ou can view or download publications at http://www.rockwellautomation.com/ literature/ . T o order paper copies of technical documentation, contact your local Rockwell Automation distributor or sales representative. Resource Description Industrial Automation Wiring and Grounding Guidelines , publication, 1770-4.1 .Provides general guidelines for installing a Rockwell Automation industrial system. Product Certifications website, http://www.ab.com Provides declarations of conformity, certificates, and other certification details.8 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Preface Notes:Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 9Chapter 1 Connections Introduction A Logix5000 controller uses connections for many, but not all, of its communication with other devices. Term Definition Connection A communication link between two devices, such as between a controller and an I/O module, PanelView terminal, or another controller. Connections are allocations of resources that provide more reliable communication between devices than unconnected messages. The number of connections that a single controller can have
- November 2012 19Determine Controller Memory Information Chapter 2 View Run-time Memory InformationWhen online with a controller, the Memory tab shows the actual memory usage of the controller. While the controller is running, it uses additional memory for communication. The amount of memory the controller needs varies depending on the state of the communication. The Memory tab of the controller includes a Max Used entry for each type of memory. The Max Used values show the peak of memory usage as communication occurs. Follow these steps to reset memory usage. 1.Start the Logix Designer application and open a controller project. 2.On the Online toolbar (above the Controller Organizer), click the controller properties icon. The Controller Properties dialog box appears. 3.Select the Memory tab. 4.Click Reset All Max to reset values. 5.Click OK.20 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 2 Determine Controller Memory Information Write Logic to Get Memory InformationThere are several ways to use logic to get memory information: •Get Memory Information from the Controller . •Choose the Memory Information . •Convert INT s to a DINT . Get Memory Information from the Controller T o get memory information from the controller, execute a Message (MSG) instruction that is configured as follows. On this tab For this item Type or select Which means Configuration Message Type CIP Generic Execute a Control and Information Protocol command. Service Type Custom

describes status keywords and how to get controller information, such as memory resources. This manual is one of a set of related manuals that show common procedures for programming and operating Logix5000 controllers. Additional ResourcesThese documents contain additional information concerning related Rockwell Automation products. Y ou can view or download publications at http://www.rockwellautomation.com/ literature/ . T o order paper copies of technical documentation, contact your local Rockwell Automation distributor or sales representative. Resource Description Industrial Automation Wiring and Grounding Guidelines , publication, 1770-4.1 .Provides general guidelines for installing a Rockwell Automation industrial system. Product Certifications website, http://www.ab.com Provides declarations of conformity, certificates, and other certification details.8 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Preface Notes:Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 9Chapter 1 Connections Introduction A Logix5000 controller uses connections for many, but not all, of its communication with other devices. Term Definition Connection A communication link between two devices, such as between a controller and an I/O module, PanelView terminal, or another controller. Connections are allocations of resources that provide more reliable communication between devices than unconnected messages. The number of connections that a single controller can have
1756-PM015E-EN-P - November 2012Preface Notes:Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 9Chapter 1 Connections Introduction A Logix5000 controller uses connections for many, but not all, of its communication with other devices. Term Definition Connection A communication link between two devices, such as between a controller and an I/O module, PanelView terminal, or another controller. Connections are allocations of resources that provide more reliable communication between devices than unconnected messages. The number of connections that a single controller can have is limited. You indirectly determine the number of connections the controller uses by conf iguring the controller to communicate with other devices in the system. These communication types use connections:•I/O modules •Produced and consumed tags •Certain types of Message (MSG) instruct ions (not all types use a connection) Requested packet interval (RPI)The RPI specifies the period at which data updates over a connection. For example, an input module sends data to a controller at the RPI that you assign to the module. •Typically, you configure an RPI in milliseconds (ms). The range is 0.2 ms (200 microseconds)…750 ms. •If a ControlNet network connects the devices, the RPI reserves a slot in the stream of data flowing across the ControlNet network. The timing of this slot may not coinci de with the exact value of the RPI, but the control system guarantees that the data transfers at least as
use a connection) Requested packet interval (RPI)The RPI specifies the period at which data updates over a connection. For example, an input module sends data to a controller at the RPI that you assign to the module. •Typically, you configure an RPI in milliseconds (ms). The range is 0.2 ms (200 microseconds)…750 ms. •If a ControlNet network connects the devices, the RPI reserves a slot in the stream of data flowing across the ControlNet network. The timing of this slot may not coinci de with the exact value of the RPI, but the control system guarantees that the data transfers at least as often as the RPI. Path The path describes the route that a conn ection takes to get to the destination. Typically, you automatically define the path for a connection when you add the devices to the I/O Configuration folder of the controller.10 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Inhibit a ConnectionIn some situations, such as when initially commissioning a system, it is useful to disable portions of a control system and enable them as you wire the control system. The controller lets you inhibit individual modules or groups of modules, which prevents the controller from trying to communicate with the modules. When you configure an I/O module, it defaults to being not inhibited. Y ou can change an individual module’s properties to inhibit a module. When you inhibit a communication bridge module, the controller shuts down the connections to the
may be divided into several areas. If you have this controller Then it stores this In this memory 1756 ControlLogix 1756 GuardLogix 1768 CompactLogix1768 Compact GuardLogixI/O tags I/O memory Produced / Consumed tags Communication via Message (MSG) instructions Communication with workstations Communication with polled (OPC/DDE ) tags that use RSLinx software (1) Tags other than I/O, produced, or consumed tags Data and logic memory(2) Logic routinesCommunication with polled (OPC/DDE ) tags that use RSLinx software (1) 1769-L2 x CompactLogix 1769-L3 x CompactLogix FlexLogix DriveLogix SoftLogix5800These controllers do not divide their memory. They store all elements in one common memory area. (1) To communicate with polled tags, the contro ller uses both I/O data and logic memory. (2) 1756-L55M16 controllers have an additional memory section for logic.18 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 2 Determine Controller Memory Information Estimate Memory Information OfflineT o estimate how much controller memory your project requires, use the Memory tab of the Controller Properties dialog box. For each of the memory areas of your controller, the dialog box lets you estimate number of bytes of: •free (unused) memory. •used memory. •largest free contiguous block of memory. Follow these steps to estimate the controller memory. 1.Start the Logix Designer application and open a controller project. 2.On the Online toolbar (above the Controller Organizer),

may be divided into several areas. If you have this controller Then it stores this In this memory 1756 ControlLogix 1756 GuardLogix 1768 CompactLogix1768 Compact GuardLogixI/O tags I/O memory Produced / Consumed tags Communication via Message (MSG) instructions Communication with workstations Communication with polled (OPC/DDE ) tags that use RSLinx software (1) Tags other than I/O, produced, or consumed tags Data and logic memory(2) Logic routinesCommunication with polled (OPC/DDE ) tags that use RSLinx software (1) 1769-L2 x CompactLogix 1769-L3 x CompactLogix FlexLogix DriveLogix SoftLogix5800These controllers do not divide their memory. They store all elements in one common memory area. (1) To communicate with polled tags, the contro ller uses both I/O data and logic memory. (2) 1756-L55M16 controllers have an additional memory section for logic.18 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 2 Determine Controller Memory Information Estimate Memory Information OfflineT o estimate how much controller memory your project requires, use the Memory tab of the Controller Properties dialog box. For each of the memory areas of your controller, the dialog box lets you estimate number of bytes of: •free (unused) memory. •used memory. •largest free contiguous block of memory. Follow these steps to estimate the controller memory. 1.Start the Logix Designer application and open a controller project. 2.On the Online toolbar (above the Controller Organizer),
- November 2012 19Determine Controller Memory Information Chapter 2 View Run-time Memory InformationWhen online with a controller, the Memory tab shows the actual memory usage of the controller. While the controller is running, it uses additional memory for communication. The amount of memory the controller needs varies depending on the state of the communication. The Memory tab of the controller includes a Max Used entry for each type of memory. The Max Used values show the peak of memory usage as communication occurs. Follow these steps to reset memory usage. 1.Start the Logix Designer application and open a controller project. 2.On the Online toolbar (above the Controller Organizer), click the controller properties icon. The Controller Properties dialog box appears. 3.Select the Memory tab. 4.Click Reset All Max to reset values. 5.Click OK.20 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 2 Determine Controller Memory Information Write Logic to Get Memory InformationThere are several ways to use logic to get memory information: •Get Memory Information from the Controller . •Choose the Memory Information . •Convert INT s to a DINT . Get Memory Information from the Controller T o get memory information from the controller, execute a Message (MSG) instruction that is configured as follows. On this tab For this item Type or select Which means Configuration Message Type CIP Generic Execute a Control and Information Protocol command. Service Type Custom
- November 2012Chapter 2 Determine Controller Memory Information Estimate Memory Information OfflineT o estimate how much controller memory your project requires, use the Memory tab of the Controller Properties dialog box. For each of the memory areas of your controller, the dialog box lets you estimate number of bytes of: •free (unused) memory. •used memory. •largest free contiguous block of memory. Follow these steps to estimate the controller memory. 1.Start the Logix Designer application and open a controller project. 2.On the Online toolbar (above the Controller Organizer), click the controller properties icon. The Controller Properties dialog box appears. 3.Select the Memory tab. 4.In the ‘Estimated Data and Logic Memory section’ , view the memory information since the last estimate. 5.Click Estimate to re-estimate the amount of controller memory.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 19Determine Controller Memory Information Chapter 2 View Run-time Memory InformationWhen online with a controller, the Memory tab shows the actual memory usage of the controller. While the controller is running, it uses additional memory for communication. The amount of memory the controller needs varies depending on the state of the communication. The Memory tab of the controller includes a Max Used entry for each type of memory. The Max Used values show the peak of memory usage as communication occurs. Follow these steps to reset memory usage. 1.Start the Logix
to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save “Set” Ladder Instruction Automatic Save “Set” Configuration Dialog BoxTIP Some Logix controllers support additional types of removable media that can be used to write the controller log entries. Refer to the Logix controller documentation for information regarding the type of removable media your Logix controller supports.28 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging The current state of the automatic write setting can be retrieved by using a message instruction with a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Get” . A rung of ladder logic that gets this value and the configuration of the message instruction are shown below. Automatic Save “Get” Ladder Instruction Automatic Save “Get” Configuration Dialog BoxRockwell Automation Publication 1756-PM015E-EN-P - November 2012 29Controller Logging Chapter

use a connection) Requested packet interval (RPI)The RPI specifies the period at which data updates over a connection. For example, an input module sends data to a controller at the RPI that you assign to the module. •Typically, you configure an RPI in milliseconds (ms). The range is 0.2 ms (200 microseconds)…750 ms. •If a ControlNet network connects the devices, the RPI reserves a slot in the stream of data flowing across the ControlNet network. The timing of this slot may not coinci de with the exact value of the RPI, but the control system guarantees that the data transfers at least as often as the RPI. Path The path describes the route that a conn ection takes to get to the destination. Typically, you automatically define the path for a connection when you add the devices to the I/O Configuration folder of the controller.10 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Inhibit a ConnectionIn some situations, such as when initially commissioning a system, it is useful to disable portions of a control system and enable them as you wire the control system. The controller lets you inhibit individual modules or groups of modules, which prevents the controller from trying to communicate with the modules. When you configure an I/O module, it defaults to being not inhibited. Y ou can change an individual module’s properties to inhibit a module. When you inhibit a communication bridge module, the controller shuts down the connections to the
use a Get System Value (GSV) instruction to monitor the MODULE object for either the controller or a specific module. If the connection times out, continue operation without invoking a major fault on the controller. ! If you want to Get this attribute Data Type Description Determine if communication has timed out with any deviceLEDStatus INT For efficiency, use a DINT as the destination data type.Specifies the current state of the I/O status indicator on the front of the controller. You do not enter an instance name with this attribute. This attribute applies to the entire collection of modules. Value Meaning 0 Status Indicator off: No MODULE objects are configured for the controller (there are no modules in the I/O Conf iguration section of the controller organizer). 1 Flashing red: None of the MODULE objects are Running. 2 Flashing green: At least one MODULE object is not Running. 3 Solid green: All the Module objects are Running. Determine if communication has timed out with a specific deviceFaultCode INT For efficiency, use a DINT as the destination data type.A number that identifies a module fault, if one occurs. In the Instance Name, choose the device whose connection you want to monitor. Make sure to assign a name to the device in the I/O Configuration folder of the project.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 15Connections Chapter 1 If Module_Status is any value other than 4, the controller is not communicating with the module. See the
or an array, select the first member or element. Source (SSV) Tag that stores the value to be set. If the tag is a user-defined data type or an array, select the first member or element. EXAMPLE Get a System Value At the first scan, gets the DateTime attrib ute of the WALLCLOCKTIME object and stores it in the wall_clock tag, which is based on a user-defined data type. 42370Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 55Index A access status information 51 AuditValue 48 B bridge module connection 10 C Change Detection 46 ChangesToDetect 46 communicate other controllers 9 CompactFlash log 26 configure I/O module 10 connection failure 12 fault checkbox 13 I/O fault 12 inhibit 10 major fault 13 monitor 14 controller log entries 23 memory information 17 D DINT 22 F fault communication loss 12 I/O connection 12 file log 36 G GSV/SSV objects 52 I I/O module communication loss 12 connection fault 12inhibit 10 path configuration 9 inhibit attention symbol 10 connetion 10 I/O module 10 ladder logic 11 INT 21 L ladder sample log file 38 log CompactFlash card 26 counters 30 custom entries 37 entries 25 file format 36 file location 35 header 24 memory buffer 26 modification count 32 sample ladder file 38 M memory determine amount 17 estimate free amount 18 run message instruction 20 types 17 view controller usage 19 monitor I/O connection 14 O objects data storage 52 P path connection route 9 S status access data 51 memory 17 monitor 52 system data access 5256
to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save “Set” Ladder Instruction Automatic Save “Set” Configuration Dialog BoxTIP Some Logix controllers support additional types of removable media that can be used to write the controller log entries. Refer to the Logix controller documentation for information regarding the type of removable media your Logix controller supports.28 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging The current state of the automatic write setting can be retrieved by using a message instruction with a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Get” . A rung of ladder logic that gets this value and the configuration of the message instruction are shown below. Automatic Save “Get” Ladder Instruction Automatic Save “Get” Configuration Dialog BoxRockwell Automation Publication 1756-PM015E-EN-P - November 2012 29Controller Logging Chapter

2012Chapter 1 Connections Inhibit a ConnectionIn some situations, such as when initially commissioning a system, it is useful to disable portions of a control system and enable them as you wire the control system. The controller lets you inhibit individual modules or groups of modules, which prevents the controller from trying to communicate with the modules. When you configure an I/O module, it defaults to being not inhibited. Y ou can change an individual module’s properties to inhibit a module. When you inhibit a communication bridge module, the controller shuts down the connections to the bridge module and to all the modules that depend on that bridge module. Inhibiting a communication bridge module lets you disable an entire branch of the I/O network. When you inhibit the module, the Controller Organizer displays a yellow attention symbol over the module. ATTENTION: Inhibiting a module breaks the connection to the module and prevents communication of I/O data. Inhibit communication with the module If you want to Then Communicate with the module Do not inhibit the module Prevent communication with the module Inhibit the module ! If you are And you And Then Offline The inhibit status is stored in the project. When you download the project, the module still is inhibited. Online Inhibit a module while you are connected to the moduleThe connection to the module is closed. The modu les’ outputs go to the last configured Program mode. Inhibit a module but a connection to the
breaks the connection to the module and prevents communication of I/O data. Inhibit communication with the module If you want to Then Communicate with the module Do not inhibit the module Prevent communication with the module Inhibit the module ! If you are And you And Then Offline The inhibit status is stored in the project. When you download the project, the module still is inhibited. Online Inhibit a module while you are connected to the moduleThe connection to the module is closed. The modu les’ outputs go to the last configured Program mode. Inhibit a module but a connection to the module was not established (perhaps due to an error condition or fault)The module is inhibited. The module status information changes to indicate that the module is inhibited and not faulted. Uninhibit a module (clear the check box) No fault occurs A connection is ma de to the module and the module is dynamically reconfi gured (if the controller is the owner-controller) with the co nfiguration you created for that module. If the controller is configured for listen-only, it cannot reconfigure the module. Fault occurs A connection is not made to the module. The module status information changes to indicate the fault condition.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 11Connections Chapter 1 Follow these steps to inhibit or uninhibit a module from logic. 1.Use a Get System V alue (GSV) instruction to read the Mode attribute for the module. 2.Set or clear bit 2. 3.Use a Set
use a connection) Requested packet interval (RPI)The RPI specifies the period at which data updates over a connection. For example, an input module sends data to a controller at the RPI that you assign to the module. •Typically, you configure an RPI in milliseconds (ms). The range is 0.2 ms (200 microseconds)…750 ms. •If a ControlNet network connects the devices, the RPI reserves a slot in the stream of data flowing across the ControlNet network. The timing of this slot may not coinci de with the exact value of the RPI, but the control system guarantees that the data transfers at least as often as the RPI. Path The path describes the route that a conn ection takes to get to the destination. Typically, you automatically define the path for a connection when you add the devices to the I/O Configuration folder of the controller.10 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Inhibit a ConnectionIn some situations, such as when initially commissioning a system, it is useful to disable portions of a control system and enable them as you wire the control system. The controller lets you inhibit individual modules or groups of modules, which prevents the controller from trying to communicate with the modules. When you configure an I/O module, it defaults to being not inhibited. Y ou can change an individual module’s properties to inhibit a module. When you inhibit a communication bridge module, the controller shuts down the connections to the
to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save “Set” Ladder Instruction Automatic Save “Set” Configuration Dialog BoxTIP Some Logix controllers support additional types of removable media that can be used to write the controller log entries. Refer to the Logix controller documentation for information regarding the type of removable media your Logix controller supports.28 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging The current state of the automatic write setting can be retrieved by using a message instruction with a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Get” . A rung of ladder logic that gets this value and the configuration of the message instruction are shown below. Automatic Save “Get” Ladder Instruction Automatic Save “Get” Configuration Dialog BoxRockwell Automation Publication 1756-PM015E-EN-P - November 2012 29Controller Logging Chapter

If the Controller Fault Handler does not clear the fault, then the controller shuts down. When you check the ‘Major Fault On Controller…Run Mode’ box, the controller: •must be connected to the module during the Program transition to Run mode. During the Program to Run mode transition, there can be a 20-second delay. During this delay, the controller makes one attempt to connect to a module. If the ‘Major Fault On Controller…Run Mode’ box is selected, and you cannot connect during the 20-second delay, a fault occurs because at least one required connection is not established before going to Run mode. This is a 3/23 type fault code. This fault can occur in large systems with networked I/O. •will fault if the connection is dropped while in Run mode. A required I/O module connection failed, creating a 3/16 type fault. For fault codes, see the Logix5000 Controllers Major and Minor Faults Programming Manual, publication 1756-PM014. If the connection times out, produce a major fault in the controller.14 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Monitor the Health of a Module If you do not configure the major fault to occur, you should monitor the module status. If a module loses its connection to the controller, outputs go to their configured faulted state. The controller and other I/O modules continue to operate based on old data from the module. If communication with a module times out, the controller produces these warnings: ·The I/O
= va lue of the Mode attribute for the module. 2. The OTE instruction sets bit 2 of Module_1_Mode = 1. This means inhibit the connection. 3. The SSV instruction sets the Mode attr ibute for the module = Module_1_Mode.12 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Manage a Connection FailureIf the controller loses communication with a module, data from that device does not update. When this occurs, the logic makes decisions on data that may or may not be correct. This section explains how to program a controller to fault. If communication with a device in the I/O configuration of the controller does not occur for 100 ms, the communication times out. If this occurs, you have these options.ATTENTION: Outputs respond to the last, non- faulted state of the controlling inputs. To avoid potential injury and damage to machinery, make sure this does not create an unsafe operation. Configure critical I/O modules to generate a controller major fault when they lose their connections to the controller: or, monitor the status of I/O modules. EXAMPLE Loss of Communication ATTENTION: Controller B requires data from controller A. If communication fails between the controllers, then controller B continues to act on the last data that it received from controller A. A BCommunication Failure 41031 If you want the controller to Then Fault (major fault) Configure a Major Fault to Occur Continue operating Monitor the Health of a ModuleRockwell Automation
Manual, publication 1756-PM014. If the connection times out, produce a major fault in the controller.14 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Monitor the Health of a Module If you do not configure the major fault to occur, you should monitor the module status. If a module loses its connection to the controller, outputs go to their configured faulted state. The controller and other I/O modules continue to operate based on old data from the module. If communication with a module times out, the controller produces these warnings: ·The I/O status indicator on the front of the controller flashes green. ·A shows over the I/O configuration folder and over the device that has timed out. ·A module fault code is produced, which you can access through: –Module Properties window for the module. –GSV instruction. T o monitor the health of your connections, use a Get System Value (GSV) instruction to monitor the MODULE object for either the controller or a specific module. If the connection times out, continue operation without invoking a major fault on the controller. ! If you want to Get this attribute Data Type Description Determine if communication has timed out with any deviceLEDStatus INT For efficiency, use a DINT as the destination data type.Specifies the current state of the I/O status indicator on the front of the controller. You do not enter an instance name with this attribute. This attribute applies to the entire collection of
use a Get System Value (GSV) instruction to monitor the MODULE object for either the controller or a specific module. If the connection times out, continue operation without invoking a major fault on the controller. ! If you want to Get this attribute Data Type Description Determine if communication has timed out with any deviceLEDStatus INT For efficiency, use a DINT as the destination data type.Specifies the current state of the I/O status indicator on the front of the controller. You do not enter an instance name with this attribute. This attribute applies to the entire collection of modules. Value Meaning 0 Status Indicator off: No MODULE objects are configured for the controller (there are no modules in the I/O Conf iguration section of the controller organizer). 1 Flashing red: None of the MODULE objects are Running. 2 Flashing green: At least one MODULE object is not Running. 3 Solid green: All the Module objects are Running. Determine if communication has timed out with a specific deviceFaultCode INT For efficiency, use a DINT as the destination data type.A number that identifies a module fault, if one occurs. In the Instance Name, choose the device whose connection you want to monitor. Make sure to assign a name to the device in the I/O Configuration folder of the project.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 15Connections Chapter 1 If Module_Status is any value other than 4, the controller is not communicating with the module. See the

use a Get System Value (GSV) instruction to monitor the MODULE object for either the controller or a specific module. If the connection times out, continue operation without invoking a major fault on the controller. ! If you want to Get this attribute Data Type Description Determine if communication has timed out with any deviceLEDStatus INT For efficiency, use a DINT as the destination data type.Specifies the current state of the I/O status indicator on the front of the controller. You do not enter an instance name with this attribute. This attribute applies to the entire collection of modules. Value Meaning 0 Status Indicator off: No MODULE objects are configured for the controller (there are no modules in the I/O Conf iguration section of the controller organizer). 1 Flashing red: None of the MODULE objects are Running. 2 Flashing green: At least one MODULE object is not Running. 3 Solid green: All the Module objects are Running. Determine if communication has timed out with a specific deviceFaultCode INT For efficiency, use a DINT as the destination data type.A number that identifies a module fault, if one occurs. In the Instance Name, choose the device whose connection you want to monitor. Make sure to assign a name to the device in the I/O Configuration folder of the project.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 15Connections Chapter 1 If Module_Status is any value other than 4, the controller is not communicating with the module. See the
Manual, publication 1756-PM014. If the connection times out, produce a major fault in the controller.14 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Monitor the Health of a Module If you do not configure the major fault to occur, you should monitor the module status. If a module loses its connection to the controller, outputs go to their configured faulted state. The controller and other I/O modules continue to operate based on old data from the module. If communication with a module times out, the controller produces these warnings: ·The I/O status indicator on the front of the controller flashes green. ·A shows over the I/O configuration folder and over the device that has timed out. ·A module fault code is produced, which you can access through: –Module Properties window for the module. –GSV instruction. T o monitor the health of your connections, use a Get System Value (GSV) instruction to monitor the MODULE object for either the controller or a specific module. If the connection times out, continue operation without invoking a major fault on the controller. ! If you want to Get this attribute Data Type Description Determine if communication has timed out with any deviceLEDStatus INT For efficiency, use a DINT as the destination data type.Specifies the current state of the I/O status indicator on the front of the controller. You do not enter an instance name with this attribute. This attribute applies to the entire collection of
= va lue of the Mode attribute for the module. 2. The OTE instruction sets bit 2 of Module_1_Mode = 1. This means inhibit the connection. 3. The SSV instruction sets the Mode attr ibute for the module = Module_1_Mode.12 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Manage a Connection FailureIf the controller loses communication with a module, data from that device does not update. When this occurs, the logic makes decisions on data that may or may not be correct. This section explains how to program a controller to fault. If communication with a device in the I/O configuration of the controller does not occur for 100 ms, the communication times out. If this occurs, you have these options.ATTENTION: Outputs respond to the last, non- faulted state of the controlling inputs. To avoid potential injury and damage to machinery, make sure this does not create an unsafe operation. Configure critical I/O modules to generate a controller major fault when they lose their connections to the controller: or, monitor the status of I/O modules. EXAMPLE Loss of Communication ATTENTION: Controller B requires data from controller A. If communication fails between the controllers, then controller B continues to act on the last data that it received from controller A. A BCommunication Failure 41031 If you want the controller to Then Fault (major fault) Configure a Major Fault to Occur Continue operating Monitor the Health of a ModuleRockwell Automation
breaks the connection to the module and prevents communication of I/O data. Inhibit communication with the module If you want to Then Communicate with the module Do not inhibit the module Prevent communication with the module Inhibit the module ! If you are And you And Then Offline The inhibit status is stored in the project. When you download the project, the module still is inhibited. Online Inhibit a module while you are connected to the moduleThe connection to the module is closed. The modu les’ outputs go to the last configured Program mode. Inhibit a module but a connection to the module was not established (perhaps due to an error condition or fault)The module is inhibited. The module status information changes to indicate that the module is inhibited and not faulted. Uninhibit a module (clear the check box) No fault occurs A connection is ma de to the module and the module is dynamically reconfi gured (if the controller is the owner-controller) with the co nfiguration you created for that module. If the controller is configured for listen-only, it cannot reconfigure the module. Fault occurs A connection is not made to the module. The module status information changes to indicate the fault condition.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 11Connections Chapter 1 Follow these steps to inhibit or uninhibit a module from logic. 1.Use a Get System V alue (GSV) instruction to read the Mode attribute for the module. 2.Set or clear bit 2. 3.Use a Set

If the Controller Fault Handler does not clear the fault, then the controller shuts down. When you check the ‘Major Fault On Controller…Run Mode’ box, the controller: •must be connected to the module during the Program transition to Run mode. During the Program to Run mode transition, there can be a 20-second delay. During this delay, the controller makes one attempt to connect to a module. If the ‘Major Fault On Controller…Run Mode’ box is selected, and you cannot connect during the 20-second delay, a fault occurs because at least one required connection is not established before going to Run mode. This is a 3/23 type fault code. This fault can occur in large systems with networked I/O. •will fault if the connection is dropped while in Run mode. A required I/O module connection failed, creating a 3/16 type fault. For fault codes, see the Logix5000 Controllers Major and Minor Faults Programming Manual, publication 1756-PM014. If the connection times out, produce a major fault in the controller.14 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Monitor the Health of a Module If you do not configure the major fault to occur, you should monitor the module status. If a module loses its connection to the controller, outputs go to their configured faulted state. The controller and other I/O modules continue to operate based on old data from the module. If communication with a module times out, the controller produces these warnings: ·The I/O
to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save “Set” Ladder Instruction Automatic Save “Set” Configuration Dialog BoxTIP Some Logix controllers support additional types of removable media that can be used to write the controller log entries. Refer to the Logix controller documentation for information regarding the type of removable media your Logix controller supports.28 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging The current state of the automatic write setting can be retrieved by using a message instruction with a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Get” . A rung of ladder logic that gets this value and the configuration of the message instruction are shown below. Automatic Save “Get” Ladder Instruction Automatic Save “Get” Configuration Dialog BoxRockwell Automation Publication 1756-PM015E-EN-P - November 2012 29Controller Logging Chapter
temperatures. IMPORTANT Identifies information that is critical for succe ssful application and understanding of the product.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 3Summary of Changes This manual contains new and updated information. The following controllers are no longer supported in the Logix Designer application, version 21. Changes throughout this revision are marked by change bars, as shown in the margin of this page. There are a number of minor changes throughout this publication that were made to clarify existing information. The major changes are listed below.IMPORTANT RSLogix 5000 programming software is now known as Studio 5000™ Logix Designer application, a component of Studio 5000 Engineering and Design Environment. Catalog Number Description 1756-L61 ControlLogix 5561 Controller1756-L61S ControlLogix 5561S Controller 1756-L62 ControlLogix 5562 Controller 1756-L62S ControlLogix 5562S Controller 1756-L63 ControlLogix 5563 Controller 1756-L63S ControlLogix 5563S Controller 1756-L64 ControlLogix 5564 Controller 1756-L65 ControlLogix 5565 Controller 1768-L43 CompactLogix 5343 Controller 1768-L43S CompactLogix 5343S Controller 1768-L45 CompactLogix 5345 Controller 1768-L45S CompactLogix 5345S Controller 1769-L23E-QBF1 CompactLogix 5323E-QB1 Controller 1769-L23E-QBFC1 CompactLogix 5323E-QBFC1 Controller 1769-L23-QBFC1 CompactLogix 5323-QBFC1 Controller 1769-L31 CompactLogix 5331 Controller 1769-L32C CompactLogix 5332C Controller 1769-L32E
complete information on how to access data using an MSG instruction, refer to Logix5000 Controllers Messages Programming Manual, publication 1756-UM012. Use these settings to read the Audit V alue attribute using the Message Configuration. ChangesToDetect FormatIf you want to: In this property Type or select Get AuditValue Message Type CIP Generic Service Type Audit Value Get Source leave blank Destination tag_name of type DINT[2] or LINT 1 This tag contains the AuditValue for the controller. Bit number Event description 0 Project stored to removable media 1 Online edits modified controller program 2 Transaction committed •Indicates that a batch of one or more ch anges has been applied to the controller. For example, this might happen when a routine is imported online or when a module configuration is changed online. 3 SFC forces enabled 4 SFC forces disabled 5 SFC forces removed 6 SFC element force value changed 7 I/O forces enabled 8 I/O forces disabled 9 I/O forces removedRockwell Automation Publication 1756-PM015E-EN-P - November 2012 49Change Detection Chapter 4 10 I/O forces modified 11 Firmware update attempted12 Firmware update from removable media attempted 13 Remote mode change 14 Keyswitch mode change 15 A major fault occurred 16 All major faults cleared 17 All major faults cleared through keyswitch 18 Task properties modified 19 Program properties modified 20 Controller time slice modified 21 Removable media removed 22 Removable media inserted 23 Safety signature

appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 27Controller Logging Chapter 3 Writing the Controller Log to the CompactFlash Card The controller log can be written to the CompactFlash card either automatically or on demand. Automatic Save When the controller's internal log entry buffer becomes 80% full, it can automatically write the buffered entries to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save
File 38 Controller Log Events 3924 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging Controller LogA controller log is a record of interactions that have occurred in the controller due to physical conditions like keyswitch and removable media, fault conditions, and programming changes configured in the application. Up to 100 log entries are buffered within the controller's memory. The controller can save these buffered entries to the removable media by using a message instruction. Additionally, the controller can be configured to automatically write buffered entries to the removable media after 80 entries have accumulated. In the example below, Record Numbers 4-6 are part of the Change Detection feature. See Change Detection on page 45 Table 1 - Example Controller Log File Controller Log Header When the controller creates a log file on the removable media, it includes some header information. This he ader information includes the: ·date the log file was created. ·controller model number. ·controller serial number. ·version of firmware running on the controller.Record Number Time Entry Desc ription User Name Workstation NameFactoryTalk IDExtended InformationChange Detection Audit Value 1 12-Feb 03:39:34 Project download John Doe Lap top FT\JDoe Project L71 16#FD60_CB89_029F_3500 2 12-Feb 04:05:12 Forces Enabled Jones USMAYLT FT\Jones 3 12-Feb 04:22:03 Online edits modified controller programJohnDoe Laptop FT\JDoe 4 12-Feb 04:42:12
software. With controller logging, the controllers: ·detect changes and create logs entries containing information about the changes. ·store the log entries to removable mediafor later review. ·provide programmatic access to log entry counters to provide change detection information remotely. Note s: •The 1769-L3x and 1769-L4x CompactLogix Controllers do not support storing log entries to removable media, and the audit value is not populated. •The Audit Value is not supported in version 19 or earlier. Topic Page Controller Log 24 Controller Log Header 24 Controller Log Entry 25 Entries Captured in the Controller Log 25 Controller Log Buffer 26 Controller Log Files and the Removable Media 26 Writing the Controller Log to the CompactFlash Card 27 Controller Logging Counters 30 Log File Storage 35 Log File Storage 35 Log File Format 36 Create Custom Log Entries 37 Sample Ladder Logic File 38 Controller Log Events 3924 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging Controller LogA controller log is a record of interactions that have occurred in the controller due to physical conditions like keyswitch and removable media, fault conditions, and programming changes configured in the application. Up to 100 log entries are buffered within the controller's memory. The controller can save these buffered entries to the removable media by using a message instruction. Additionally, the controller can be configured to automatically write
- November 2012 25Controller Logging Chapter 3 Controller Log Entry Each entry in the log can include the following information: ·Record Number ·Time of Occurrence (UTC - 24 hour clock) ·Entry Description ·Windows User Name ·Wo r k s t a t i o n Na m e ·FactoryT alk User ID (if available) ·Extended Information •Change Detection Audit Value (Refer to Controller Change Detection on page 46 .) Figure 1 - Example Excel File of a Controller Log Entries Captured in the Controller Log Below is a list of entries that are detected and logged. These events are described in more detail in Controller Log Events on page 39 . •Project downloaded •Project loaded from removable media •Project stored to removable media •Online edits modified controller program •Partial import online completed or T ranaction committed •I/O forces enabled, disabled, removed, or modified •SFC forces enabled, disabled, removed, or modified •Firmware update •Constant tag data changed •Multiple constant tag data changed26 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging •Change to constant tag configuration reset •Mode change •Major fault, major fault cleared •Program properties modified •Ta s k p r o p e r ti e s m o d i f i e d •Controller timeslice modified •Removable media inserted or removed •Safety signature created or deleted •Safety locked or unlocked •Custom entry: User-defined logic to create a log entry, with user-defined entry description and extended

- November 2012 25Controller Logging Chapter 3 Controller Log Entry Each entry in the log can include the following information: ·Record Number ·Time of Occurrence (UTC - 24 hour clock) ·Entry Description ·Windows User Name ·Wo r k s t a t i o n Na m e ·FactoryT alk User ID (if available) ·Extended Information •Change Detection Audit Value (Refer to Controller Change Detection on page 46 .) Figure 1 - Example Excel File of a Controller Log Entries Captured in the Controller Log Below is a list of entries that are detected and logged. These events are described in more detail in Controller Log Events on page 39 . •Project downloaded •Project loaded from removable media •Project stored to removable media •Online edits modified controller program •Partial import online completed or T ranaction committed •I/O forces enabled, disabled, removed, or modified •SFC forces enabled, disabled, removed, or modified •Firmware update •Constant tag data changed •Multiple constant tag data changed26 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging •Change to constant tag configuration reset •Mode change •Major fault, major fault cleared •Program properties modified •Ta s k p r o p e r ti e s m o d i f i e d •Controller timeslice modified •Removable media inserted or removed •Safety signature created or deleted •Safety locked or unlocked •Custom entry: User-defined logic to create a log entry, with user-defined entry description and extended
File 38 Controller Log Events 3924 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging Controller LogA controller log is a record of interactions that have occurred in the controller due to physical conditions like keyswitch and removable media, fault conditions, and programming changes configured in the application. Up to 100 log entries are buffered within the controller's memory. The controller can save these buffered entries to the removable media by using a message instruction. Additionally, the controller can be configured to automatically write buffered entries to the removable media after 80 entries have accumulated. In the example below, Record Numbers 4-6 are part of the Change Detection feature. See Change Detection on page 45 Table 1 - Example Controller Log File Controller Log Header When the controller creates a log file on the removable media, it includes some header information. This he ader information includes the: ·date the log file was created. ·controller model number. ·controller serial number. ·version of firmware running on the controller.Record Number Time Entry Desc ription User Name Workstation NameFactoryTalk IDExtended InformationChange Detection Audit Value 1 12-Feb 03:39:34 Project download John Doe Lap top FT\JDoe Project L71 16#FD60_CB89_029F_3500 2 12-Feb 04:05:12 Forces Enabled Jones USMAYLT FT\Jones 3 12-Feb 04:22:03 Online edits modified controller programJohnDoe Laptop FT\JDoe 4 12-Feb 04:42:12
software. With controller logging, the controllers: ·detect changes and create logs entries containing information about the changes. ·store the log entries to removable mediafor later review. ·provide programmatic access to log entry counters to provide change detection information remotely. Note s: •The 1769-L3x and 1769-L4x CompactLogix Controllers do not support storing log entries to removable media, and the audit value is not populated. •The Audit Value is not supported in version 19 or earlier. Topic Page Controller Log 24 Controller Log Header 24 Controller Log Entry 25 Entries Captured in the Controller Log 25 Controller Log Buffer 26 Controller Log Files and the Removable Media 26 Writing the Controller Log to the CompactFlash Card 27 Controller Logging Counters 30 Log File Storage 35 Log File Storage 35 Log File Format 36 Create Custom Log Entries 37 Sample Ladder Logic File 38 Controller Log Events 3924 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging Controller LogA controller log is a record of interactions that have occurred in the controller due to physical conditions like keyswitch and removable media, fault conditions, and programming changes configured in the application. Up to 100 log entries are buffered within the controller's memory. The controller can save these buffered entries to the removable media by using a message instruction. Additionally, the controller can be configured to automatically write
the synchronization between the controller and the projec t file that was downloaded to it. Tip: Correlation Affected can include detection of a component being created, deleted, or modified, or logic was modified. Including the Correlation Affected event will update the audit value for these types of changes, even if other similar events (such as "Online edits modified controller program" or "Task properties modified") are masked. 33 Safety signature delete inhibited in Run mode 34 Safety signature delete allowed in Run modeBit number Event description50 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 4 Change Detection Change Detection in Logix Designer ApplicationVersion 20 and later of the application provides the Security tab in the Controller Properties dialog that allows users to configure Change Detection. T o edit the Changes T o Detect field you can type a new value. T o select the events to monitor for changes from a list, click the Configure button to open the Configure Changes to Detect dialog box. For additional information on how to configure the settings on the Security tab, refer to Logix5000 Security Programming Manual, publication 1756-PM016 or the the online help for the Logix Designer application. TIP To configure Change Detection programmatically use SSV, GSV or MSG instructions. See Controller Change Detection on page 46Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 51Chapter 5 Access Status Information

is used by the attribute. B. Create a tag for the attribute and use the data type from step A. To Enter this instruction Get the value of an attribute GSV Set the value of an attribute SSV54 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 5 Access Status Information 9.Assign the required operands to the instruction: This examples gets the current date and time. For more GSV/SSV information, see the Logix5000 Controllers General Instructions Reference Manual, publication 1756-RM003.For this operand Select Class name Name of the object. Instance name Name of the specific object (for example, name of the required I/O module, task, message). •Not all objects require this entry. •To specify the current task, program, or routine, select THIS. Attribute name Name of the attribute. Dest (GSV) Tag that will store the retrieved value. If the tag is a user-defined data type or an array, select the first member or element. Source (SSV) Tag that stores the value to be set. If the tag is a user-defined data type or an array, select the first member or element. EXAMPLE Get a System Value At the first scan, gets the DateTime attrib ute of the WALLCLOCKTIME object and stores it in the wall_clock tag, which is based on a user-defined data type. 42370Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 55Index A access status information 51 AuditValue 48 B bridge module connection 10 C Change Detection 46 ChangesToDetect 46 communicate other controllers 9
or when Changes to Detect is reconfigured. These types of events are not included in the Changes T o Detect mask. The Changes T oDetect mask can be configured programatically using SSV , GSV and MSG instructions.Attribute Name Description Access AuditValue The AuditValue is a unique value that is generated when a project is downloaded to the controller or loaded from removable storage. When a chan ge is detected this value is updated. To specify which changes are monitored, use the ChangesToDetect attribute.GSV ChangesToDetect Used to specify which changes are monitored. When a monitored change occurs, the Audit Value is updated. GSV/SSV IMPORTANT Change detection is unavailable on the RSLogix Emulate 5000 Controller and the SoftLogix5860 Controller. TIP The Audit Value updates when the controller is online. TIP You can use the Security tab in the Contro ller Properties dialog box to configure Change Detection if you are using version 20 or later of the application. See Change Detection in Logix Designer Application on page 50 .Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 47Change Detection Chapter 4 Use the Set System V alue (SSV) instruction to write to the Changes T o Detect attribute and the Get System V alue (GSV) instruction to read the Changes T o Detect attribute programmatically. The Message Configuration dialog can be used to read or write to the Changes T oDetect attribute through CIP Generic Messages. For complete information on how to access
If the SFC does not call a routine, S:FS is set (on) for the first scan of the task. Get and Set System DataThe controller stores system data in objects. There is no status file, as in the PLC- 5 controller. Use the GSV/SSV instructions to get and set controller system data that is stored in objects. •The GSV instruction retrieves the specified information and places it in the destination. •The SSV instruction sets the specified attribute with data from the source. Follow these steps to get or set a system value. 1.Open the project. 2.From the Help menu, choose Contents. 3.Click the Index tab. 4.Type GSV/SSV objects and click Display.EXAMPLE Several Tasks but No SFC Suppose you have two tasks that use ladder diagrams. When the first task runs for the first time, S:FS turns on for one scan. After that, S:FS stays off for that task. When the other task runs for the first time, S:FS turns on for one scan in that task. S:FS stays off in the first task that ran. ATTENTION: Use the SSV instruction carefully. Making changes to objects can cause unexpected controller operation or injury to personnel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 53Access Status Information Chapter 5 5.Select the object. 6.In the list of attributes for the object, identify the attribute that you want to access. For attribute information, see the Logix5000 Controllers General Instruction Reference Manual, publication 1756-RM003 . 7.Create a tag for the value of the attribute. 8.In
(GSV) instruction. Total Entry Count by Using a Get System Value (GSV) InstructionCounter Name Desc ription Access Total Entry Count Number of entries added to the log since the last firmware update.GSV/SSV Unsaved Entry Count Number of entries in controller RAM not yet written to the CompactFlash card.GSV Modify Execution Count Count that specifically tracks modifications that can change behavior of a runnin g controller. A subset of entries increment this countGSV/SSVRockwell Automation Publication 1756-PM015E-EN-P - November 2012 31Controller Logging Chapter 3 This rung of ladder logic shows how to set the T otal Entry Count to a known value (in this example, 0) by using an SSV instruction. Figure 4 - Set the Total Entry Count to a Known Value Instruction Unsaved Entry Count The Unsaved Entry Count is the number of log entries that are in controller memory but have not yet been stored to the CompactFlash card. This counter value is available via a GSV instruction, and can range from 0…100, the maximum number of entries that the controller can buffer. This rung of ladder logic shows how to retrieve the Unsaved Entry Count by using a Get System Value (GSV) instruction. Figure 5 - Retrieve the Unsaved Entry Co unt Using a Get System Value Instruction32 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging Execution Modification Count The Execution Modification Count tracks the number of changes that occur that can change the behavior of

is used by the attribute. B. Create a tag for the attribute and use the data type from step A. To Enter this instruction Get the value of an attribute GSV Set the value of an attribute SSV54 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 5 Access Status Information 9.Assign the required operands to the instruction: This examples gets the current date and time. For more GSV/SSV information, see the Logix5000 Controllers General Instructions Reference Manual, publication 1756-RM003.For this operand Select Class name Name of the object. Instance name Name of the specific object (for example, name of the required I/O module, task, message). •Not all objects require this entry. •To specify the current task, program, or routine, select THIS. Attribute name Name of the attribute. Dest (GSV) Tag that will store the retrieved value. If the tag is a user-defined data type or an array, select the first member or element. Source (SSV) Tag that stores the value to be set. If the tag is a user-defined data type or an array, select the first member or element. EXAMPLE Get a System Value At the first scan, gets the DateTime attrib ute of the WALLCLOCKTIME object and stores it in the wall_clock tag, which is based on a user-defined data type. 42370Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 55Index A access status information 51 AuditValue 48 B bridge module connection 10 C Change Detection 46 ChangesToDetect 46 communicate other controllers 9
If the SFC does not call a routine, S:FS is set (on) for the first scan of the task. Get and Set System DataThe controller stores system data in objects. There is no status file, as in the PLC- 5 controller. Use the GSV/SSV instructions to get and set controller system data that is stored in objects. •The GSV instruction retrieves the specified information and places it in the destination. •The SSV instruction sets the specified attribute with data from the source. Follow these steps to get or set a system value. 1.Open the project. 2.From the Help menu, choose Contents. 3.Click the Index tab. 4.Type GSV/SSV objects and click Display.EXAMPLE Several Tasks but No SFC Suppose you have two tasks that use ladder diagrams. When the first task runs for the first time, S:FS turns on for one scan. After that, S:FS stays off for that task. When the other task runs for the first time, S:FS turns on for one scan in that task. S:FS stays off in the first task that ran. ATTENTION: Use the SSV instruction carefully. Making changes to objects can cause unexpected controller operation or injury to personnel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 53Access Status Information Chapter 5 5.Select the object. 6.In the list of attributes for the object, identify the attribute that you want to access. For attribute information, see the Logix5000 Controllers General Instruction Reference Manual, publication 1756-RM003 . 7.Create a tag for the value of the attribute. 8.In
or when Changes to Detect is reconfigured. These types of events are not included in the Changes T o Detect mask. The Changes T oDetect mask can be configured programatically using SSV , GSV and MSG instructions.Attribute Name Description Access AuditValue The AuditValue is a unique value that is generated when a project is downloaded to the controller or loaded from removable storage. When a chan ge is detected this value is updated. To specify which changes are monitored, use the ChangesToDetect attribute.GSV ChangesToDetect Used to specify which changes are monitored. When a monitored change occurs, the Audit Value is updated. GSV/SSV IMPORTANT Change detection is unavailable on the RSLogix Emulate 5000 Controller and the SoftLogix5860 Controller. TIP The Audit Value updates when the controller is online. TIP You can use the Security tab in the Contro ller Properties dialog box to configure Change Detection if you are using version 20 or later of the application. See Change Detection in Logix Designer Application on page 50 .Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 47Change Detection Chapter 4 Use the Set System V alue (SSV) instruction to write to the Changes T o Detect attribute and the Get System V alue (GSV) instruction to read the Changes T o Detect attribute programmatically. The Message Configuration dialog can be used to read or write to the Changes T oDetect attribute through CIP Generic Messages. For complete information on how to access
on for one scan in that task. S:FS stays off in the first task that ran. ATTENTION: Use the SSV instruction carefully. Making changes to objects can cause unexpected controller operation or injury to personnel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 53Access Status Information Chapter 5 5.Select the object. 6.In the list of attributes for the object, identify the attribute that you want to access. For attribute information, see the Logix5000 Controllers General Instruction Reference Manual, publication 1756-RM003 . 7.Create a tag for the value of the attribute. 8.In the Ladder Logic routine, enter the appropriate instruction.To get or set Select Customize instructions for commonly- used logic AddOnInstructionDefinition Different Axis objects depending on motion application Axis (Several types) System-overhead time slice Controller Physical hardware of a controller ControllerDevice Groups one or more axes to generate coordinated motion CoordinateSystemCoordinated system time for the devices in one chassis CST DF1 communication driver for the serial port DF1 Fault history for a controller FaultLog Attributes of a message instruction Message Status, faults, and mode of a module Module Group of axes MotionGroup Fault information or scan time for a program Program Instance number of a routine Routine Different objects for safety Safety Configuration of the serial port SerialPort Properties or elapsed time of a task Task Precision time management for

- November 2012 25Controller Logging Chapter 3 Controller Log Entry Each entry in the log can include the following information: ·Record Number ·Time of Occurrence (UTC - 24 hour clock) ·Entry Description ·Windows User Name ·Wo r k s t a t i o n Na m e ·FactoryT alk User ID (if available) ·Extended Information •Change Detection Audit Value (Refer to Controller Change Detection on page 46 .) Figure 1 - Example Excel File of a Controller Log Entries Captured in the Controller Log Below is a list of entries that are detected and logged. These events are described in more detail in Controller Log Events on page 39 . •Project downloaded •Project loaded from removable media •Project stored to removable media •Online edits modified controller program •Partial import online completed or T ranaction committed •I/O forces enabled, disabled, removed, or modified •SFC forces enabled, disabled, removed, or modified •Firmware update •Constant tag data changed •Multiple constant tag data changed26 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging •Change to constant tag configuration reset •Mode change •Major fault, major fault cleared •Program properties modified •Ta s k p r o p e r ti e s m o d i f i e d •Controller timeslice modified •Removable media inserted or removed •Safety signature created or deleted •Safety locked or unlocked •Custom entry: User-defined logic to create a log entry, with user-defined entry description and extended
software. With controller logging, the controllers: ·detect changes and create logs entries containing information about the changes. ·store the log entries to removable mediafor later review. ·provide programmatic access to log entry counters to provide change detection information remotely. Note s: •The 1769-L3x and 1769-L4x CompactLogix Controllers do not support storing log entries to removable media, and the audit value is not populated. •The Audit Value is not supported in version 19 or earlier. Topic Page Controller Log 24 Controller Log Header 24 Controller Log Entry 25 Entries Captured in the Controller Log 25 Controller Log Buffer 26 Controller Log Files and the Removable Media 26 Writing the Controller Log to the CompactFlash Card 27 Controller Logging Counters 30 Log File Storage 35 Log File Storage 35 Log File Format 36 Create Custom Log Entries 37 Sample Ladder Logic File 38 Controller Log Events 3924 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging Controller LogA controller log is a record of interactions that have occurred in the controller due to physical conditions like keyswitch and removable media, fault conditions, and programming changes configured in the application. Up to 100 log entries are buffered within the controller's memory. The controller can save these buffered entries to the removable media by using a message instruction. Additionally, the controller can be configured to automatically write
appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 27Controller Logging Chapter 3 Writing the Controller Log to the CompactFlash Card The controller log can be written to the CompactFlash card either automatically or on demand. Automatic Save When the controller's internal log entry buffer becomes 80% full, it can automatically write the buffered entries to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save
File 38 Controller Log Events 3924 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging Controller LogA controller log is a record of interactions that have occurred in the controller due to physical conditions like keyswitch and removable media, fault conditions, and programming changes configured in the application. Up to 100 log entries are buffered within the controller's memory. The controller can save these buffered entries to the removable media by using a message instruction. Additionally, the controller can be configured to automatically write buffered entries to the removable media after 80 entries have accumulated. In the example below, Record Numbers 4-6 are part of the Change Detection feature. See Change Detection on page 45 Table 1 - Example Controller Log File Controller Log Header When the controller creates a log file on the removable media, it includes some header information. This he ader information includes the: ·date the log file was created. ·controller model number. ·controller serial number. ·version of firmware running on the controller.Record Number Time Entry Desc ription User Name Workstation NameFactoryTalk IDExtended InformationChange Detection Audit Value 1 12-Feb 03:39:34 Project download John Doe Lap top FT\JDoe Project L71 16#FD60_CB89_029F_3500 2 12-Feb 04:05:12 Forces Enabled Jones USMAYLT FT\Jones 3 12-Feb 04:22:03 Online edits modified controller programJohnDoe Laptop FT\JDoe 4 12-Feb 04:42:12

complete information on how to access data using an MSG instruction, refer to Logix5000 Controllers Messages Programming Manual, publication 1756-UM012. Use these settings to read the Audit V alue attribute using the Message Configuration. ChangesToDetect FormatIf you want to: In this property Type or select Get AuditValue Message Type CIP Generic Service Type Audit Value Get Source leave blank Destination tag_name of type DINT[2] or LINT 1 This tag contains the AuditValue for the controller. Bit number Event description 0 Project stored to removable media 1 Online edits modified controller program 2 Transaction committed •Indicates that a batch of one or more ch anges has been applied to the controller. For example, this might happen when a routine is imported online or when a module configuration is changed online. 3 SFC forces enabled 4 SFC forces disabled 5 SFC forces removed 6 SFC element force value changed 7 I/O forces enabled 8 I/O forces disabled 9 I/O forces removedRockwell Automation Publication 1756-PM015E-EN-P - November 2012 49Change Detection Chapter 4 10 I/O forces modified 11 Firmware update attempted12 Firmware update from removable media attempted 13 Remote mode change 14 Keyswitch mode change 15 A major fault occurred 16 All major faults cleared 17 All major faults cleared through keyswitch 18 Task properties modified 19 Program properties modified 20 Controller time slice modified 21 Removable media removed 22 Removable media inserted 23 Safety signature
•when a change is detected in the controller, a new audit value is generated. •Changes T oDetect mask allows you to programatically configure the events to monitor for changes. •controller change detection is integrated into the Logix Designer application. Note : •Change detection is not available on the RSLogix Emulate 5000 Controller and the SoftLogix5860 Controller, and the audit value is not populated. •The 1769-L3x and 1769-L4x CompactLogix Controllers do not support storing log entries to removable media. •Change detection is integrated in FactoryT alk AssetCentre version 4.1 and later. FactoryT alk AssetCentre can be configured to dectect changes in the controller and read the controller's Controller Log. •Change detection is not integrated with RSMACC utilities.IMPORTANT The change detection feature is not supported in version 19 or earlier.46 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 4 Change Detection Controller Change Detection Two controller attributes are used to support the Change Detection feature in version 20 and later. ChangesToDetect The Changes T oDetect mask is a 64-bit value. Each bit of the Changes T oDetect mask corresponds to a particular event that could cause the Audit V alue to change. See ChangesT oDetect Format on page 48 . If a bit set to a value of 1, the corresponding event is monitored for changes and when a change for that event occurs the AuditV alue updates. If a bit is set to a value of 2, the corresponding
or when Changes to Detect is reconfigured. These types of events are not included in the Changes T o Detect mask. The Changes T oDetect mask can be configured programatically using SSV , GSV and MSG instructions.Attribute Name Description Access AuditValue The AuditValue is a unique value that is generated when a project is downloaded to the controller or loaded from removable storage. When a chan ge is detected this value is updated. To specify which changes are monitored, use the ChangesToDetect attribute.GSV ChangesToDetect Used to specify which changes are monitored. When a monitored change occurs, the Audit Value is updated. GSV/SSV IMPORTANT Change detection is unavailable on the RSLogix Emulate 5000 Controller and the SoftLogix5860 Controller. TIP The Audit Value updates when the controller is online. TIP You can use the Security tab in the Contro ller Properties dialog box to configure Change Detection if you are using version 20 or later of the application. See Change Detection in Logix Designer Application on page 50 .Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 47Change Detection Chapter 4 Use the Set System V alue (SSV) instruction to write to the Changes T o Detect attribute and the Get System V alue (GSV) instruction to read the Changes T o Detect attribute programmatically. The Message Configuration dialog can be used to read or write to the Changes T oDetect attribute through CIP Generic Messages. For complete information on how to access
to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save “Set” Ladder Instruction Automatic Save “Set” Configuration Dialog BoxTIP Some Logix controllers support additional types of removable media that can be used to write the controller log entries. Refer to the Logix controller documentation for information regarding the type of removable media your Logix controller supports.28 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging The current state of the automatic write setting can be retrieved by using a message instruction with a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Get” . A rung of ladder logic that gets this value and the configuration of the message instruction are shown below. Automatic Save “Get” Ladder Instruction Automatic Save “Get” Configuration Dialog BoxRockwell Automation Publication 1756-PM015E-EN-P - November 2012 29Controller Logging Chapter

to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save “Set” Ladder Instruction Automatic Save “Set” Configuration Dialog BoxTIP Some Logix controllers support additional types of removable media that can be used to write the controller log entries. Refer to the Logix controller documentation for information regarding the type of removable media your Logix controller supports.28 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging The current state of the automatic write setting can be retrieved by using a message instruction with a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Get” . A rung of ladder logic that gets this value and the configuration of the message instruction are shown below. Automatic Save “Get” Ladder Instruction Automatic Save “Get” Configuration Dialog BoxRockwell Automation Publication 1756-PM015E-EN-P - November 2012 29Controller Logging Chapter
appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 27Controller Logging Chapter 3 Writing the Controller Log to the CompactFlash Card The controller log can be written to the CompactFlash card either automatically or on demand. Automatic Save When the controller's internal log entry buffer becomes 80% full, it can automatically write the buffered entries to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save
may be divided into several areas. If you have this controller Then it stores this In this memory 1756 ControlLogix 1756 GuardLogix 1768 CompactLogix1768 Compact GuardLogixI/O tags I/O memory Produced / Consumed tags Communication via Message (MSG) instructions Communication with workstations Communication with polled (OPC/DDE ) tags that use RSLinx software (1) Tags other than I/O, produced, or consumed tags Data and logic memory(2) Logic routinesCommunication with polled (OPC/DDE ) tags that use RSLinx software (1) 1769-L2 x CompactLogix 1769-L3 x CompactLogix FlexLogix DriveLogix SoftLogix5800These controllers do not divide their memory. They store all elements in one common memory area. (1) To communicate with polled tags, the contro ller uses both I/O data and logic memory. (2) 1756-L55M16 controllers have an additional memory section for logic.18 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 2 Determine Controller Memory Information Estimate Memory Information OfflineT o estimate how much controller memory your project requires, use the Memory tab of the Controller Properties dialog box. For each of the memory areas of your controller, the dialog box lets you estimate number of bytes of: •free (unused) memory. •used memory. •largest free contiguous block of memory. Follow these steps to estimate the controller memory. 1.Start the Logix Designer application and open a controller project. 2.On the Online toolbar (above the Controller Organizer),
entries to the removable media when its internal buffer becomes 80% full. Additionally, the controller can be commanded to write the buffered entries to the removable media with a message instruction. This procedure is detailed below. Once a log entry is written to the removable media, it is removed from the buffer. If the removable media is not present, is full, or if the controller is not configured to automatically write buffered entries to the removable media, and the internal buffer becomes full, entries will continue to be saved in the buffer in a circular fashion. As new entries are stored, the oldest entries will be discarded. Controller Log Files and the Removable Media When written to the removable media, controller logs are stored in plain text files in the T ab Separated Value (TSV) format. Each time the controller writes entries to the CompactFlash card, the entries are appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012

If the Controller Fault Handler does not clear the fault, then the controller shuts down. When you check the ‘Major Fault On Controller…Run Mode’ box, the controller: •must be connected to the module during the Program transition to Run mode. During the Program to Run mode transition, there can be a 20-second delay. During this delay, the controller makes one attempt to connect to a module. If the ‘Major Fault On Controller…Run Mode’ box is selected, and you cannot connect during the 20-second delay, a fault occurs because at least one required connection is not established before going to Run mode. This is a 3/23 type fault code. This fault can occur in large systems with networked I/O. •will fault if the connection is dropped while in Run mode. A required I/O module connection failed, creating a 3/16 type fault. For fault codes, see the Logix5000 Controllers Major and Minor Faults Programming Manual, publication 1756-PM014. If the connection times out, produce a major fault in the controller.14 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Monitor the Health of a Module If you do not configure the major fault to occur, you should monitor the module status. If a module loses its connection to the controller, outputs go to their configured faulted state. The controller and other I/O modules continue to operate based on old data from the module. If communication with a module times out, the controller produces these warnings: ·The I/O
= va lue of the Mode attribute for the module. 2. The OTE instruction sets bit 2 of Module_1_Mode = 1. This means inhibit the connection. 3. The SSV instruction sets the Mode attr ibute for the module = Module_1_Mode.12 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Manage a Connection FailureIf the controller loses communication with a module, data from that device does not update. When this occurs, the logic makes decisions on data that may or may not be correct. This section explains how to program a controller to fault. If communication with a device in the I/O configuration of the controller does not occur for 100 ms, the communication times out. If this occurs, you have these options.ATTENTION: Outputs respond to the last, non- faulted state of the controlling inputs. To avoid potential injury and damage to machinery, make sure this does not create an unsafe operation. Configure critical I/O modules to generate a controller major fault when they lose their connections to the controller: or, monitor the status of I/O modules. EXAMPLE Loss of Communication ATTENTION: Controller B requires data from controller A. If communication fails between the controllers, then controller B continues to act on the last data that it received from controller A. A BCommunication Failure 41031 If you want the controller to Then Fault (major fault) Configure a Major Fault to Occur Continue operating Monitor the Health of a ModuleRockwell Automation
create an unsafe operation. Configure critical I/O modules to generate a controller major fault when they lose their connections to the controller: or, monitor the status of I/O modules. EXAMPLE Loss of Communication ATTENTION: Controller B requires data from controller A. If communication fails between the controllers, then controller B continues to act on the last data that it received from controller A. A BCommunication Failure 41031 If you want the controller to Then Fault (major fault) Configure a Major Fault to Occur Continue operating Monitor the Health of a ModuleRockwell Automation Publication 1756-PM015E-EN-P - November 2012 13Connections Chapter 1 Configure a Major Fault to Occur Y ou can configure modules to generate a major fault in the controller if they lose their connection with the controller. This interrupts the execution of logic and executes the Controller Fault Handler. If the Controller Fault Handler does not clear the fault, then the controller shuts down. When you check the ‘Major Fault On Controller…Run Mode’ box, the controller: •must be connected to the module during the Program transition to Run mode. During the Program to Run mode transition, there can be a 20-second delay. During this delay, the controller makes one attempt to connect to a module. If the ‘Major Fault On Controller…Run Mode’ box is selected, and you cannot connect during the 20-second delay, a fault occurs because at least one required connection is not established before going
use a Get System Value (GSV) instruction to monitor the MODULE object for either the controller or a specific module. If the connection times out, continue operation without invoking a major fault on the controller. ! If you want to Get this attribute Data Type Description Determine if communication has timed out with any deviceLEDStatus INT For efficiency, use a DINT as the destination data type.Specifies the current state of the I/O status indicator on the front of the controller. You do not enter an instance name with this attribute. This attribute applies to the entire collection of modules. Value Meaning 0 Status Indicator off: No MODULE objects are configured for the controller (there are no modules in the I/O Conf iguration section of the controller organizer). 1 Flashing red: None of the MODULE objects are Running. 2 Flashing green: At least one MODULE object is not Running. 3 Solid green: All the Module objects are Running. Determine if communication has timed out with a specific deviceFaultCode INT For efficiency, use a DINT as the destination data type.A number that identifies a module fault, if one occurs. In the Instance Name, choose the device whose connection you want to monitor. Make sure to assign a name to the device in the I/O Configuration folder of the project.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 15Connections Chapter 1 If Module_Status is any value other than 4, the controller is not communicating with the module. See the

create an unsafe operation. Configure critical I/O modules to generate a controller major fault when they lose their connections to the controller: or, monitor the status of I/O modules. EXAMPLE Loss of Communication ATTENTION: Controller B requires data from controller A. If communication fails between the controllers, then controller B continues to act on the last data that it received from controller A. A BCommunication Failure 41031 If you want the controller to Then Fault (major fault) Configure a Major Fault to Occur Continue operating Monitor the Health of a ModuleRockwell Automation Publication 1756-PM015E-EN-P - November 2012 13Connections Chapter 1 Configure a Major Fault to Occur Y ou can configure modules to generate a major fault in the controller if they lose their connection with the controller. This interrupts the execution of logic and executes the Controller Fault Handler. If the Controller Fault Handler does not clear the fault, then the controller shuts down. When you check the ‘Major Fault On Controller…Run Mode’ box, the controller: •must be connected to the module during the Program transition to Run mode. During the Program to Run mode transition, there can be a 20-second delay. During this delay, the controller makes one attempt to connect to a module. If the ‘Major Fault On Controller…Run Mode’ box is selected, and you cannot connect during the 20-second delay, a fault occurs because at least one required connection is not established before going
= va lue of the Mode attribute for the module. 2. The OTE instruction sets bit 2 of Module_1_Mode = 1. This means inhibit the connection. 3. The SSV instruction sets the Mode attr ibute for the module = Module_1_Mode.12 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Manage a Connection FailureIf the controller loses communication with a module, data from that device does not update. When this occurs, the logic makes decisions on data that may or may not be correct. This section explains how to program a controller to fault. If communication with a device in the I/O configuration of the controller does not occur for 100 ms, the communication times out. If this occurs, you have these options.ATTENTION: Outputs respond to the last, non- faulted state of the controlling inputs. To avoid potential injury and damage to machinery, make sure this does not create an unsafe operation. Configure critical I/O modules to generate a controller major fault when they lose their connections to the controller: or, monitor the status of I/O modules. EXAMPLE Loss of Communication ATTENTION: Controller B requires data from controller A. If communication fails between the controllers, then controller B continues to act on the last data that it received from controller A. A BCommunication Failure 41031 If you want the controller to Then Fault (major fault) Configure a Major Fault to Occur Continue operating Monitor the Health of a ModuleRockwell Automation
If the Controller Fault Handler does not clear the fault, then the controller shuts down. When you check the ‘Major Fault On Controller…Run Mode’ box, the controller: •must be connected to the module during the Program transition to Run mode. During the Program to Run mode transition, there can be a 20-second delay. During this delay, the controller makes one attempt to connect to a module. If the ‘Major Fault On Controller…Run Mode’ box is selected, and you cannot connect during the 20-second delay, a fault occurs because at least one required connection is not established before going to Run mode. This is a 3/23 type fault code. This fault can occur in large systems with networked I/O. •will fault if the connection is dropped while in Run mode. A required I/O module connection failed, creating a 3/16 type fault. For fault codes, see the Logix5000 Controllers Major and Minor Faults Programming Manual, publication 1756-PM014. If the connection times out, produce a major fault in the controller.14 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Monitor the Health of a Module If you do not configure the major fault to occur, you should monitor the module status. If a module loses its connection to the controller, outputs go to their configured faulted state. The controller and other I/O modules continue to operate based on old data from the module. If communication with a module times out, the controller produces these warnings: ·The I/O
use a Get System Value (GSV) instruction to monitor the MODULE object for either the controller or a specific module. If the connection times out, continue operation without invoking a major fault on the controller. ! If you want to Get this attribute Data Type Description Determine if communication has timed out with any deviceLEDStatus INT For efficiency, use a DINT as the destination data type.Specifies the current state of the I/O status indicator on the front of the controller. You do not enter an instance name with this attribute. This attribute applies to the entire collection of modules. Value Meaning 0 Status Indicator off: No MODULE objects are configured for the controller (there are no modules in the I/O Conf iguration section of the controller organizer). 1 Flashing red: None of the MODULE objects are Running. 2 Flashing green: At least one MODULE object is not Running. 3 Solid green: All the Module objects are Running. Determine if communication has timed out with a specific deviceFaultCode INT For efficiency, use a DINT as the destination data type.A number that identifies a module fault, if one occurs. In the Instance Name, choose the device whose connection you want to monitor. Make sure to assign a name to the device in the I/O Configuration folder of the project.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 15Connections Chapter 1 If Module_Status is any value other than 4, the controller is not communicating with the module. See the

can type a new value. T o select the events to monitor for changes from a list, click the Configure button to open the Configure Changes to Detect dialog box. For additional information on how to configure the settings on the Security tab, refer to Logix5000 Security Programming Manual, publication 1756-PM016 or the the online help for the Logix Designer application. TIP To configure Change Detection programmatically use SSV, GSV or MSG instructions. See Controller Change Detection on page 46Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 51Chapter 5 Access Status Information Introduction The controller supports status keywords you can use in your logic to monitor specific events. •The status keywords are not case sensitive. •Because the status flags can change so quickly, the Logix Designer application does not display the status of the flags. For example, even when a status flag is set, an instruction that references that flag is not highlighted. •Y ou cannot define a tag alias to a keyword. Y ou can use these key words. Status of S:FS When the Project Has an SFCThe state of S:FS depends on the status of the SFC. •If you use S:FS in an action of a sequential function chart (SFC), S:FS is set (on) for one scan each time the step goes active. S:FS = step_name .FS. •If the SFC calls a routine, S:FS is set (on) for one scan each time the step that calls the routine goes active. S:FS = step_name .FS.To determine if Use The value you are storing cannot fit into
to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save “Set” Ladder Instruction Automatic Save “Set” Configuration Dialog BoxTIP Some Logix controllers support additional types of removable media that can be used to write the controller log entries. Refer to the Logix controller documentation for information regarding the type of removable media your Logix controller supports.28 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging The current state of the automatic write setting can be retrieved by using a message instruction with a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Get” . A rung of ladder logic that gets this value and the configuration of the message instruction are shown below. Automatic Save “Get” Ladder Instruction Automatic Save “Get” Configuration Dialog BoxRockwell Automation Publication 1756-PM015E-EN-P - November 2012 29Controller Logging Chapter
If the SFC does not call a routine, S:FS is set (on) for the first scan of the task. Get and Set System DataThe controller stores system data in objects. There is no status file, as in the PLC- 5 controller. Use the GSV/SSV instructions to get and set controller system data that is stored in objects. •The GSV instruction retrieves the specified information and places it in the destination. •The SSV instruction sets the specified attribute with data from the source. Follow these steps to get or set a system value. 1.Open the project. 2.From the Help menu, choose Contents. 3.Click the Index tab. 4.Type GSV/SSV objects and click Display.EXAMPLE Several Tasks but No SFC Suppose you have two tasks that use ladder diagrams. When the first task runs for the first time, S:FS turns on for one scan. After that, S:FS stays off for that task. When the other task runs for the first time, S:FS turns on for one scan in that task. S:FS stays off in the first task that ran. ATTENTION: Use the SSV instruction carefully. Making changes to objects can cause unexpected controller operation or injury to personnel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 53Access Status Information Chapter 5 5.Select the object. 6.In the list of attributes for the object, identify the attribute that you want to access. For attribute information, see the Logix5000 Controllers General Instruction Reference Manual, publication 1756-RM003 . 7.Create a tag for the value of the attribute. 8.In
on for one scan in that task. S:FS stays off in the first task that ran. ATTENTION: Use the SSV instruction carefully. Making changes to objects can cause unexpected controller operation or injury to personnel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 53Access Status Information Chapter 5 5.Select the object. 6.In the list of attributes for the object, identify the attribute that you want to access. For attribute information, see the Logix5000 Controllers General Instruction Reference Manual, publication 1756-RM003 . 7.Create a tag for the value of the attribute. 8.In the Ladder Logic routine, enter the appropriate instruction.To get or set Select Customize instructions for commonly- used logic AddOnInstructionDefinition Different Axis objects depending on motion application Axis (Several types) System-overhead time slice Controller Physical hardware of a controller ControllerDevice Groups one or more axes to generate coordinated motion CoordinateSystemCoordinated system time for the devices in one chassis CST DF1 communication driver for the serial port DF1 Fault history for a controller FaultLog Attributes of a message instruction Message Status, faults, and mode of a module Module Group of axes MotionGroup Fault information or scan time for a program Program Instance number of a routine Routine Different objects for safety Safety Configuration of the serial port SerialPort Properties or elapsed time of a task Task Precision time management for

appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 27Controller Logging Chapter 3 Writing the Controller Log to the CompactFlash Card The controller log can be written to the CompactFlash card either automatically or on demand. Automatic Save When the controller's internal log entry buffer becomes 80% full, it can automatically write the buffered entries to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save
software. With controller logging, the controllers: ·detect changes and create logs entries containing information about the changes. ·store the log entries to removable mediafor later review. ·provide programmatic access to log entry counters to provide change detection information remotely. Note s: •The 1769-L3x and 1769-L4x CompactLogix Controllers do not support storing log entries to removable media, and the audit value is not populated. •The Audit Value is not supported in version 19 or earlier. Topic Page Controller Log 24 Controller Log Header 24 Controller Log Entry 25 Entries Captured in the Controller Log 25 Controller Log Buffer 26 Controller Log Files and the Removable Media 26 Writing the Controller Log to the CompactFlash Card 27 Controller Logging Counters 30 Log File Storage 35 Log File Storage 35 Log File Format 36 Create Custom Log Entries 37 Sample Ladder Logic File 38 Controller Log Events 3924 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging Controller LogA controller log is a record of interactions that have occurred in the controller due to physical conditions like keyswitch and removable media, fault conditions, and programming changes configured in the application. Up to 100 log entries are buffered within the controller's memory. The controller can save these buffered entries to the removable media by using a message instruction. Additionally, the controller can be configured to automatically write
entries to the removable media when its internal buffer becomes 80% full. Additionally, the controller can be commanded to write the buffered entries to the removable media with a message instruction. This procedure is detailed below. Once a log entry is written to the removable media, it is removed from the buffer. If the removable media is not present, is full, or if the controller is not configured to automatically write buffered entries to the removable media, and the internal buffer becomes full, entries will continue to be saved in the buffer in a circular fashion. As new entries are stored, the oldest entries will be discarded. Controller Log Files and the Removable Media When written to the removable media, controller logs are stored in plain text files in the T ab Separated Value (TSV) format. Each time the controller writes entries to the CompactFlash card, the entries are appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012
File 38 Controller Log Events 3924 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging Controller LogA controller log is a record of interactions that have occurred in the controller due to physical conditions like keyswitch and removable media, fault conditions, and programming changes configured in the application. Up to 100 log entries are buffered within the controller's memory. The controller can save these buffered entries to the removable media by using a message instruction. Additionally, the controller can be configured to automatically write buffered entries to the removable media after 80 entries have accumulated. In the example below, Record Numbers 4-6 are part of the Change Detection feature. See Change Detection on page 45 Table 1 - Example Controller Log File Controller Log Header When the controller creates a log file on the removable media, it includes some header information. This he ader information includes the: ·date the log file was created. ·controller model number. ·controller serial number. ·version of firmware running on the controller.Record Number Time Entry Desc ription User Name Workstation NameFactoryTalk IDExtended InformationChange Detection Audit Value 1 12-Feb 03:39:34 Project download John Doe Lap top FT\JDoe Project L71 16#FD60_CB89_029F_3500 2 12-Feb 04:05:12 Forces Enabled Jones USMAYLT FT\Jones 3 12-Feb 04:22:03 Online edits modified controller programJohnDoe Laptop FT\JDoe 4 12-Feb 04:42:12

to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save “Set” Ladder Instruction Automatic Save “Set” Configuration Dialog BoxTIP Some Logix controllers support additional types of removable media that can be used to write the controller log entries. Refer to the Logix controller documentation for information regarding the type of removable media your Logix controller supports.28 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging The current state of the automatic write setting can be retrieved by using a message instruction with a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Get” . A rung of ladder logic that gets this value and the configuration of the message instruction are shown below. Automatic Save “Get” Ladder Instruction Automatic Save “Get” Configuration Dialog BoxRockwell Automation Publication 1756-PM015E-EN-P - November 2012 29Controller Logging Chapter
appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 27Controller Logging Chapter 3 Writing the Controller Log to the CompactFlash Card The controller log can be written to the CompactFlash card either automatically or on demand. Automatic Save When the controller's internal log entry buffer becomes 80% full, it can automatically write the buffered entries to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save
software. With controller logging, the controllers: ·detect changes and create logs entries containing information about the changes. ·store the log entries to removable mediafor later review. ·provide programmatic access to log entry counters to provide change detection information remotely. Note s: •The 1769-L3x and 1769-L4x CompactLogix Controllers do not support storing log entries to removable media, and the audit value is not populated. •The Audit Value is not supported in version 19 or earlier. Topic Page Controller Log 24 Controller Log Header 24 Controller Log Entry 25 Entries Captured in the Controller Log 25 Controller Log Buffer 26 Controller Log Files and the Removable Media 26 Writing the Controller Log to the CompactFlash Card 27 Controller Logging Counters 30 Log File Storage 35 Log File Storage 35 Log File Format 36 Create Custom Log Entries 37 Sample Ladder Logic File 38 Controller Log Events 3924 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging Controller LogA controller log is a record of interactions that have occurred in the controller due to physical conditions like keyswitch and removable media, fault conditions, and programming changes configured in the application. Up to 100 log entries are buffered within the controller's memory. The controller can save these buffered entries to the removable media by using a message instruction. Additionally, the controller can be configured to automatically write
entries to the removable media when its internal buffer becomes 80% full. Additionally, the controller can be commanded to write the buffered entries to the removable media with a message instruction. This procedure is detailed below. Once a log entry is written to the removable media, it is removed from the buffer. If the removable media is not present, is full, or if the controller is not configured to automatically write buffered entries to the removable media, and the internal buffer becomes full, entries will continue to be saved in the buffer in a circular fashion. As new entries are stored, the oldest entries will be discarded. Controller Log Files and the Removable Media When written to the removable media, controller logs are stored in plain text files in the T ab Separated Value (TSV) format. Each time the controller writes entries to the CompactFlash card, the entries are appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012

= va lue of the Mode attribute for the module. 2. The OTE instruction sets bit 2 of Module_1_Mode = 1. This means inhibit the connection. 3. The SSV instruction sets the Mode attr ibute for the module = Module_1_Mode.12 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Manage a Connection FailureIf the controller loses communication with a module, data from that device does not update. When this occurs, the logic makes decisions on data that may or may not be correct. This section explains how to program a controller to fault. If communication with a device in the I/O configuration of the controller does not occur for 100 ms, the communication times out. If this occurs, you have these options.ATTENTION: Outputs respond to the last, non- faulted state of the controlling inputs. To avoid potential injury and damage to machinery, make sure this does not create an unsafe operation. Configure critical I/O modules to generate a controller major fault when they lose their connections to the controller: or, monitor the status of I/O modules. EXAMPLE Loss of Communication ATTENTION: Controller B requires data from controller A. If communication fails between the controllers, then controller B continues to act on the last data that it received from controller A. A BCommunication Failure 41031 If you want the controller to Then Fault (major fault) Configure a Major Fault to Occur Continue operating Monitor the Health of a ModuleRockwell Automation
use a Get System Value (GSV) instruction to monitor the MODULE object for either the controller or a specific module. If the connection times out, continue operation without invoking a major fault on the controller. ! If you want to Get this attribute Data Type Description Determine if communication has timed out with any deviceLEDStatus INT For efficiency, use a DINT as the destination data type.Specifies the current state of the I/O status indicator on the front of the controller. You do not enter an instance name with this attribute. This attribute applies to the entire collection of modules. Value Meaning 0 Status Indicator off: No MODULE objects are configured for the controller (there are no modules in the I/O Conf iguration section of the controller organizer). 1 Flashing red: None of the MODULE objects are Running. 2 Flashing green: At least one MODULE object is not Running. 3 Solid green: All the Module objects are Running. Determine if communication has timed out with a specific deviceFaultCode INT For efficiency, use a DINT as the destination data type.A number that identifies a module fault, if one occurs. In the Instance Name, choose the device whose connection you want to monitor. Make sure to assign a name to the device in the I/O Configuration folder of the project.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 15Connections Chapter 1 If Module_Status is any value other than 4, the controller is not communicating with the module. See the
reconfi gured (if the controller is the owner-controller) with the co nfiguration you created for that module. If the controller is configured for listen-only, it cannot reconfigure the module. Fault occurs A connection is not made to the module. The module status information changes to indicate the fault condition.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 11Connections Chapter 1 Follow these steps to inhibit or uninhibit a module from logic. 1.Use a Get System V alue (GSV) instruction to read the Mode attribute for the module. 2.Set or clear bit 2. 3.Use a Set System Value (SSV) instruction to write the Mode attribute back to the module.If you want to Then Inhibit the module Set bit 2 Uninhibit the module Clear bit 2 EXAMPLE Inhibit a Connection If Module_1_Inhibit = 1, then inhibit the op eration of the I/O module named Module_1. 1. The GSV instruction sets Module_1_Mode = va lue of the Mode attribute for the module. 2. The OTE instruction sets bit 2 of Module_1_Mode = 1. This means inhibit the connection. 3. The SSV instruction sets the Mode attr ibute for the module = Module_1_Mode.12 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Manage a Connection FailureIf the controller loses communication with a module, data from that device does not update. When this occurs, the logic makes decisions on data that may or may not be correct. This section explains how to program a controller to fault. If communication with
breaks the connection to the module and prevents communication of I/O data. Inhibit communication with the module If you want to Then Communicate with the module Do not inhibit the module Prevent communication with the module Inhibit the module ! If you are And you And Then Offline The inhibit status is stored in the project. When you download the project, the module still is inhibited. Online Inhibit a module while you are connected to the moduleThe connection to the module is closed. The modu les’ outputs go to the last configured Program mode. Inhibit a module but a connection to the module was not established (perhaps due to an error condition or fault)The module is inhibited. The module status information changes to indicate that the module is inhibited and not faulted. Uninhibit a module (clear the check box) No fault occurs A connection is ma de to the module and the module is dynamically reconfi gured (if the controller is the owner-controller) with the co nfiguration you created for that module. If the controller is configured for listen-only, it cannot reconfigure the module. Fault occurs A connection is not made to the module. The module status information changes to indicate the fault condition.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 11Connections Chapter 1 Follow these steps to inhibit or uninhibit a module from logic. 1.Use a Get System V alue (GSV) instruction to read the Mode attribute for the module. 2.Set or clear bit 2. 3.Use a Set

Change Detection if you are using version 20 or later of the application. See Change Detection in Logix Designer Application on page 50 .Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 47Change Detection Chapter 4 Use the Set System V alue (SSV) instruction to write to the Changes T o Detect attribute and the Get System V alue (GSV) instruction to read the Changes T o Detect attribute programmatically. The Message Configuration dialog can be used to read or write to the Changes T oDetect attribute through CIP Generic Messages. For complete information on how to access data using an MSG instruction, refer to Logix5000 Controllers Messages Programming Manual, publication 1756-UM012. Use these settings to configure the Changes T oDetect attribute using the Message Configuration dialogTIP We recommend using the DINT[2] data type to avoid limitations when working with LINT data types in Rockwell Automation controllers. If you want to: In this property Type or select Set controller events monitored for changesMessage Type CIP Generic Service Type Changes to Detect Set Source tag_name of type DINT[2] or LINT 1 This tag represents a bit mask of the changes monitored for the controller. Destination leave blank Get controller events monitored for changesMessage Type CIP Generic Service Type Changes to Detect Get Source leave blank Destination tag_name of type DINT[2] or LINT 1 This tag represents a bit mask of the changes monitored for the controller.48 Rockwell
•when a change is detected in the controller, a new audit value is generated. •Changes T oDetect mask allows you to programatically configure the events to monitor for changes. •controller change detection is integrated into the Logix Designer application. Note : •Change detection is not available on the RSLogix Emulate 5000 Controller and the SoftLogix5860 Controller, and the audit value is not populated. •The 1769-L3x and 1769-L4x CompactLogix Controllers do not support storing log entries to removable media. •Change detection is integrated in FactoryT alk AssetCentre version 4.1 and later. FactoryT alk AssetCentre can be configured to dectect changes in the controller and read the controller's Controller Log. •Change detection is not integrated with RSMACC utilities.IMPORTANT The change detection feature is not supported in version 19 or earlier.46 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 4 Change Detection Controller Change Detection Two controller attributes are used to support the Change Detection feature in version 20 and later. ChangesToDetect The Changes T oDetect mask is a 64-bit value. Each bit of the Changes T oDetect mask corresponds to a particular event that could cause the Audit V alue to change. See ChangesT oDetect Format on page 48 . If a bit set to a value of 1, the corresponding event is monitored for changes and when a change for that event occurs the AuditV alue updates. If a bit is set to a value of 2, the corresponding
the synchronization between the controller and the projec t file that was downloaded to it. Tip: Correlation Affected can include detection of a component being created, deleted, or modified, or logic was modified. Including the Correlation Affected event will update the audit value for these types of changes, even if other similar events (such as "Online edits modified controller program" or "Task properties modified") are masked. 33 Safety signature delete inhibited in Run mode 34 Safety signature delete allowed in Run modeBit number Event description50 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 4 Change Detection Change Detection in Logix Designer ApplicationVersion 20 and later of the application provides the Security tab in the Controller Properties dialog that allows users to configure Change Detection. T o edit the Changes T o Detect field you can type a new value. T o select the events to monitor for changes from a list, click the Configure button to open the Configure Changes to Detect dialog box. For additional information on how to configure the settings on the Security tab, refer to Logix5000 Security Programming Manual, publication 1756-PM016 or the the online help for the Logix Designer application. TIP To configure Change Detection programmatically use SSV, GSV or MSG instructions. See Controller Change Detection on page 46Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 51Chapter 5 Access Status Information
or when Changes to Detect is reconfigured. These types of events are not included in the Changes T o Detect mask. The Changes T oDetect mask can be configured programatically using SSV , GSV and MSG instructions.Attribute Name Description Access AuditValue The AuditValue is a unique value that is generated when a project is downloaded to the controller or loaded from removable storage. When a chan ge is detected this value is updated. To specify which changes are monitored, use the ChangesToDetect attribute.GSV ChangesToDetect Used to specify which changes are monitored. When a monitored change occurs, the Audit Value is updated. GSV/SSV IMPORTANT Change detection is unavailable on the RSLogix Emulate 5000 Controller and the SoftLogix5860 Controller. TIP The Audit Value updates when the controller is online. TIP You can use the Security tab in the Contro ller Properties dialog box to configure Change Detection if you are using version 20 or later of the application. See Change Detection in Logix Designer Application on page 50 .Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 47Change Detection Chapter 4 Use the Set System V alue (SSV) instruction to write to the Changes T o Detect attribute and the Get System V alue (GSV) instruction to read the Changes T o Detect attribute programmatically. The Message Configuration dialog can be used to read or write to the Changes T oDetect attribute through CIP Generic Messages. For complete information on how to access

or when Changes to Detect is reconfigured. These types of events are not included in the Changes T o Detect mask. The Changes T oDetect mask can be configured programatically using SSV , GSV and MSG instructions.Attribute Name Description Access AuditValue The AuditValue is a unique value that is generated when a project is downloaded to the controller or loaded from removable storage. When a chan ge is detected this value is updated. To specify which changes are monitored, use the ChangesToDetect attribute.GSV ChangesToDetect Used to specify which changes are monitored. When a monitored change occurs, the Audit Value is updated. GSV/SSV IMPORTANT Change detection is unavailable on the RSLogix Emulate 5000 Controller and the SoftLogix5860 Controller. TIP The Audit Value updates when the controller is online. TIP You can use the Security tab in the Contro ller Properties dialog box to configure Change Detection if you are using version 20 or later of the application. See Change Detection in Logix Designer Application on page 50 .Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 47Change Detection Chapter 4 Use the Set System V alue (SSV) instruction to write to the Changes T o Detect attribute and the Get System V alue (GSV) instruction to read the Changes T o Detect attribute programmatically. The Message Configuration dialog can be used to read or write to the Changes T oDetect attribute through CIP Generic Messages. For complete information on how to access
Change Detection if you are using version 20 or later of the application. See Change Detection in Logix Designer Application on page 50 .Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 47Change Detection Chapter 4 Use the Set System V alue (SSV) instruction to write to the Changes T o Detect attribute and the Get System V alue (GSV) instruction to read the Changes T o Detect attribute programmatically. The Message Configuration dialog can be used to read or write to the Changes T oDetect attribute through CIP Generic Messages. For complete information on how to access data using an MSG instruction, refer to Logix5000 Controllers Messages Programming Manual, publication 1756-UM012. Use these settings to configure the Changes T oDetect attribute using the Message Configuration dialogTIP We recommend using the DINT[2] data type to avoid limitations when working with LINT data types in Rockwell Automation controllers. If you want to: In this property Type or select Set controller events monitored for changesMessage Type CIP Generic Service Type Changes to Detect Set Source tag_name of type DINT[2] or LINT 1 This tag represents a bit mask of the changes monitored for the controller. Destination leave blank Get controller events monitored for changesMessage Type CIP Generic Service Type Changes to Detect Get Source leave blank Destination tag_name of type DINT[2] or LINT 1 This tag represents a bit mask of the changes monitored for the controller.48 Rockwell
can type a new value. T o select the events to monitor for changes from a list, click the Configure button to open the Configure Changes to Detect dialog box. For additional information on how to configure the settings on the Security tab, refer to Logix5000 Security Programming Manual, publication 1756-PM016 or the the online help for the Logix Designer application. TIP To configure Change Detection programmatically use SSV, GSV or MSG instructions. See Controller Change Detection on page 46Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 51Chapter 5 Access Status Information Introduction The controller supports status keywords you can use in your logic to monitor specific events. •The status keywords are not case sensitive. •Because the status flags can change so quickly, the Logix Designer application does not display the status of the flags. For example, even when a status flag is set, an instruction that references that flag is not highlighted. •Y ou cannot define a tag alias to a keyword. Y ou can use these key words. Status of S:FS When the Project Has an SFCThe state of S:FS depends on the status of the SFC. •If you use S:FS in an action of a sequential function chart (SFC), S:FS is set (on) for one scan each time the step goes active. S:FS = step_name .FS. •If the SFC calls a routine, S:FS is set (on) for one scan each time the step that calls the routine goes active. S:FS = step_name .FS.To determine if Use The value you are storing cannot fit into
- November 2012Chapter 4 Change Detection Controller Change Detection Two controller attributes are used to support the Change Detection feature in version 20 and later. ChangesToDetect The Changes T oDetect mask is a 64-bit value. Each bit of the Changes T oDetect mask corresponds to a particular event that could cause the Audit V alue to change. See ChangesT oDetect Format on page 48 . If a bit set to a value of 1, the corresponding event is monitored for changes and when a change for that event occurs the AuditV alue updates. If a bit is set to a value of 2, the corresponding event is not monitored and has no affect on the Audit V alue. The default Audit V alue of: 0xFFFFFFFFFFFFFFFF indicates that all events are monitored. There are some events that will always update the audit value when they occur. For example, the audit value changes when a project is downloaded to the controller, or when Changes to Detect is reconfigured. These types of events are not included in the Changes T o Detect mask. The Changes T oDetect mask can be configured programatically using SSV , GSV and MSG instructions.Attribute Name Description Access AuditValue The AuditValue is a unique value that is generated when a project is downloaded to the controller or loaded from removable storage. When a chan ge is detected this value is updated. To specify which changes are monitored, use the ChangesToDetect attribute.GSV ChangesToDetect Used to specify which changes are monitored. When a monitored

breaks the connection to the module and prevents communication of I/O data. Inhibit communication with the module If you want to Then Communicate with the module Do not inhibit the module Prevent communication with the module Inhibit the module ! If you are And you And Then Offline The inhibit status is stored in the project. When you download the project, the module still is inhibited. Online Inhibit a module while you are connected to the moduleThe connection to the module is closed. The modu les’ outputs go to the last configured Program mode. Inhibit a module but a connection to the module was not established (perhaps due to an error condition or fault)The module is inhibited. The module status information changes to indicate that the module is inhibited and not faulted. Uninhibit a module (clear the check box) No fault occurs A connection is ma de to the module and the module is dynamically reconfi gured (if the controller is the owner-controller) with the co nfiguration you created for that module. If the controller is configured for listen-only, it cannot reconfigure the module. Fault occurs A connection is not made to the module. The module status information changes to indicate the fault condition.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 11Connections Chapter 1 Follow these steps to inhibit or uninhibit a module from logic. 1.Use a Get System V alue (GSV) instruction to read the Mode attribute for the module. 2.Set or clear bit 2. 3.Use a Set
2012Chapter 1 Connections Inhibit a ConnectionIn some situations, such as when initially commissioning a system, it is useful to disable portions of a control system and enable them as you wire the control system. The controller lets you inhibit individual modules or groups of modules, which prevents the controller from trying to communicate with the modules. When you configure an I/O module, it defaults to being not inhibited. Y ou can change an individual module’s properties to inhibit a module. When you inhibit a communication bridge module, the controller shuts down the connections to the bridge module and to all the modules that depend on that bridge module. Inhibiting a communication bridge module lets you disable an entire branch of the I/O network. When you inhibit the module, the Controller Organizer displays a yellow attention symbol over the module. ATTENTION: Inhibiting a module breaks the connection to the module and prevents communication of I/O data. Inhibit communication with the module If you want to Then Communicate with the module Do not inhibit the module Prevent communication with the module Inhibit the module ! If you are And you And Then Offline The inhibit status is stored in the project. When you download the project, the module still is inhibited. Online Inhibit a module while you are connected to the moduleThe connection to the module is closed. The modu les’ outputs go to the last configured Program mode. Inhibit a module but a connection to the
reconfi gured (if the controller is the owner-controller) with the co nfiguration you created for that module. If the controller is configured for listen-only, it cannot reconfigure the module. Fault occurs A connection is not made to the module. The module status information changes to indicate the fault condition.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 11Connections Chapter 1 Follow these steps to inhibit or uninhibit a module from logic. 1.Use a Get System V alue (GSV) instruction to read the Mode attribute for the module. 2.Set or clear bit 2. 3.Use a Set System Value (SSV) instruction to write the Mode attribute back to the module.If you want to Then Inhibit the module Set bit 2 Uninhibit the module Clear bit 2 EXAMPLE Inhibit a Connection If Module_1_Inhibit = 1, then inhibit the op eration of the I/O module named Module_1. 1. The GSV instruction sets Module_1_Mode = va lue of the Mode attribute for the module. 2. The OTE instruction sets bit 2 of Module_1_Mode = 1. This means inhibit the connection. 3. The SSV instruction sets the Mode attr ibute for the module = Module_1_Mode.12 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Manage a Connection FailureIf the controller loses communication with a module, data from that device does not update. When this occurs, the logic makes decisions on data that may or may not be correct. This section explains how to program a controller to fault. If communication with
= va lue of the Mode attribute for the module. 2. The OTE instruction sets bit 2 of Module_1_Mode = 1. This means inhibit the connection. 3. The SSV instruction sets the Mode attr ibute for the module = Module_1_Mode.12 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Manage a Connection FailureIf the controller loses communication with a module, data from that device does not update. When this occurs, the logic makes decisions on data that may or may not be correct. This section explains how to program a controller to fault. If communication with a device in the I/O configuration of the controller does not occur for 100 ms, the communication times out. If this occurs, you have these options.ATTENTION: Outputs respond to the last, non- faulted state of the controlling inputs. To avoid potential injury and damage to machinery, make sure this does not create an unsafe operation. Configure critical I/O modules to generate a controller major fault when they lose their connections to the controller: or, monitor the status of I/O modules. EXAMPLE Loss of Communication ATTENTION: Controller B requires data from controller A. If communication fails between the controllers, then controller B continues to act on the last data that it received from controller A. A BCommunication Failure 41031 If you want the controller to Then Fault (major fault) Configure a Major Fault to Occur Continue operating Monitor the Health of a ModuleRockwell Automation

use a Get System Value (GSV) instruction to monitor the MODULE object for either the controller or a specific module. If the connection times out, continue operation without invoking a major fault on the controller. ! If you want to Get this attribute Data Type Description Determine if communication has timed out with any deviceLEDStatus INT For efficiency, use a DINT as the destination data type.Specifies the current state of the I/O status indicator on the front of the controller. You do not enter an instance name with this attribute. This attribute applies to the entire collection of modules. Value Meaning 0 Status Indicator off: No MODULE objects are configured for the controller (there are no modules in the I/O Conf iguration section of the controller organizer). 1 Flashing red: None of the MODULE objects are Running. 2 Flashing green: At least one MODULE object is not Running. 3 Solid green: All the Module objects are Running. Determine if communication has timed out with a specific deviceFaultCode INT For efficiency, use a DINT as the destination data type.A number that identifies a module fault, if one occurs. In the Instance Name, choose the device whose connection you want to monitor. Make sure to assign a name to the device in the I/O Configuration folder of the project.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 15Connections Chapter 1 If Module_Status is any value other than 4, the controller is not communicating with the module. See the
or when Changes to Detect is reconfigured. These types of events are not included in the Changes T o Detect mask. The Changes T oDetect mask can be configured programatically using SSV , GSV and MSG instructions.Attribute Name Description Access AuditValue The AuditValue is a unique value that is generated when a project is downloaded to the controller or loaded from removable storage. When a chan ge is detected this value is updated. To specify which changes are monitored, use the ChangesToDetect attribute.GSV ChangesToDetect Used to specify which changes are monitored. When a monitored change occurs, the Audit Value is updated. GSV/SSV IMPORTANT Change detection is unavailable on the RSLogix Emulate 5000 Controller and the SoftLogix5860 Controller. TIP The Audit Value updates when the controller is online. TIP You can use the Security tab in the Contro ller Properties dialog box to configure Change Detection if you are using version 20 or later of the application. See Change Detection in Logix Designer Application on page 50 .Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 47Change Detection Chapter 4 Use the Set System V alue (SSV) instruction to write to the Changes T o Detect attribute and the Get System V alue (GSV) instruction to read the Changes T o Detect attribute programmatically. The Message Configuration dialog can be used to read or write to the Changes T oDetect attribute through CIP Generic Messages. For complete information on how to access
is used by the attribute. B. Create a tag for the attribute and use the data type from step A. To Enter this instruction Get the value of an attribute GSV Set the value of an attribute SSV54 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 5 Access Status Information 9.Assign the required operands to the instruction: This examples gets the current date and time. For more GSV/SSV information, see the Logix5000 Controllers General Instructions Reference Manual, publication 1756-RM003.For this operand Select Class name Name of the object. Instance name Name of the specific object (for example, name of the required I/O module, task, message). •Not all objects require this entry. •To specify the current task, program, or routine, select THIS. Attribute name Name of the attribute. Dest (GSV) Tag that will store the retrieved value. If the tag is a user-defined data type or an array, select the first member or element. Source (SSV) Tag that stores the value to be set. If the tag is a user-defined data type or an array, select the first member or element. EXAMPLE Get a System Value At the first scan, gets the DateTime attrib ute of the WALLCLOCKTIME object and stores it in the wall_clock tag, which is based on a user-defined data type. 42370Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 55Index A access status information 51 AuditValue 48 B bridge module connection 10 C Change Detection 46 ChangesToDetect 46 communicate other controllers 9
complete information on how to access data using an MSG instruction, refer to Logix5000 Controllers Messages Programming Manual, publication 1756-UM012. Use these settings to read the Audit V alue attribute using the Message Configuration. ChangesToDetect FormatIf you want to: In this property Type or select Get AuditValue Message Type CIP Generic Service Type Audit Value Get Source leave blank Destination tag_name of type DINT[2] or LINT 1 This tag contains the AuditValue for the controller. Bit number Event description 0 Project stored to removable media 1 Online edits modified controller program 2 Transaction committed •Indicates that a batch of one or more ch anges has been applied to the controller. For example, this might happen when a routine is imported online or when a module configuration is changed online. 3 SFC forces enabled 4 SFC forces disabled 5 SFC forces removed 6 SFC element force value changed 7 I/O forces enabled 8 I/O forces disabled 9 I/O forces removedRockwell Automation Publication 1756-PM015E-EN-P - November 2012 49Change Detection Chapter 4 10 I/O forces modified 11 Firmware update attempted12 Firmware update from removable media attempted 13 Remote mode change 14 Keyswitch mode change 15 A major fault occurred 16 All major faults cleared 17 All major faults cleared through keyswitch 18 Task properties modified 19 Program properties modified 20 Controller time slice modified 21 Removable media removed 22 Removable media inserted 23 Safety signature

- November 2012 25Controller Logging Chapter 3 Controller Log Entry Each entry in the log can include the following information: ·Record Number ·Time of Occurrence (UTC - 24 hour clock) ·Entry Description ·Windows User Name ·Wo r k s t a t i o n Na m e ·FactoryT alk User ID (if available) ·Extended Information •Change Detection Audit Value (Refer to Controller Change Detection on page 46 .) Figure 1 - Example Excel File of a Controller Log Entries Captured in the Controller Log Below is a list of entries that are detected and logged. These events are described in more detail in Controller Log Events on page 39 . •Project downloaded •Project loaded from removable media •Project stored to removable media •Online edits modified controller program •Partial import online completed or T ranaction committed •I/O forces enabled, disabled, removed, or modified •SFC forces enabled, disabled, removed, or modified •Firmware update •Constant tag data changed •Multiple constant tag data changed26 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging •Change to constant tag configuration reset •Mode change •Major fault, major fault cleared •Program properties modified •Ta s k p r o p e r ti e s m o d i f i e d •Controller timeslice modified •Removable media inserted or removed •Safety signature created or deleted •Safety locked or unlocked •Custom entry: User-defined logic to create a log entry, with user-defined entry description and extended
(GSV) instruction. Total Entry Count by Using a Get System Value (GSV) InstructionCounter Name Desc ription Access Total Entry Count Number of entries added to the log since the last firmware update.GSV/SSV Unsaved Entry Count Number of entries in controller RAM not yet written to the CompactFlash card.GSV Modify Execution Count Count that specifically tracks modifications that can change behavior of a runnin g controller. A subset of entries increment this countGSV/SSVRockwell Automation Publication 1756-PM015E-EN-P - November 2012 31Controller Logging Chapter 3 This rung of ladder logic shows how to set the T otal Entry Count to a known value (in this example, 0) by using an SSV instruction. Figure 4 - Set the Total Entry Count to a Known Value Instruction Unsaved Entry Count The Unsaved Entry Count is the number of log entries that are in controller memory but have not yet been stored to the CompactFlash card. This counter value is available via a GSV instruction, and can range from 0…100, the maximum number of entries that the controller can buffer. This rung of ladder logic shows how to retrieve the Unsaved Entry Count by using a Get System Value (GSV) instruction. Figure 5 - Retrieve the Unsaved Entry Co unt Using a Get System Value Instruction32 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging Execution Modification Count The Execution Modification Count tracks the number of changes that occur that can change the behavior of
entries to the removable media when its internal buffer becomes 80% full. Additionally, the controller can be commanded to write the buffered entries to the removable media with a message instruction. This procedure is detailed below. Once a log entry is written to the removable media, it is removed from the buffer. If the removable media is not present, is full, or if the controller is not configured to automatically write buffered entries to the removable media, and the internal buffer becomes full, entries will continue to be saved in the buffer in a circular fashion. As new entries are stored, the oldest entries will be discarded. Controller Log Files and the Removable Media When written to the removable media, controller logs are stored in plain text files in the T ab Separated Value (TSV) format. Each time the controller writes entries to the CompactFlash card, the entries are appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012
appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 27Controller Logging Chapter 3 Writing the Controller Log to the CompactFlash Card The controller log can be written to the CompactFlash card either automatically or on demand. Automatic Save When the controller's internal log entry buffer becomes 80% full, it can automatically write the buffered entries to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save

·Ta s k p r o p e r ti e s m o d i f i e d ·Controller timeslice modified This counter can be set to a known value by using an SSV instruction. This rung of ladder logic shows how to retrieve the Execution Modification Count by using a GSV instruction. Figure 6 - Retrieve the Execution Modifi cation Count by Using a GSV Instruction This rung of ladder logic shows how to set the Execution Modification Count to a known value. Figure 7 - Set the Execution Modification Count to a Known ValueRockwell Automation Publication 1756-PM015E-EN-P - November 2012 33Controller Logging Chapter 3 A message instruction of message type “CIP Generic” and a service type of “Controller Log Config Execution Set” is used to configure whether the Execution Modification Count includes forces. If it is sent a value of 1, forces will be included in the counter. If it is sent a value of 0, forces will not be included. The rung of ladder logic below shows how to send the message instruction. The configuration dialog box of the message instruction is also shown. Figure 8 - Set the Execution Count Configure Mask Instruction Figure 9 - Set the Execution Count Configure Mask Dialog Box The Source Element should be of data type DINT.34 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging A message instruction is also used to retrieve the current value of this configuration. This message uses a message type of “CIP Generic” and a service type of “Controller Log Config
to the CompactFlash card. This counter value is available via a GSV instruction, and can range from 0…100, the maximum number of entries that the controller can buffer. This rung of ladder logic shows how to retrieve the Unsaved Entry Count by using a Get System Value (GSV) instruction. Figure 5 - Retrieve the Unsaved Entry Co unt Using a Get System Value Instruction32 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging Execution Modification Count The Execution Modification Count tracks the number of changes that occur that can change the behavior of a running controller. This counter can be configured to include or exclude force changes. The events that will cause the Execution Modification Count to increment include the following: ·Online edits tested or assembled ·Forces enabled or disabled (if so configured) ·Program properties modified ·Ta s k p r o p e r ti e s m o d i f i e d ·Controller timeslice modified This counter can be set to a known value by using an SSV instruction. This rung of ladder logic shows how to retrieve the Execution Modification Count by using a GSV instruction. Figure 6 - Retrieve the Execution Modifi cation Count by Using a GSV Instruction This rung of ladder logic shows how to set the Execution Modification Count to a known value. Figure 7 - Set the Execution Modification Count to a Known ValueRockwell Automation Publication 1756-PM015E-EN-P - November 2012 33Controller Logging Chapter 3 A message
the synchronization between the controller and the projec t file that was downloaded to it. Tip: Correlation Affected can include detection of a component being created, deleted, or modified, or logic was modified. Including the Correlation Affected event will update the audit value for these types of changes, even if other similar events (such as "Online edits modified controller program" or "Task properties modified") are masked. 33 Safety signature delete inhibited in Run mode 34 Safety signature delete allowed in Run modeBit number Event description50 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 4 Change Detection Change Detection in Logix Designer ApplicationVersion 20 and later of the application provides the Security tab in the Controller Properties dialog that allows users to configure Change Detection. T o edit the Changes T o Detect field you can type a new value. T o select the events to monitor for changes from a list, click the Configure button to open the Configure Changes to Detect dialog box. For additional information on how to configure the settings on the Security tab, refer to Logix5000 Security Programming Manual, publication 1756-PM016 or the the online help for the Logix Designer application. TIP To configure Change Detection programmatically use SSV, GSV or MSG instructions. See Controller Change Detection on page 46Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 51Chapter 5 Access Status Information
force value changed 7 I/O forces enabled 8 I/O forces disabled 9 I/O forces removedRockwell Automation Publication 1756-PM015E-EN-P - November 2012 49Change Detection Chapter 4 10 I/O forces modified 11 Firmware update attempted12 Firmware update from removable media attempted 13 Remote mode change 14 Keyswitch mode change 15 A major fault occurred 16 All major faults cleared 17 All major faults cleared through keyswitch 18 Task properties modified 19 Program properties modified 20 Controller time slice modified 21 Removable media removed 22 Removable media inserted 23 Safety signature created 24 Safety signature deleted 25 Safety lock 26 Safety unlock 27 Constant Tag value changed 28 Multiple constant Tag values changed 29 Constant Tag attribute cleared 30 Constant Tag attribute set 31 Custom Log Entry Added 32 Correlation affected •Indicates a change occurred in the controller that affects the synchronization between the controller and the projec t file that was downloaded to it. Tip: Correlation Affected can include detection of a component being created, deleted, or modified, or logic was modified. Including the Correlation Affected event will update the audit value for these types of changes, even if other similar events (such as "Online edits modified controller program" or "Task properties modified") are masked. 33 Safety signature delete inhibited in Run mode 34 Safety signature delete allowed in Run modeBit number Event description50 Rockwell Automation Publication

or when Changes to Detect is reconfigured. These types of events are not included in the Changes T o Detect mask. The Changes T oDetect mask can be configured programatically using SSV , GSV and MSG instructions.Attribute Name Description Access AuditValue The AuditValue is a unique value that is generated when a project is downloaded to the controller or loaded from removable storage. When a chan ge is detected this value is updated. To specify which changes are monitored, use the ChangesToDetect attribute.GSV ChangesToDetect Used to specify which changes are monitored. When a monitored change occurs, the Audit Value is updated. GSV/SSV IMPORTANT Change detection is unavailable on the RSLogix Emulate 5000 Controller and the SoftLogix5860 Controller. TIP The Audit Value updates when the controller is online. TIP You can use the Security tab in the Contro ller Properties dialog box to configure Change Detection if you are using version 20 or later of the application. See Change Detection in Logix Designer Application on page 50 .Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 47Change Detection Chapter 4 Use the Set System V alue (SSV) instruction to write to the Changes T o Detect attribute and the Get System V alue (GSV) instruction to read the Changes T o Detect attribute programmatically. The Message Configuration dialog can be used to read or write to the Changes T oDetect attribute through CIP Generic Messages. For complete information on how to access
is used by the attribute. B. Create a tag for the attribute and use the data type from step A. To Enter this instruction Get the value of an attribute GSV Set the value of an attribute SSV54 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 5 Access Status Information 9.Assign the required operands to the instruction: This examples gets the current date and time. For more GSV/SSV information, see the Logix5000 Controllers General Instructions Reference Manual, publication 1756-RM003.For this operand Select Class name Name of the object. Instance name Name of the specific object (for example, name of the required I/O module, task, message). •Not all objects require this entry. •To specify the current task, program, or routine, select THIS. Attribute name Name of the attribute. Dest (GSV) Tag that will store the retrieved value. If the tag is a user-defined data type or an array, select the first member or element. Source (SSV) Tag that stores the value to be set. If the tag is a user-defined data type or an array, select the first member or element. EXAMPLE Get a System Value At the first scan, gets the DateTime attrib ute of the WALLCLOCKTIME object and stores it in the wall_clock tag, which is based on a user-defined data type. 42370Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 55Index A access status information 51 AuditValue 48 B bridge module connection 10 C Change Detection 46 ChangesToDetect 46 communicate other controllers 9
Change Detection if you are using version 20 or later of the application. See Change Detection in Logix Designer Application on page 50 .Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 47Change Detection Chapter 4 Use the Set System V alue (SSV) instruction to write to the Changes T o Detect attribute and the Get System V alue (GSV) instruction to read the Changes T o Detect attribute programmatically. The Message Configuration dialog can be used to read or write to the Changes T oDetect attribute through CIP Generic Messages. For complete information on how to access data using an MSG instruction, refer to Logix5000 Controllers Messages Programming Manual, publication 1756-UM012. Use these settings to configure the Changes T oDetect attribute using the Message Configuration dialogTIP We recommend using the DINT[2] data type to avoid limitations when working with LINT data types in Rockwell Automation controllers. If you want to: In this property Type or select Set controller events monitored for changesMessage Type CIP Generic Service Type Changes to Detect Set Source tag_name of type DINT[2] or LINT 1 This tag represents a bit mask of the changes monitored for the controller. Destination leave blank Get controller events monitored for changesMessage Type CIP Generic Service Type Changes to Detect Get Source leave blank Destination tag_name of type DINT[2] or LINT 1 This tag represents a bit mask of the changes monitored for the controller.48 Rockwell
can type a new value. T o select the events to monitor for changes from a list, click the Configure button to open the Configure Changes to Detect dialog box. For additional information on how to configure the settings on the Security tab, refer to Logix5000 Security Programming Manual, publication 1756-PM016 or the the online help for the Logix Designer application. TIP To configure Change Detection programmatically use SSV, GSV or MSG instructions. See Controller Change Detection on page 46Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 51Chapter 5 Access Status Information Introduction The controller supports status keywords you can use in your logic to monitor specific events. •The status keywords are not case sensitive. •Because the status flags can change so quickly, the Logix Designer application does not display the status of the flags. For example, even when a status flag is set, an instruction that references that flag is not highlighted. •Y ou cannot define a tag alias to a keyword. Y ou can use these key words. Status of S:FS When the Project Has an SFCThe state of S:FS depends on the status of the SFC. •If you use S:FS in an action of a sequential function chart (SFC), S:FS is set (on) for one scan each time the step goes active. S:FS = step_name .FS. •If the SFC calls a routine, S:FS is set (on) for one scan each time the step that calls the routine goes active. S:FS = step_name .FS.To determine if Use The value you are storing cannot fit into

appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 27Controller Logging Chapter 3 Writing the Controller Log to the CompactFlash Card The controller log can be written to the CompactFlash card either automatically or on demand. Automatic Save When the controller's internal log entry buffer becomes 80% full, it can automatically write the buffered entries to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save
to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save “Set” Ladder Instruction Automatic Save “Set” Configuration Dialog BoxTIP Some Logix controllers support additional types of removable media that can be used to write the controller log entries. Refer to the Logix controller documentation for information regarding the type of removable media your Logix controller supports.28 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging The current state of the automatic write setting can be retrieved by using a message instruction with a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Get” . A rung of ladder logic that gets this value and the configuration of the message instruction are shown below. Automatic Save “Get” Ladder Instruction Automatic Save “Get” Configuration Dialog BoxRockwell Automation Publication 1756-PM015E-EN-P - November 2012 29Controller Logging Chapter
entries to the removable media when its internal buffer becomes 80% full. Additionally, the controller can be commanded to write the buffered entries to the removable media with a message instruction. This procedure is detailed below. Once a log entry is written to the removable media, it is removed from the buffer. If the removable media is not present, is full, or if the controller is not configured to automatically write buffered entries to the removable media, and the internal buffer becomes full, entries will continue to be saved in the buffer in a circular fashion. As new entries are stored, the oldest entries will be discarded. Controller Log Files and the Removable Media When written to the removable media, controller logs are stored in plain text files in the T ab Separated Value (TSV) format. Each time the controller writes entries to the CompactFlash card, the entries are appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012
can type a new value. T o select the events to monitor for changes from a list, click the Configure button to open the Configure Changes to Detect dialog box. For additional information on how to configure the settings on the Security tab, refer to Logix5000 Security Programming Manual, publication 1756-PM016 or the the online help for the Logix Designer application. TIP To configure Change Detection programmatically use SSV, GSV or MSG instructions. See Controller Change Detection on page 46Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 51Chapter 5 Access Status Information Introduction The controller supports status keywords you can use in your logic to monitor specific events. •The status keywords are not case sensitive. •Because the status flags can change so quickly, the Logix Designer application does not display the status of the flags. For example, even when a status flag is set, an instruction that references that flag is not highlighted. •Y ou cannot define a tag alias to a keyword. Y ou can use these key words. Status of S:FS When the Project Has an SFCThe state of S:FS depends on the status of the SFC. •If you use S:FS in an action of a sequential function chart (SFC), S:FS is set (on) for one scan each time the step goes active. S:FS = step_name .FS. •If the SFC calls a routine, S:FS is set (on) for one scan each time the step that calls the routine goes active. S:FS = step_name .FS.To determine if Use The value you are storing cannot fit into

to INT_array (destination tag of the MSG). Convert INTs to a DINT The MSG instruction returns each memory value as two separate INT s. •The first INT represents the lower 16 bits of the value. •The second INT represents the upper 16 bits of the value.IMPORTANT The controller returns the values in number of 32-bit words. To see a value in bytes, multiple it by 4. If your controller does not divide its memory, then the values show up as I/O memory. For the 1756-L55M16 controller, the MSG instruct ion returns two values for each logic memory category. To determine the free or total logic memo ry, of a 1756-L55M16 controller, add both values for the category. If you want the Then copy these array elements Description Amount of free I/O memory (32-bit words) INT_array[3] Lower 16 bits of the 32 bit value INT_array[4] Upper 16 bits of the 32 bit value Amount of free data and logic memory (32-bit words) INT_array[5] Lower 16 bits of the 32 bit value INT_array[6] Upper 16 bits of the 32 bit value 1756-L55M16 controllers only—amount of additional free logic memory (32- bit words)INT_array[7] Lower 16 bits of the 32 bit value INT_array[8] Upper 16 bits of the 32 bit value Total size of I/O memory (32-bit words) INT_array[11] Lower 16 bits of the 32 bit value INT_array[12] Upper 16 bits of the 32 bit value Total size of data and logic memory (32-bit words) INT_array[13] Lower 16 bits of the 32 bit value INT_array[14] Upper 16 bits of the 32 bit value 1756-L55M16 controllers only—addit
of the 32 bit value Largest contiguous block of free I/O memory (32-bit words) INT_array[23] Lower 16 bits of the 32 bit value INT_array[24] Upper 16 bits of the 32 bit value Largest contiguous block of free data and logic memory (32-bit words) INT_array[27] Lower 16 bits of the 32 bit value INT_array[28] Upper 16 bits of the 32 bit value22 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 2 Determine Controller Memory Information T o convert the separate INT s into one usable value, use a Copy (COP) instruction. In the following example, the COP instruction produces the 32-bit value that represents the amount of free I/O memory, in 32-bit words.In this operand Specify Which means Source First INT of the 2 element pair (lower 16 bits)Start with the lower 16 bits. Destination DINT tag in which to store the 32-bit value Copy the va lue to the DINT tag. Length 1 Copy 1 times the number of bytes in the Dest ination data type. In this case, the instruction copies 4 bytes (32 bits), which combines the lower and upper 16 bits into one 32-bit value. EXAMPLE Convert INTs to a DINT •Elements 3 of INT_array is the lower 16 bits of the amount of free I/O memory. Element 4 is the upper 16 bits. •Memory_IO_Free is a DINT tag (32 bits) in which to store the value for the amount of free I/O memory. •To copy all 32 bits, specify a Length of 1. This tells the instruction to copy 1 times the size of the Destination (32 bits). This copies both element 3 (16 bits) and
Copy 1 times the number of bytes in the Dest ination data type. In this case, the instruction copies 4 bytes (32 bits), which combines the lower and upper 16 bits into one 32-bit value. EXAMPLE Convert INTs to a DINT •Elements 3 of INT_array is the lower 16 bits of the amount of free I/O memory. Element 4 is the upper 16 bits. •Memory_IO_Free is a DINT tag (32 bits) in which to store the value for the amount of free I/O memory. •To copy all 32 bits, specify a Length of 1. This tells the instruction to copy 1 times the size of the Destination (32 bits). This copies both element 3 (16 bits) and element 4 (16 bits) and places the 32-bit result in Memory_IO_Free.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 23Chapter 3 Controller Logging IntroductionThe controller logging feature provides a way to detect and log changes made to Logix Controllers without adding any auditing software. With controller logging, the controllers: ·detect changes and create logs entries containing information about the changes. ·store the log entries to removable mediafor later review. ·provide programmatic access to log entry counters to provide change detection information remotely. Note s: •The 1769-L3x and 1769-L4x CompactLogix Controllers do not support storing log entries to removable media, and the audit value is not populated. •The Audit Value is not supported in version 19 or earlier. Topic Page Controller Log 24 Controller Log Header 24 Controller Log Entry 25 Entries
source_array of type SINT[12] In this element Enter Which means source_array[0] 5 Get 5 attributes. source_array[1] 0 Null value. source_array[2] 1 Get free memory.source_array[3] 0 Null value. source_array[4] 2 Get total memory. source_array[5] 0 Null value.source_array[6] 5 Get largest contiguous block of additional free logic memory. source_array[7] 0 Null value. source_array[8] 6 Get largest contiguous block of free I/O memory.source_array[9] 0 Null value.source_array[10] 7 Get largest contiguous block of free data and logic memory. source_array[11] 0 Null value. Source Length 12 Write 12 bytes (12 SINTs). Destination INT_array of type INT[29] Communication Path 1, slot_number_of_controllerRockwell Automation Publication 1756-PM015E-EN-P - November 2012 21Determine Controller Memory Information Chapter 2 Choose the Memory Information The MSG instruction returns the following information to INT_array (destination tag of the MSG). Convert INTs to a DINT The MSG instruction returns each memory value as two separate INT s. •The first INT represents the lower 16 bits of the value. •The second INT represents the upper 16 bits of the value.IMPORTANT The controller returns the values in number of 32-bit words. To see a value in bytes, multiple it by 4. If your controller does not divide its memory, then the values show up as I/O memory. For the 1756-L55M16 controller, the MSG instruct ion returns two values for each logic memory category. To determine the free or total logic

·Ta s k p r o p e r ti e s m o d i f i e d ·Controller timeslice modified This counter can be set to a known value by using an SSV instruction. This rung of ladder logic shows how to retrieve the Execution Modification Count by using a GSV instruction. Figure 6 - Retrieve the Execution Modifi cation Count by Using a GSV Instruction This rung of ladder logic shows how to set the Execution Modification Count to a known value. Figure 7 - Set the Execution Modification Count to a Known ValueRockwell Automation Publication 1756-PM015E-EN-P - November 2012 33Controller Logging Chapter 3 A message instruction of message type “CIP Generic” and a service type of “Controller Log Config Execution Set” is used to configure whether the Execution Modification Count includes forces. If it is sent a value of 1, forces will be included in the counter. If it is sent a value of 0, forces will not be included. The rung of ladder logic below shows how to send the message instruction. The configuration dialog box of the message instruction is also shown. Figure 8 - Set the Execution Count Configure Mask Instruction Figure 9 - Set the Execution Count Configure Mask Dialog Box The Source Element should be of data type DINT.34 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging A message instruction is also used to retrieve the current value of this configuration. This message uses a message type of “CIP Generic” and a service type of “Controller Log Config
to the CompactFlash card. This counter value is available via a GSV instruction, and can range from 0…100, the maximum number of entries that the controller can buffer. This rung of ladder logic shows how to retrieve the Unsaved Entry Count by using a Get System Value (GSV) instruction. Figure 5 - Retrieve the Unsaved Entry Co unt Using a Get System Value Instruction32 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging Execution Modification Count The Execution Modification Count tracks the number of changes that occur that can change the behavior of a running controller. This counter can be configured to include or exclude force changes. The events that will cause the Execution Modification Count to increment include the following: ·Online edits tested or assembled ·Forces enabled or disabled (if so configured) ·Program properties modified ·Ta s k p r o p e r ti e s m o d i f i e d ·Controller timeslice modified This counter can be set to a known value by using an SSV instruction. This rung of ladder logic shows how to retrieve the Execution Modification Count by using a GSV instruction. Figure 6 - Retrieve the Execution Modifi cation Count by Using a GSV Instruction This rung of ladder logic shows how to set the Execution Modification Count to a known value. Figure 7 - Set the Execution Modification Count to a Known ValueRockwell Automation Publication 1756-PM015E-EN-P - November 2012 33Controller Logging Chapter 3 A message
(GSV) instruction. Total Entry Count by Using a Get System Value (GSV) InstructionCounter Name Desc ription Access Total Entry Count Number of entries added to the log since the last firmware update.GSV/SSV Unsaved Entry Count Number of entries in controller RAM not yet written to the CompactFlash card.GSV Modify Execution Count Count that specifically tracks modifications that can change behavior of a runnin g controller. A subset of entries increment this countGSV/SSVRockwell Automation Publication 1756-PM015E-EN-P - November 2012 31Controller Logging Chapter 3 This rung of ladder logic shows how to set the T otal Entry Count to a known value (in this example, 0) by using an SSV instruction. Figure 4 - Set the Total Entry Count to a Known Value Instruction Unsaved Entry Count The Unsaved Entry Count is the number of log entries that are in controller memory but have not yet been stored to the CompactFlash card. This counter value is available via a GSV instruction, and can range from 0…100, the maximum number of entries that the controller can buffer. This rung of ladder logic shows how to retrieve the Unsaved Entry Count by using a Get System Value (GSV) instruction. Figure 5 - Retrieve the Unsaved Entry Co unt Using a Get System Value Instruction32 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging Execution Modification Count The Execution Modification Count tracks the number of changes that occur that can change the behavior of
the synchronization between the controller and the projec t file that was downloaded to it. Tip: Correlation Affected can include detection of a component being created, deleted, or modified, or logic was modified. Including the Correlation Affected event will update the audit value for these types of changes, even if other similar events (such as "Online edits modified controller program" or "Task properties modified") are masked. 33 Safety signature delete inhibited in Run mode 34 Safety signature delete allowed in Run modeBit number Event description50 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 4 Change Detection Change Detection in Logix Designer ApplicationVersion 20 and later of the application provides the Security tab in the Controller Properties dialog that allows users to configure Change Detection. T o edit the Changes T o Detect field you can type a new value. T o select the events to monitor for changes from a list, click the Configure button to open the Configure Changes to Detect dialog box. For additional information on how to configure the settings on the Security tab, refer to Logix5000 Security Programming Manual, publication 1756-PM016 or the the online help for the Logix Designer application. TIP To configure Change Detection programmatically use SSV, GSV or MSG instructions. See Controller Change Detection on page 46Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 51Chapter 5 Access Status Information

Slice -During unused System Overhead Time Slice radio buttons Removable media removed •Time Stamp •Entry Description: Removable media removed •UserName: Local •Workstation Name: None •FactoryTalk Login Id: None •Extended Information: None Removable media inserted •Time Stamp •Entry Description: Removable media inserted •UserName: Local •Workstation Name: None •FactoryTalk Login Id: None •Extended Information: None Safety signature create •Time Stamp •Entry Description: Safety signature create •UserName •Workstation Name •FactoryTalk Login Id •Extended Information: Signature number: 0xYYYYYYYY (hex format) Safety signature delete •Time Stamp •Entry Description: Safety signature delete •Us erName•Workstation Name •FactoryTalk Login Id •Extended Information: Signature number: 0xYYYYYYYY (hex format) Safety lock •Time Stamp •Entry Description: Safety lock •UserName •Workstation Name •FactoryTalk Login Id •Extended Information: NoneEntry Information LoggedRockwell Automation Publication 1756-PM015E-EN-P - November 2012 43Controller Logging Chapter 3 Safety unlocked •Time Stamp •Entry Description: Safety unlock •UserName •Workstation Name •FactoryTalk Login Id •Extended Information: None Custom entry •Time Stamp •Entry Description: <User supplie d string> maximum 40 characters •UserName •Workstation Name •FactoryTalk Login Id •Extended Information: <User supplied info>, maximum 82 characters Constant tag data changed •Time Stamp •Entry Description: Constant tag data changed
or when Changes to Detect is reconfigured. These types of events are not included in the Changes T o Detect mask. The Changes T oDetect mask can be configured programatically using SSV , GSV and MSG instructions.Attribute Name Description Access AuditValue The AuditValue is a unique value that is generated when a project is downloaded to the controller or loaded from removable storage. When a chan ge is detected this value is updated. To specify which changes are monitored, use the ChangesToDetect attribute.GSV ChangesToDetect Used to specify which changes are monitored. When a monitored change occurs, the Audit Value is updated. GSV/SSV IMPORTANT Change detection is unavailable on the RSLogix Emulate 5000 Controller and the SoftLogix5860 Controller. TIP The Audit Value updates when the controller is online. TIP You can use the Security tab in the Contro ller Properties dialog box to configure Change Detection if you are using version 20 or later of the application. See Change Detection in Logix Designer Application on page 50 .Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 47Change Detection Chapter 4 Use the Set System V alue (SSV) instruction to write to the Changes T o Detect attribute and the Get System V alue (GSV) instruction to read the Changes T o Detect attribute programmatically. The Message Configuration dialog can be used to read or write to the Changes T oDetect attribute through CIP Generic Messages. For complete information on how to access
use a connection) Requested packet interval (RPI)The RPI specifies the period at which data updates over a connection. For example, an input module sends data to a controller at the RPI that you assign to the module. •Typically, you configure an RPI in milliseconds (ms). The range is 0.2 ms (200 microseconds)…750 ms. •If a ControlNet network connects the devices, the RPI reserves a slot in the stream of data flowing across the ControlNet network. The timing of this slot may not coinci de with the exact value of the RPI, but the control system guarantees that the data transfers at least as often as the RPI. Path The path describes the route that a conn ection takes to get to the destination. Typically, you automatically define the path for a connection when you add the devices to the I/O Configuration folder of the controller.10 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Inhibit a ConnectionIn some situations, such as when initially commissioning a system, it is useful to disable portions of a control system and enable them as you wire the control system. The controller lets you inhibit individual modules or groups of modules, which prevents the controller from trying to communicate with the modules. When you configure an I/O module, it defaults to being not inhibited. Y ou can change an individual module’s properties to inhibit a module. When you inhibit a communication bridge module, the controller shuts down the connections to the
·Ta s k p r o p e r ti e s m o d i f i e d ·Controller timeslice modified This counter can be set to a known value by using an SSV instruction. This rung of ladder logic shows how to retrieve the Execution Modification Count by using a GSV instruction. Figure 6 - Retrieve the Execution Modifi cation Count by Using a GSV Instruction This rung of ladder logic shows how to set the Execution Modification Count to a known value. Figure 7 - Set the Execution Modification Count to a Known ValueRockwell Automation Publication 1756-PM015E-EN-P - November 2012 33Controller Logging Chapter 3 A message instruction of message type “CIP Generic” and a service type of “Controller Log Config Execution Set” is used to configure whether the Execution Modification Count includes forces. If it is sent a value of 1, forces will be included in the counter. If it is sent a value of 0, forces will not be included. The rung of ladder logic below shows how to send the message instruction. The configuration dialog box of the message instruction is also shown. Figure 8 - Set the Execution Count Configure Mask Instruction Figure 9 - Set the Execution Count Configure Mask Dialog Box The Source Element should be of data type DINT.34 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging A message instruction is also used to retrieve the current value of this configuration. This message uses a message type of “CIP Generic” and a service type of “Controller Log Config

to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save “Set” Ladder Instruction Automatic Save “Set” Configuration Dialog BoxTIP Some Logix controllers support additional types of removable media that can be used to write the controller log entries. Refer to the Logix controller documentation for information regarding the type of removable media your Logix controller supports.28 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging The current state of the automatic write setting can be retrieved by using a message instruction with a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Get” . A rung of ladder logic that gets this value and the configuration of the message instruction are shown below. Automatic Save “Get” Ladder Instruction Automatic Save “Get” Configuration Dialog BoxRockwell Automation Publication 1756-PM015E-EN-P - November 2012 29Controller Logging Chapter
entries to the removable media when its internal buffer becomes 80% full. Additionally, the controller can be commanded to write the buffered entries to the removable media with a message instruction. This procedure is detailed below. Once a log entry is written to the removable media, it is removed from the buffer. If the removable media is not present, is full, or if the controller is not configured to automatically write buffered entries to the removable media, and the internal buffer becomes full, entries will continue to be saved in the buffer in a circular fashion. As new entries are stored, the oldest entries will be discarded. Controller Log Files and the Removable Media When written to the removable media, controller logs are stored in plain text files in the T ab Separated Value (TSV) format. Each time the controller writes entries to the CompactFlash card, the entries are appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012
appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 27Controller Logging Chapter 3 Writing the Controller Log to the CompactFlash Card The controller log can be written to the CompactFlash card either automatically or on demand. Automatic Save When the controller's internal log entry buffer becomes 80% full, it can automatically write the buffered entries to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save
software. With controller logging, the controllers: ·detect changes and create logs entries containing information about the changes. ·store the log entries to removable mediafor later review. ·provide programmatic access to log entry counters to provide change detection information remotely. Note s: •The 1769-L3x and 1769-L4x CompactLogix Controllers do not support storing log entries to removable media, and the audit value is not populated. •The Audit Value is not supported in version 19 or earlier. Topic Page Controller Log 24 Controller Log Header 24 Controller Log Entry 25 Entries Captured in the Controller Log 25 Controller Log Buffer 26 Controller Log Files and the Removable Media 26 Writing the Controller Log to the CompactFlash Card 27 Controller Logging Counters 30 Log File Storage 35 Log File Storage 35 Log File Format 36 Create Custom Log Entries 37 Sample Ladder Logic File 38 Controller Log Events 3924 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging Controller LogA controller log is a record of interactions that have occurred in the controller due to physical conditions like keyswitch and removable media, fault conditions, and programming changes configured in the application. Up to 100 log entries are buffered within the controller's memory. The controller can save these buffered entries to the removable media by using a message instruction. Additionally, the controller can be configured to automatically write

- November 2012 19Determine Controller Memory Information Chapter 2 View Run-time Memory InformationWhen online with a controller, the Memory tab shows the actual memory usage of the controller. While the controller is running, it uses additional memory for communication. The amount of memory the controller needs varies depending on the state of the communication. The Memory tab of the controller includes a Max Used entry for each type of memory. The Max Used values show the peak of memory usage as communication occurs. Follow these steps to reset memory usage. 1.Start the Logix Designer application and open a controller project. 2.On the Online toolbar (above the Controller Organizer), click the controller properties icon. The Controller Properties dialog box appears. 3.Select the Memory tab. 4.Click Reset All Max to reset values. 5.Click OK.20 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 2 Determine Controller Memory Information Write Logic to Get Memory InformationThere are several ways to use logic to get memory information: •Get Memory Information from the Controller . •Choose the Memory Information . •Convert INT s to a DINT . Get Memory Information from the Controller T o get memory information from the controller, execute a Message (MSG) instruction that is configured as follows. On this tab For this item Type or select Which means Configuration Message Type CIP Generic Execute a Control and Information Protocol command. Service Type Custom
- November 2012Chapter 2 Determine Controller Memory Information Estimate Memory Information OfflineT o estimate how much controller memory your project requires, use the Memory tab of the Controller Properties dialog box. For each of the memory areas of your controller, the dialog box lets you estimate number of bytes of: •free (unused) memory. •used memory. •largest free contiguous block of memory. Follow these steps to estimate the controller memory. 1.Start the Logix Designer application and open a controller project. 2.On the Online toolbar (above the Controller Organizer), click the controller properties icon. The Controller Properties dialog box appears. 3.Select the Memory tab. 4.In the ‘Estimated Data and Logic Memory section’ , view the memory information since the last estimate. 5.Click Estimate to re-estimate the amount of controller memory.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 19Determine Controller Memory Information Chapter 2 View Run-time Memory InformationWhen online with a controller, the Memory tab shows the actual memory usage of the controller. While the controller is running, it uses additional memory for communication. The amount of memory the controller needs varies depending on the state of the communication. The Memory tab of the controller includes a Max Used entry for each type of memory. The Max Used values show the peak of memory usage as communication occurs. Follow these steps to reset memory usage. 1.Start the Logix
may be divided into several areas. If you have this controller Then it stores this In this memory 1756 ControlLogix 1756 GuardLogix 1768 CompactLogix1768 Compact GuardLogixI/O tags I/O memory Produced / Consumed tags Communication via Message (MSG) instructions Communication with workstations Communication with polled (OPC/DDE ) tags that use RSLinx software (1) Tags other than I/O, produced, or consumed tags Data and logic memory(2) Logic routinesCommunication with polled (OPC/DDE ) tags that use RSLinx software (1) 1769-L2 x CompactLogix 1769-L3 x CompactLogix FlexLogix DriveLogix SoftLogix5800These controllers do not divide their memory. They store all elements in one common memory area. (1) To communicate with polled tags, the contro ller uses both I/O data and logic memory. (2) 1756-L55M16 controllers have an additional memory section for logic.18 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 2 Determine Controller Memory Information Estimate Memory Information OfflineT o estimate how much controller memory your project requires, use the Memory tab of the Controller Properties dialog box. For each of the memory areas of your controller, the dialog box lets you estimate number of bytes of: •free (unused) memory. •used memory. •largest free contiguous block of memory. Follow these steps to estimate the controller memory. 1.Start the Logix Designer application and open a controller project. 2.On the Online toolbar (above the Controller Organizer),
entries to the removable media when its internal buffer becomes 80% full. Additionally, the controller can be commanded to write the buffered entries to the removable media with a message instruction. This procedure is detailed below. Once a log entry is written to the removable media, it is removed from the buffer. If the removable media is not present, is full, or if the controller is not configured to automatically write buffered entries to the removable media, and the internal buffer becomes full, entries will continue to be saved in the buffer in a circular fashion. As new entries are stored, the oldest entries will be discarded. Controller Log Files and the Removable Media When written to the removable media, controller logs are stored in plain text files in the T ab Separated Value (TSV) format. Each time the controller writes entries to the CompactFlash card, the entries are appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012

should be of type DINT.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 35Controller Logging Chapter 3 Log File Storage When a log file is written to the CompactFlash card, it will be stored at “\Logix\XXXXXXXX\Logs\VYY_ZZ” , where XXXXXXXX is the eight-digit serial number of the controller and YY_ZZ is the version number of the firmware (major_minor revision). Figure 12 - Log File Location The file will be called ControllerLog_yyy.txt where yyy is a sequential number from 000…999. The log file will be appended to until it reaches a size greater than 1 MB. At that point, the next write of the controller log causes a new file to be created with the next sequence number. Once there are 1000 files larger than 1 MB no more logs will be created. The controller will, however, search for the file name with the smallest possible sequence number that it can create or write to. For example, if a user deletes files 001…100 but leaves the rest, the controller will start creating logs again starting at a sequence number of 001. If there are already 1000 log files and a user deletes log entries out of file 005, the controller will write the next log entries to that file. The controller starts at 000 and looks for the first file that does not exist or is less than 1 MB in size. Each time the controller opens a log file for writing, it creates a back-up file that is a copy of the log file before the write. This file is called Backup.txt. The backup is overwritten every time
appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 27Controller Logging Chapter 3 Writing the Controller Log to the CompactFlash Card The controller log can be written to the CompactFlash card either automatically or on demand. Automatic Save When the controller's internal log entry buffer becomes 80% full, it can automatically write the buffered entries to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save
entries to the removable media when its internal buffer becomes 80% full. Additionally, the controller can be commanded to write the buffered entries to the removable media with a message instruction. This procedure is detailed below. Once a log entry is written to the removable media, it is removed from the buffer. If the removable media is not present, is full, or if the controller is not configured to automatically write buffered entries to the removable media, and the internal buffer becomes full, entries will continue to be saved in the buffer in a circular fashion. As new entries are stored, the oldest entries will be discarded. Controller Log Files and the Removable Media When written to the removable media, controller logs are stored in plain text files in the T ab Separated Value (TSV) format. Each time the controller writes entries to the CompactFlash card, the entries are appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012
Logging Log File Format The following table lists the information that is contained in the controller log file. The log file is formatted in UTF-16, and has a file extension of .txt. Double- clicking the file will open it in Notepad on most systems. However, since it is formatted as T ab Separated Values (TSV), it can also be opened in a spreadsheet application, like Microsoft Excel. The following screen is an example of the log file viewed in Notepad. Figure 13 - Controller Log File Viewed in Notepad The following screen is an example of the log file viewed in Excel. Figure 14 - Controller Log File Viewed in ExcelContent Description Format Time Controller's GMT time. MMM-DD-YY HH:MM:SS 24-hour time Entry Entry Description - Defined in Entry List section. User Name User's login ID. Windows domain name with display name if available. Workstation Name User's computer name. Computer Name FactoryTalk ID User's FactoryTalk login ID. Alphanumeric characters Extended Information Entry specific information. Defined in Entry List section. Change Detection Audit Value(1) (1) Version 20 or later, see Change Detection on page 45 .Changes to the Audit value TIP For version 20 andlater, a column for the Audit Value changes is included in the log file.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 37Controller Logging Chapter 3 Create Custom Log Entries Custom entries can be added to the controller log by using a message instruction. The message instruction uses a message

or when Changes to Detect is reconfigured. These types of events are not included in the Changes T o Detect mask. The Changes T oDetect mask can be configured programatically using SSV , GSV and MSG instructions.Attribute Name Description Access AuditValue The AuditValue is a unique value that is generated when a project is downloaded to the controller or loaded from removable storage. When a chan ge is detected this value is updated. To specify which changes are monitored, use the ChangesToDetect attribute.GSV ChangesToDetect Used to specify which changes are monitored. When a monitored change occurs, the Audit Value is updated. GSV/SSV IMPORTANT Change detection is unavailable on the RSLogix Emulate 5000 Controller and the SoftLogix5860 Controller. TIP The Audit Value updates when the controller is online. TIP You can use the Security tab in the Contro ller Properties dialog box to configure Change Detection if you are using version 20 or later of the application. See Change Detection in Logix Designer Application on page 50 .Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 47Change Detection Chapter 4 Use the Set System V alue (SSV) instruction to write to the Changes T o Detect attribute and the Get System V alue (GSV) instruction to read the Changes T o Detect attribute programmatically. The Message Configuration dialog can be used to read or write to the Changes T oDetect attribute through CIP Generic Messages. For complete information on how to access
- November 2012Chapter 4 Change Detection Controller Change Detection Two controller attributes are used to support the Change Detection feature in version 20 and later. ChangesToDetect The Changes T oDetect mask is a 64-bit value. Each bit of the Changes T oDetect mask corresponds to a particular event that could cause the Audit V alue to change. See ChangesT oDetect Format on page 48 . If a bit set to a value of 1, the corresponding event is monitored for changes and when a change for that event occurs the AuditV alue updates. If a bit is set to a value of 2, the corresponding event is not monitored and has no affect on the Audit V alue. The default Audit V alue of: 0xFFFFFFFFFFFFFFFF indicates that all events are monitored. There are some events that will always update the audit value when they occur. For example, the audit value changes when a project is downloaded to the controller, or when Changes to Detect is reconfigured. These types of events are not included in the Changes T o Detect mask. The Changes T oDetect mask can be configured programatically using SSV , GSV and MSG instructions.Attribute Name Description Access AuditValue The AuditValue is a unique value that is generated when a project is downloaded to the controller or loaded from removable storage. When a chan ge is detected this value is updated. To specify which changes are monitored, use the ChangesToDetect attribute.GSV ChangesToDetect Used to specify which changes are monitored. When a monitored
Change Detection if you are using version 20 or later of the application. See Change Detection in Logix Designer Application on page 50 .Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 47Change Detection Chapter 4 Use the Set System V alue (SSV) instruction to write to the Changes T o Detect attribute and the Get System V alue (GSV) instruction to read the Changes T o Detect attribute programmatically. The Message Configuration dialog can be used to read or write to the Changes T oDetect attribute through CIP Generic Messages. For complete information on how to access data using an MSG instruction, refer to Logix5000 Controllers Messages Programming Manual, publication 1756-UM012. Use these settings to configure the Changes T oDetect attribute using the Message Configuration dialogTIP We recommend using the DINT[2] data type to avoid limitations when working with LINT data types in Rockwell Automation controllers. If you want to: In this property Type or select Set controller events monitored for changesMessage Type CIP Generic Service Type Changes to Detect Set Source tag_name of type DINT[2] or LINT 1 This tag represents a bit mask of the changes monitored for the controller. Destination leave blank Get controller events monitored for changesMessage Type CIP Generic Service Type Changes to Detect Get Source leave blank Destination tag_name of type DINT[2] or LINT 1 This tag represents a bit mask of the changes monitored for the controller.48 Rockwell
can type a new value. T o select the events to monitor for changes from a list, click the Configure button to open the Configure Changes to Detect dialog box. For additional information on how to configure the settings on the Security tab, refer to Logix5000 Security Programming Manual, publication 1756-PM016 or the the online help for the Logix Designer application. TIP To configure Change Detection programmatically use SSV, GSV or MSG instructions. See Controller Change Detection on page 46Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 51Chapter 5 Access Status Information Introduction The controller supports status keywords you can use in your logic to monitor specific events. •The status keywords are not case sensitive. •Because the status flags can change so quickly, the Logix Designer application does not display the status of the flags. For example, even when a status flag is set, an instruction that references that flag is not highlighted. •Y ou cannot define a tag alias to a keyword. Y ou can use these key words. Status of S:FS When the Project Has an SFCThe state of S:FS depends on the status of the SFC. •If you use S:FS in an action of a sequential function chart (SFC), S:FS is set (on) for one scan each time the step goes active. S:FS = step_name .FS. •If the SFC calls a routine, S:FS is set (on) for one scan each time the step that calls the routine goes active. S:FS = step_name .FS.To determine if Use The value you are storing cannot fit into

appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 27Controller Logging Chapter 3 Writing the Controller Log to the CompactFlash Card The controller log can be written to the CompactFlash card either automatically or on demand. Automatic Save When the controller's internal log entry buffer becomes 80% full, it can automatically write the buffered entries to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save
ID User's FactoryTalk login ID. Alphanumeric characters Extended Information Entry specific information. Defined in Entry List section. Change Detection Audit Value(1) (1) Version 20 or later, see Change Detection on page 45 .Changes to the Audit value TIP For version 20 andlater, a column for the Audit Value changes is included in the log file.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 37Controller Logging Chapter 3 Create Custom Log Entries Custom entries can be added to the controller log by using a message instruction. The message instruction uses a message type of “CIP Generic” and a service type of “Controller Log Add Entry” . The source element of this message should be a tag of a user-defined data type. The user-defined data type should contain two string members. The first string will be put in the log entry's Description field. The second string will be put in the log entry's Extended Information field. The rung of ladder logic below shows how to send the message instruction. The Configuration dialog box of the message instruction is also shown, as is the definition of the user-defined data type used for the source element. Figure 15 - Send the Message Instruction Figure 16 - Controller Log Add Entry Dialog Box38 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging Figure 17 - Example Data Type Dialog Box Sample Ladder Logic File In the Logix Designer application, there is a controller logging sample
Logging Log File Format The following table lists the information that is contained in the controller log file. The log file is formatted in UTF-16, and has a file extension of .txt. Double- clicking the file will open it in Notepad on most systems. However, since it is formatted as T ab Separated Values (TSV), it can also be opened in a spreadsheet application, like Microsoft Excel. The following screen is an example of the log file viewed in Notepad. Figure 13 - Controller Log File Viewed in Notepad The following screen is an example of the log file viewed in Excel. Figure 14 - Controller Log File Viewed in ExcelContent Description Format Time Controller's GMT time. MMM-DD-YY HH:MM:SS 24-hour time Entry Entry Description - Defined in Entry List section. User Name User's login ID. Windows domain name with display name if available. Workstation Name User's computer name. Computer Name FactoryTalk ID User's FactoryTalk login ID. Alphanumeric characters Extended Information Entry specific information. Defined in Entry List section. Change Detection Audit Value(1) (1) Version 20 or later, see Change Detection on page 45 .Changes to the Audit value TIP For version 20 andlater, a column for the Audit Value changes is included in the log file.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 37Controller Logging Chapter 3 Create Custom Log Entries Custom entries can be added to the controller log by using a message instruction. The message instruction uses a message
to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save “Set” Ladder Instruction Automatic Save “Set” Configuration Dialog BoxTIP Some Logix controllers support additional types of removable media that can be used to write the controller log entries. Refer to the Logix controller documentation for information regarding the type of removable media your Logix controller supports.28 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging The current state of the automatic write setting can be retrieved by using a message instruction with a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Get” . A rung of ladder logic that gets this value and the configuration of the message instruction are shown below. Automatic Save “Get” Ladder Instruction Automatic Save “Get” Configuration Dialog BoxRockwell Automation Publication 1756-PM015E-EN-P - November 2012 29Controller Logging Chapter

use a Get System Value (GSV) instruction to monitor the MODULE object for either the controller or a specific module. If the connection times out, continue operation without invoking a major fault on the controller. ! If you want to Get this attribute Data Type Description Determine if communication has timed out with any deviceLEDStatus INT For efficiency, use a DINT as the destination data type.Specifies the current state of the I/O status indicator on the front of the controller. You do not enter an instance name with this attribute. This attribute applies to the entire collection of modules. Value Meaning 0 Status Indicator off: No MODULE objects are configured for the controller (there are no modules in the I/O Conf iguration section of the controller organizer). 1 Flashing red: None of the MODULE objects are Running. 2 Flashing green: At least one MODULE object is not Running. 3 Solid green: All the Module objects are Running. Determine if communication has timed out with a specific deviceFaultCode INT For efficiency, use a DINT as the destination data type.A number that identifies a module fault, if one occurs. In the Instance Name, choose the device whose connection you want to monitor. Make sure to assign a name to the device in the I/O Configuration folder of the project.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 15Connections Chapter 1 If Module_Status is any value other than 4, the controller is not communicating with the module. See the
can type a new value. T o select the events to monitor for changes from a list, click the Configure button to open the Configure Changes to Detect dialog box. For additional information on how to configure the settings on the Security tab, refer to Logix5000 Security Programming Manual, publication 1756-PM016 or the the online help for the Logix Designer application. TIP To configure Change Detection programmatically use SSV, GSV or MSG instructions. See Controller Change Detection on page 46Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 51Chapter 5 Access Status Information Introduction The controller supports status keywords you can use in your logic to monitor specific events. •The status keywords are not case sensitive. •Because the status flags can change so quickly, the Logix Designer application does not display the status of the flags. For example, even when a status flag is set, an instruction that references that flag is not highlighted. •Y ou cannot define a tag alias to a keyword. Y ou can use these key words. Status of S:FS When the Project Has an SFCThe state of S:FS depends on the status of the SFC. •If you use S:FS in an action of a sequential function chart (SFC), S:FS is set (on) for one scan each time the step goes active. S:FS = step_name .FS. •If the SFC calls a routine, S:FS is set (on) for one scan each time the step that calls the routine goes active. S:FS = step_name .FS.To determine if Use The value you are storing cannot fit into
or when Changes to Detect is reconfigured. These types of events are not included in the Changes T o Detect mask. The Changes T oDetect mask can be configured programatically using SSV , GSV and MSG instructions.Attribute Name Description Access AuditValue The AuditValue is a unique value that is generated when a project is downloaded to the controller or loaded from removable storage. When a chan ge is detected this value is updated. To specify which changes are monitored, use the ChangesToDetect attribute.GSV ChangesToDetect Used to specify which changes are monitored. When a monitored change occurs, the Audit Value is updated. GSV/SSV IMPORTANT Change detection is unavailable on the RSLogix Emulate 5000 Controller and the SoftLogix5860 Controller. TIP The Audit Value updates when the controller is online. TIP You can use the Security tab in the Contro ller Properties dialog box to configure Change Detection if you are using version 20 or later of the application. See Change Detection in Logix Designer Application on page 50 .Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 47Change Detection Chapter 4 Use the Set System V alue (SSV) instruction to write to the Changes T o Detect attribute and the Get System V alue (GSV) instruction to read the Changes T o Detect attribute programmatically. The Message Configuration dialog can be used to read or write to the Changes T oDetect attribute through CIP Generic Messages. For complete information on how to access
the synchronization between the controller and the projec t file that was downloaded to it. Tip: Correlation Affected can include detection of a component being created, deleted, or modified, or logic was modified. Including the Correlation Affected event will update the audit value for these types of changes, even if other similar events (such as "Online edits modified controller program" or "Task properties modified") are masked. 33 Safety signature delete inhibited in Run mode 34 Safety signature delete allowed in Run modeBit number Event description50 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 4 Change Detection Change Detection in Logix Designer ApplicationVersion 20 and later of the application provides the Security tab in the Controller Properties dialog that allows users to configure Change Detection. T o edit the Changes T o Detect field you can type a new value. T o select the events to monitor for changes from a list, click the Configure button to open the Configure Changes to Detect dialog box. For additional information on how to configure the settings on the Security tab, refer to Logix5000 Security Programming Manual, publication 1756-PM016 or the the online help for the Logix Designer application. TIP To configure Change Detection programmatically use SSV, GSV or MSG instructions. See Controller Change Detection on page 46Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 51Chapter 5 Access Status Information

to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save “Set” Ladder Instruction Automatic Save “Set” Configuration Dialog BoxTIP Some Logix controllers support additional types of removable media that can be used to write the controller log entries. Refer to the Logix controller documentation for information regarding the type of removable media your Logix controller supports.28 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging The current state of the automatic write setting can be retrieved by using a message instruction with a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Get” . A rung of ladder logic that gets this value and the configuration of the message instruction are shown below. Automatic Save “Get” Ladder Instruction Automatic Save “Get” Configuration Dialog BoxRockwell Automation Publication 1756-PM015E-EN-P - November 2012 29Controller Logging Chapter
If the Controller Fault Handler does not clear the fault, then the controller shuts down. When you check the ‘Major Fault On Controller…Run Mode’ box, the controller: •must be connected to the module during the Program transition to Run mode. During the Program to Run mode transition, there can be a 20-second delay. During this delay, the controller makes one attempt to connect to a module. If the ‘Major Fault On Controller…Run Mode’ box is selected, and you cannot connect during the 20-second delay, a fault occurs because at least one required connection is not established before going to Run mode. This is a 3/23 type fault code. This fault can occur in large systems with networked I/O. •will fault if the connection is dropped while in Run mode. A required I/O module connection failed, creating a 3/16 type fault. For fault codes, see the Logix5000 Controllers Major and Minor Faults Programming Manual, publication 1756-PM014. If the connection times out, produce a major fault in the controller.14 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Monitor the Health of a Module If you do not configure the major fault to occur, you should monitor the module status. If a module loses its connection to the controller, outputs go to their configured faulted state. The controller and other I/O modules continue to operate based on old data from the module. If communication with a module times out, the controller produces these warnings: ·The I/O
complete information on how to access data using an MSG instruction, refer to Logix5000 Controllers Messages Programming Manual, publication 1756-UM012. Use these settings to read the Audit V alue attribute using the Message Configuration. ChangesToDetect FormatIf you want to: In this property Type or select Get AuditValue Message Type CIP Generic Service Type Audit Value Get Source leave blank Destination tag_name of type DINT[2] or LINT 1 This tag contains the AuditValue for the controller. Bit number Event description 0 Project stored to removable media 1 Online edits modified controller program 2 Transaction committed •Indicates that a batch of one or more ch anges has been applied to the controller. For example, this might happen when a routine is imported online or when a module configuration is changed online. 3 SFC forces enabled 4 SFC forces disabled 5 SFC forces removed 6 SFC element force value changed 7 I/O forces enabled 8 I/O forces disabled 9 I/O forces removedRockwell Automation Publication 1756-PM015E-EN-P - November 2012 49Change Detection Chapter 4 10 I/O forces modified 11 Firmware update attempted12 Firmware update from removable media attempted 13 Remote mode change 14 Keyswitch mode change 15 A major fault occurred 16 All major faults cleared 17 All major faults cleared through keyswitch 18 Task properties modified 19 Program properties modified 20 Controller time slice modified 21 Removable media removed 22 Removable media inserted 23 Safety signature
software. With controller logging, the controllers: ·detect changes and create logs entries containing information about the changes. ·store the log entries to removable mediafor later review. ·provide programmatic access to log entry counters to provide change detection information remotely. Note s: •The 1769-L3x and 1769-L4x CompactLogix Controllers do not support storing log entries to removable media, and the audit value is not populated. •The Audit Value is not supported in version 19 or earlier. Topic Page Controller Log 24 Controller Log Header 24 Controller Log Entry 25 Entries Captured in the Controller Log 25 Controller Log Buffer 26 Controller Log Files and the Removable Media 26 Writing the Controller Log to the CompactFlash Card 27 Controller Logging Counters 30 Log File Storage 35 Log File Storage 35 Log File Format 36 Create Custom Log Entries 37 Sample Ladder Logic File 38 Controller Log Events 3924 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging Controller LogA controller log is a record of interactions that have occurred in the controller due to physical conditions like keyswitch and removable media, fault conditions, and programming changes configured in the application. Up to 100 log entries are buffered within the controller's memory. The controller can save these buffered entries to the removable media by using a message instruction. Additionally, the controller can be configured to automatically write

or when Changes to Detect is reconfigured. These types of events are not included in the Changes T o Detect mask. The Changes T oDetect mask can be configured programatically using SSV , GSV and MSG instructions.Attribute Name Description Access AuditValue The AuditValue is a unique value that is generated when a project is downloaded to the controller or loaded from removable storage. When a chan ge is detected this value is updated. To specify which changes are monitored, use the ChangesToDetect attribute.GSV ChangesToDetect Used to specify which changes are monitored. When a monitored change occurs, the Audit Value is updated. GSV/SSV IMPORTANT Change detection is unavailable on the RSLogix Emulate 5000 Controller and the SoftLogix5860 Controller. TIP The Audit Value updates when the controller is online. TIP You can use the Security tab in the Contro ller Properties dialog box to configure Change Detection if you are using version 20 or later of the application. See Change Detection in Logix Designer Application on page 50 .Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 47Change Detection Chapter 4 Use the Set System V alue (SSV) instruction to write to the Changes T o Detect attribute and the Get System V alue (GSV) instruction to read the Changes T o Detect attribute programmatically. The Message Configuration dialog can be used to read or write to the Changes T oDetect attribute through CIP Generic Messages. For complete information on how to access
- November 2012Chapter 4 Change Detection Controller Change Detection Two controller attributes are used to support the Change Detection feature in version 20 and later. ChangesToDetect The Changes T oDetect mask is a 64-bit value. Each bit of the Changes T oDetect mask corresponds to a particular event that could cause the Audit V alue to change. See ChangesT oDetect Format on page 48 . If a bit set to a value of 1, the corresponding event is monitored for changes and when a change for that event occurs the AuditV alue updates. If a bit is set to a value of 2, the corresponding event is not monitored and has no affect on the Audit V alue. The default Audit V alue of: 0xFFFFFFFFFFFFFFFF indicates that all events are monitored. There are some events that will always update the audit value when they occur. For example, the audit value changes when a project is downloaded to the controller, or when Changes to Detect is reconfigured. These types of events are not included in the Changes T o Detect mask. The Changes T oDetect mask can be configured programatically using SSV , GSV and MSG instructions.Attribute Name Description Access AuditValue The AuditValue is a unique value that is generated when a project is downloaded to the controller or loaded from removable storage. When a chan ge is detected this value is updated. To specify which changes are monitored, use the ChangesToDetect attribute.GSV ChangesToDetect Used to specify which changes are monitored. When a monitored
the synchronization between the controller and the projec t file that was downloaded to it. Tip: Correlation Affected can include detection of a component being created, deleted, or modified, or logic was modified. Including the Correlation Affected event will update the audit value for these types of changes, even if other similar events (such as "Online edits modified controller program" or "Task properties modified") are masked. 33 Safety signature delete inhibited in Run mode 34 Safety signature delete allowed in Run modeBit number Event description50 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 4 Change Detection Change Detection in Logix Designer ApplicationVersion 20 and later of the application provides the Security tab in the Controller Properties dialog that allows users to configure Change Detection. T o edit the Changes T o Detect field you can type a new value. T o select the events to monitor for changes from a list, click the Configure button to open the Configure Changes to Detect dialog box. For additional information on how to configure the settings on the Security tab, refer to Logix5000 Security Programming Manual, publication 1756-PM016 or the the online help for the Logix Designer application. TIP To configure Change Detection programmatically use SSV, GSV or MSG instructions. See Controller Change Detection on page 46Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 51Chapter 5 Access Status Information
complete information on how to access data using an MSG instruction, refer to Logix5000 Controllers Messages Programming Manual, publication 1756-UM012. Use these settings to read the Audit V alue attribute using the Message Configuration. ChangesToDetect FormatIf you want to: In this property Type or select Get AuditValue Message Type CIP Generic Service Type Audit Value Get Source leave blank Destination tag_name of type DINT[2] or LINT 1 This tag contains the AuditValue for the controller. Bit number Event description 0 Project stored to removable media 1 Online edits modified controller program 2 Transaction committed •Indicates that a batch of one or more ch anges has been applied to the controller. For example, this might happen when a routine is imported online or when a module configuration is changed online. 3 SFC forces enabled 4 SFC forces disabled 5 SFC forces removed 6 SFC element force value changed 7 I/O forces enabled 8 I/O forces disabled 9 I/O forces removedRockwell Automation Publication 1756-PM015E-EN-P - November 2012 49Change Detection Chapter 4 10 I/O forces modified 11 Firmware update attempted12 Firmware update from removable media attempted 13 Remote mode change 14 Keyswitch mode change 15 A major fault occurred 16 All major faults cleared 17 All major faults cleared through keyswitch 18 Task properties modified 19 Program properties modified 20 Controller time slice modified 21 Removable media removed 22 Removable media inserted 23 Safety signature

or when Changes to Detect is reconfigured. These types of events are not included in the Changes T o Detect mask. The Changes T oDetect mask can be configured programatically using SSV , GSV and MSG instructions.Attribute Name Description Access AuditValue The AuditValue is a unique value that is generated when a project is downloaded to the controller or loaded from removable storage. When a chan ge is detected this value is updated. To specify which changes are monitored, use the ChangesToDetect attribute.GSV ChangesToDetect Used to specify which changes are monitored. When a monitored change occurs, the Audit Value is updated. GSV/SSV IMPORTANT Change detection is unavailable on the RSLogix Emulate 5000 Controller and the SoftLogix5860 Controller. TIP The Audit Value updates when the controller is online. TIP You can use the Security tab in the Contro ller Properties dialog box to configure Change Detection if you are using version 20 or later of the application. See Change Detection in Logix Designer Application on page 50 .Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 47Change Detection Chapter 4 Use the Set System V alue (SSV) instruction to write to the Changes T o Detect attribute and the Get System V alue (GSV) instruction to read the Changes T o Detect attribute programmatically. The Message Configuration dialog can be used to read or write to the Changes T oDetect attribute through CIP Generic Messages. For complete information on how to access
- November 2012Chapter 4 Change Detection Controller Change Detection Two controller attributes are used to support the Change Detection feature in version 20 and later. ChangesToDetect The Changes T oDetect mask is a 64-bit value. Each bit of the Changes T oDetect mask corresponds to a particular event that could cause the Audit V alue to change. See ChangesT oDetect Format on page 48 . If a bit set to a value of 1, the corresponding event is monitored for changes and when a change for that event occurs the AuditV alue updates. If a bit is set to a value of 2, the corresponding event is not monitored and has no affect on the Audit V alue. The default Audit V alue of: 0xFFFFFFFFFFFFFFFF indicates that all events are monitored. There are some events that will always update the audit value when they occur. For example, the audit value changes when a project is downloaded to the controller, or when Changes to Detect is reconfigured. These types of events are not included in the Changes T o Detect mask. The Changes T oDetect mask can be configured programatically using SSV , GSV and MSG instructions.Attribute Name Description Access AuditValue The AuditValue is a unique value that is generated when a project is downloaded to the controller or loaded from removable storage. When a chan ge is detected this value is updated. To specify which changes are monitored, use the ChangesToDetect attribute.GSV ChangesToDetect Used to specify which changes are monitored. When a monitored
Change Detection if you are using version 20 or later of the application. See Change Detection in Logix Designer Application on page 50 .Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 47Change Detection Chapter 4 Use the Set System V alue (SSV) instruction to write to the Changes T o Detect attribute and the Get System V alue (GSV) instruction to read the Changes T o Detect attribute programmatically. The Message Configuration dialog can be used to read or write to the Changes T oDetect attribute through CIP Generic Messages. For complete information on how to access data using an MSG instruction, refer to Logix5000 Controllers Messages Programming Manual, publication 1756-UM012. Use these settings to configure the Changes T oDetect attribute using the Message Configuration dialogTIP We recommend using the DINT[2] data type to avoid limitations when working with LINT data types in Rockwell Automation controllers. If you want to: In this property Type or select Set controller events monitored for changesMessage Type CIP Generic Service Type Changes to Detect Set Source tag_name of type DINT[2] or LINT 1 This tag represents a bit mask of the changes monitored for the controller. Destination leave blank Get controller events monitored for changesMessage Type CIP Generic Service Type Changes to Detect Get Source leave blank Destination tag_name of type DINT[2] or LINT 1 This tag represents a bit mask of the changes monitored for the controller.48 Rockwell
•when a change is detected in the controller, a new audit value is generated. •Changes T oDetect mask allows you to programatically configure the events to monitor for changes. •controller change detection is integrated into the Logix Designer application. Note : •Change detection is not available on the RSLogix Emulate 5000 Controller and the SoftLogix5860 Controller, and the audit value is not populated. •The 1769-L3x and 1769-L4x CompactLogix Controllers do not support storing log entries to removable media. •Change detection is integrated in FactoryT alk AssetCentre version 4.1 and later. FactoryT alk AssetCentre can be configured to dectect changes in the controller and read the controller's Controller Log. •Change detection is not integrated with RSMACC utilities.IMPORTANT The change detection feature is not supported in version 19 or earlier.46 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 4 Change Detection Controller Change Detection Two controller attributes are used to support the Change Detection feature in version 20 and later. ChangesToDetect The Changes T oDetect mask is a 64-bit value. Each bit of the Changes T oDetect mask corresponds to a particular event that could cause the Audit V alue to change. See ChangesT oDetect Format on page 48 . If a bit set to a value of 1, the corresponding event is monitored for changes and when a change for that event occurs the AuditV alue updates. If a bit is set to a value of 2, the corresponding

or when Changes to Detect is reconfigured. These types of events are not included in the Changes T o Detect mask. The Changes T oDetect mask can be configured programatically using SSV , GSV and MSG instructions.Attribute Name Description Access AuditValue The AuditValue is a unique value that is generated when a project is downloaded to the controller or loaded from removable storage. When a chan ge is detected this value is updated. To specify which changes are monitored, use the ChangesToDetect attribute.GSV ChangesToDetect Used to specify which changes are monitored. When a monitored change occurs, the Audit Value is updated. GSV/SSV IMPORTANT Change detection is unavailable on the RSLogix Emulate 5000 Controller and the SoftLogix5860 Controller. TIP The Audit Value updates when the controller is online. TIP You can use the Security tab in the Contro ller Properties dialog box to configure Change Detection if you are using version 20 or later of the application. See Change Detection in Logix Designer Application on page 50 .Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 47Change Detection Chapter 4 Use the Set System V alue (SSV) instruction to write to the Changes T o Detect attribute and the Get System V alue (GSV) instruction to read the Changes T o Detect attribute programmatically. The Message Configuration dialog can be used to read or write to the Changes T oDetect attribute through CIP Generic Messages. For complete information on how to access
- November 2012Chapter 4 Change Detection Controller Change Detection Two controller attributes are used to support the Change Detection feature in version 20 and later. ChangesToDetect The Changes T oDetect mask is a 64-bit value. Each bit of the Changes T oDetect mask corresponds to a particular event that could cause the Audit V alue to change. See ChangesT oDetect Format on page 48 . If a bit set to a value of 1, the corresponding event is monitored for changes and when a change for that event occurs the AuditV alue updates. If a bit is set to a value of 2, the corresponding event is not monitored and has no affect on the Audit V alue. The default Audit V alue of: 0xFFFFFFFFFFFFFFFF indicates that all events are monitored. There are some events that will always update the audit value when they occur. For example, the audit value changes when a project is downloaded to the controller, or when Changes to Detect is reconfigured. These types of events are not included in the Changes T o Detect mask. The Changes T oDetect mask can be configured programatically using SSV , GSV and MSG instructions.Attribute Name Description Access AuditValue The AuditValue is a unique value that is generated when a project is downloaded to the controller or loaded from removable storage. When a chan ge is detected this value is updated. To specify which changes are monitored, use the ChangesToDetect attribute.GSV ChangesToDetect Used to specify which changes are monitored. When a monitored
the synchronization between the controller and the projec t file that was downloaded to it. Tip: Correlation Affected can include detection of a component being created, deleted, or modified, or logic was modified. Including the Correlation Affected event will update the audit value for these types of changes, even if other similar events (such as "Online edits modified controller program" or "Task properties modified") are masked. 33 Safety signature delete inhibited in Run mode 34 Safety signature delete allowed in Run modeBit number Event description50 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 4 Change Detection Change Detection in Logix Designer ApplicationVersion 20 and later of the application provides the Security tab in the Controller Properties dialog that allows users to configure Change Detection. T o edit the Changes T o Detect field you can type a new value. T o select the events to monitor for changes from a list, click the Configure button to open the Configure Changes to Detect dialog box. For additional information on how to configure the settings on the Security tab, refer to Logix5000 Security Programming Manual, publication 1756-PM016 or the the online help for the Logix Designer application. TIP To configure Change Detection programmatically use SSV, GSV or MSG instructions. See Controller Change Detection on page 46Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 51Chapter 5 Access Status Information
data types in Rockwell Automation controllers. If you want to: In this property Type or select Set controller events monitored for changesMessage Type CIP Generic Service Type Changes to Detect Set Source tag_name of type DINT[2] or LINT 1 This tag represents a bit mask of the changes monitored for the controller. Destination leave blank Get controller events monitored for changesMessage Type CIP Generic Service Type Changes to Detect Get Source leave blank Destination tag_name of type DINT[2] or LINT 1 This tag represents a bit mask of the changes monitored for the controller.48 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 4 Change Detection AuditValue Use the Get System V alue (GSV) instruction to read the AuditV alue attribute programmatically. The Message Configuration dialog can be used to read the AuditV alue attribute through CIP Generic Messages. For complete information on how to access data using an MSG instruction, refer to Logix5000 Controllers Messages Programming Manual, publication 1756-UM012. Use these settings to read the Audit V alue attribute using the Message Configuration. ChangesToDetect FormatIf you want to: In this property Type or select Get AuditValue Message Type CIP Generic Service Type Audit Value Get Source leave blank Destination tag_name of type DINT[2] or LINT 1 This tag contains the AuditValue for the controller. Bit number Event description 0 Project stored to removable media 1 Online edits modified controller

use a Get System Value (GSV) instruction to monitor the MODULE object for either the controller or a specific module. If the connection times out, continue operation without invoking a major fault on the controller. ! If you want to Get this attribute Data Type Description Determine if communication has timed out with any deviceLEDStatus INT For efficiency, use a DINT as the destination data type.Specifies the current state of the I/O status indicator on the front of the controller. You do not enter an instance name with this attribute. This attribute applies to the entire collection of modules. Value Meaning 0 Status Indicator off: No MODULE objects are configured for the controller (there are no modules in the I/O Conf iguration section of the controller organizer). 1 Flashing red: None of the MODULE objects are Running. 2 Flashing green: At least one MODULE object is not Running. 3 Solid green: All the Module objects are Running. Determine if communication has timed out with a specific deviceFaultCode INT For efficiency, use a DINT as the destination data type.A number that identifies a module fault, if one occurs. In the Instance Name, choose the device whose connection you want to monitor. Make sure to assign a name to the device in the I/O Configuration folder of the project.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 15Connections Chapter 1 If Module_Status is any value other than 4, the controller is not communicating with the module. See the
- November 2012 19Determine Controller Memory Information Chapter 2 View Run-time Memory InformationWhen online with a controller, the Memory tab shows the actual memory usage of the controller. While the controller is running, it uses additional memory for communication. The amount of memory the controller needs varies depending on the state of the communication. The Memory tab of the controller includes a Max Used entry for each type of memory. The Max Used values show the peak of memory usage as communication occurs. Follow these steps to reset memory usage. 1.Start the Logix Designer application and open a controller project. 2.On the Online toolbar (above the Controller Organizer), click the controller properties icon. The Controller Properties dialog box appears. 3.Select the Memory tab. 4.Click Reset All Max to reset values. 5.Click OK.20 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 2 Determine Controller Memory Information Write Logic to Get Memory InformationThere are several ways to use logic to get memory information: •Get Memory Information from the Controller . •Choose the Memory Information . •Convert INT s to a DINT . Get Memory Information from the Controller T o get memory information from the controller, execute a Message (MSG) instruction that is configured as follows. On this tab For this item Type or select Which means Configuration Message Type CIP Generic Execute a Control and Information Protocol command. Service Type Custom
complete information on how to access data using an MSG instruction, refer to Logix5000 Controllers Messages Programming Manual, publication 1756-UM012. Use these settings to read the Audit V alue attribute using the Message Configuration. ChangesToDetect FormatIf you want to: In this property Type or select Get AuditValue Message Type CIP Generic Service Type Audit Value Get Source leave blank Destination tag_name of type DINT[2] or LINT 1 This tag contains the AuditValue for the controller. Bit number Event description 0 Project stored to removable media 1 Online edits modified controller program 2 Transaction committed •Indicates that a batch of one or more ch anges has been applied to the controller. For example, this might happen when a routine is imported online or when a module configuration is changed online. 3 SFC forces enabled 4 SFC forces disabled 5 SFC forces removed 6 SFC element force value changed 7 I/O forces enabled 8 I/O forces disabled 9 I/O forces removedRockwell Automation Publication 1756-PM015E-EN-P - November 2012 49Change Detection Chapter 4 10 I/O forces modified 11 Firmware update attempted12 Firmware update from removable media attempted 13 Remote mode change 14 Keyswitch mode change 15 A major fault occurred 16 All major faults cleared 17 All major faults cleared through keyswitch 18 Task properties modified 19 Program properties modified 20 Controller time slice modified 21 Removable media removed 22 Removable media inserted 23 Safety signature
If the SFC does not call a routine, S:FS is set (on) for the first scan of the task. Get and Set System DataThe controller stores system data in objects. There is no status file, as in the PLC- 5 controller. Use the GSV/SSV instructions to get and set controller system data that is stored in objects. •The GSV instruction retrieves the specified information and places it in the destination. •The SSV instruction sets the specified attribute with data from the source. Follow these steps to get or set a system value. 1.Open the project. 2.From the Help menu, choose Contents. 3.Click the Index tab. 4.Type GSV/SSV objects and click Display.EXAMPLE Several Tasks but No SFC Suppose you have two tasks that use ladder diagrams. When the first task runs for the first time, S:FS turns on for one scan. After that, S:FS stays off for that task. When the other task runs for the first time, S:FS turns on for one scan in that task. S:FS stays off in the first task that ran. ATTENTION: Use the SSV instruction carefully. Making changes to objects can cause unexpected controller operation or injury to personnel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 53Access Status Information Chapter 5 5.Select the object. 6.In the list of attributes for the object, identify the attribute that you want to access. For attribute information, see the Logix5000 Controllers General Instruction Reference Manual, publication 1756-RM003 . 7.Create a tag for the value of the attribute. 8.In

- November 2012Chapter 2 Determine Controller Memory Information Estimate Memory Information OfflineT o estimate how much controller memory your project requires, use the Memory tab of the Controller Properties dialog box. For each of the memory areas of your controller, the dialog box lets you estimate number of bytes of: •free (unused) memory. •used memory. •largest free contiguous block of memory. Follow these steps to estimate the controller memory. 1.Start the Logix Designer application and open a controller project. 2.On the Online toolbar (above the Controller Organizer), click the controller properties icon. The Controller Properties dialog box appears. 3.Select the Memory tab. 4.In the ‘Estimated Data and Logic Memory section’ , view the memory information since the last estimate. 5.Click Estimate to re-estimate the amount of controller memory.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 19Determine Controller Memory Information Chapter 2 View Run-time Memory InformationWhen online with a controller, the Memory tab shows the actual memory usage of the controller. While the controller is running, it uses additional memory for communication. The amount of memory the controller needs varies depending on the state of the communication. The Memory tab of the controller includes a Max Used entry for each type of memory. The Max Used values show the peak of memory usage as communication occurs. Follow these steps to reset memory usage. 1.Start the Logix
- November 2012 19Determine Controller Memory Information Chapter 2 View Run-time Memory InformationWhen online with a controller, the Memory tab shows the actual memory usage of the controller. While the controller is running, it uses additional memory for communication. The amount of memory the controller needs varies depending on the state of the communication. The Memory tab of the controller includes a Max Used entry for each type of memory. The Max Used values show the peak of memory usage as communication occurs. Follow these steps to reset memory usage. 1.Start the Logix Designer application and open a controller project. 2.On the Online toolbar (above the Controller Organizer), click the controller properties icon. The Controller Properties dialog box appears. 3.Select the Memory tab. 4.Click Reset All Max to reset values. 5.Click OK.20 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 2 Determine Controller Memory Information Write Logic to Get Memory InformationThere are several ways to use logic to get memory information: •Get Memory Information from the Controller . •Choose the Memory Information . •Convert INT s to a DINT . Get Memory Information from the Controller T o get memory information from the controller, execute a Message (MSG) instruction that is configured as follows. On this tab For this item Type or select Which means Configuration Message Type CIP Generic Execute a Control and Information Protocol command. Service Type Custom
may be divided into several areas. If you have this controller Then it stores this In this memory 1756 ControlLogix 1756 GuardLogix 1768 CompactLogix1768 Compact GuardLogixI/O tags I/O memory Produced / Consumed tags Communication via Message (MSG) instructions Communication with workstations Communication with polled (OPC/DDE ) tags that use RSLinx software (1) Tags other than I/O, produced, or consumed tags Data and logic memory(2) Logic routinesCommunication with polled (OPC/DDE ) tags that use RSLinx software (1) 1769-L2 x CompactLogix 1769-L3 x CompactLogix FlexLogix DriveLogix SoftLogix5800These controllers do not divide their memory. They store all elements in one common memory area. (1) To communicate with polled tags, the contro ller uses both I/O data and logic memory. (2) 1756-L55M16 controllers have an additional memory section for logic.18 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 2 Determine Controller Memory Information Estimate Memory Information OfflineT o estimate how much controller memory your project requires, use the Memory tab of the Controller Properties dialog box. For each of the memory areas of your controller, the dialog box lets you estimate number of bytes of: •free (unused) memory. •used memory. •largest free contiguous block of memory. Follow these steps to estimate the controller memory. 1.Start the Logix Designer application and open a controller project. 2.On the Online toolbar (above the Controller Organizer),
use a Get System Value (GSV) instruction to monitor the MODULE object for either the controller or a specific module. If the connection times out, continue operation without invoking a major fault on the controller. ! If you want to Get this attribute Data Type Description Determine if communication has timed out with any deviceLEDStatus INT For efficiency, use a DINT as the destination data type.Specifies the current state of the I/O status indicator on the front of the controller. You do not enter an instance name with this attribute. This attribute applies to the entire collection of modules. Value Meaning 0 Status Indicator off: No MODULE objects are configured for the controller (there are no modules in the I/O Conf iguration section of the controller organizer). 1 Flashing red: None of the MODULE objects are Running. 2 Flashing green: At least one MODULE object is not Running. 3 Solid green: All the Module objects are Running. Determine if communication has timed out with a specific deviceFaultCode INT For efficiency, use a DINT as the destination data type.A number that identifies a module fault, if one occurs. In the Instance Name, choose the device whose connection you want to monitor. Make sure to assign a name to the device in the I/O Configuration folder of the project.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 15Connections Chapter 1 If Module_Status is any value other than 4, the controller is not communicating with the module. See the

- November 2012 25Controller Logging Chapter 3 Controller Log Entry Each entry in the log can include the following information: ·Record Number ·Time of Occurrence (UTC - 24 hour clock) ·Entry Description ·Windows User Name ·Wo r k s t a t i o n Na m e ·FactoryT alk User ID (if available) ·Extended Information •Change Detection Audit Value (Refer to Controller Change Detection on page 46 .) Figure 1 - Example Excel File of a Controller Log Entries Captured in the Controller Log Below is a list of entries that are detected and logged. These events are described in more detail in Controller Log Events on page 39 . •Project downloaded •Project loaded from removable media •Project stored to removable media •Online edits modified controller program •Partial import online completed or T ranaction committed •I/O forces enabled, disabled, removed, or modified •SFC forces enabled, disabled, removed, or modified •Firmware update •Constant tag data changed •Multiple constant tag data changed26 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging •Change to constant tag configuration reset •Mode change •Major fault, major fault cleared •Program properties modified •Ta s k p r o p e r ti e s m o d i f i e d •Controller timeslice modified •Removable media inserted or removed •Safety signature created or deleted •Safety locked or unlocked •Custom entry: User-defined logic to create a log entry, with user-defined entry description and extended
Login Id •Extended Information: Program •Property changes logged: -Inhibit checkbox -Main routine changed -Fault routine changedEntry Information Logged42 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging Task properties modified •Time Stamp •Entry Description: Task properties modified •UserName •Workstation Name •FactoryTalk Login Id •Extended Information: Task •Task property changes logged: -Type changed -Inhibit checkbox -Disable Automatic Output Processing to Reduce Task Overhead checkbox -Priority value -Period Value -Execute if no Event occurs within X ms check box -Trigger changed -Trigger Tag changed -Schedule changed/ Service operation Controller time slice modified •Time Stamp •Entry Description: Controller timeslice modified •UserName •Workstation Name •FactoryTalk Login Id •Extended Information •Changes logged: -System Overhead Time Slice -During unused System Overhead Time Slice radio buttons Removable media removed •Time Stamp •Entry Description: Removable media removed •UserName: Local •Workstation Name: None •FactoryTalk Login Id: None •Extended Information: None Removable media inserted •Time Stamp •Entry Description: Removable media inserted •UserName: Local •Workstation Name: None •FactoryTalk Login Id: None •Extended Information: None Safety signature create •Time Stamp •Entry Description: Safety signature create •UserName •Workstation Name •FactoryTalk Login Id •Extended Information: Signature number: 0xYYYYYYYY
Keyswitch mode change •UserName: Local •Workstation Name: None •FactoryTalk Login Id: None •Extended Information: Old mode <mode>, New mode <mode> •Possible modes: -Run -Remote Run -Test -Program -Remote Program Major fault •Time Stamp •Entry Description: A major fault occurred •UserName: None •Workstation Name: None •FactoryTalk Login Id: None •Extended Information: Fault type <type number>, Fault code <code number> Major faults cleared •Time Stamp •Entry Description: All major faults cleared •UserName •Workstation Name •FactoryTalk Login Id •Extended Information: None Major faults cleared through key switch•Time Stamp •Entry Description: All major faults cleared •UserName: Local •Workstation Name: None •FactoryTalk Login Id: None •Extended Information: None Program properties modified •Time Stamp •Entr y Description: Program properties modified •UserName •Workstation Name •FactoryTalk Login Id •Extended Information: Program •Property changes logged: -Inhibit checkbox -Main routine changed -Fault routine changedEntry Information Logged42 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging Task properties modified •Time Stamp •Entry Description: Task properties modified •UserName •Workstation Name •FactoryTalk Login Id •Extended Information: Task •Task property changes logged: -Type changed -Inhibit checkbox -Disable Automatic Output Processing to Reduce Task Overhead checkbox -Priority value -Period Value -Execute if no Event occurs
Logging Log File Format The following table lists the information that is contained in the controller log file. The log file is formatted in UTF-16, and has a file extension of .txt. Double- clicking the file will open it in Notepad on most systems. However, since it is formatted as T ab Separated Values (TSV), it can also be opened in a spreadsheet application, like Microsoft Excel. The following screen is an example of the log file viewed in Notepad. Figure 13 - Controller Log File Viewed in Notepad The following screen is an example of the log file viewed in Excel. Figure 14 - Controller Log File Viewed in ExcelContent Description Format Time Controller's GMT time. MMM-DD-YY HH:MM:SS 24-hour time Entry Entry Description - Defined in Entry List section. User Name User's login ID. Windows domain name with display name if available. Workstation Name User's computer name. Computer Name FactoryTalk ID User's FactoryTalk login ID. Alphanumeric characters Extended Information Entry specific information. Defined in Entry List section. Change Detection Audit Value(1) (1) Version 20 or later, see Change Detection on page 45 .Changes to the Audit value TIP For version 20 andlater, a column for the Audit Value changes is included in the log file.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 37Controller Logging Chapter 3 Create Custom Log Entries Custom entries can be added to the controller log by using a message instruction. The message instruction uses a message

use a Get System Value (GSV) instruction to monitor the MODULE object for either the controller or a specific module. If the connection times out, continue operation without invoking a major fault on the controller. ! If you want to Get this attribute Data Type Description Determine if communication has timed out with any deviceLEDStatus INT For efficiency, use a DINT as the destination data type.Specifies the current state of the I/O status indicator on the front of the controller. You do not enter an instance name with this attribute. This attribute applies to the entire collection of modules. Value Meaning 0 Status Indicator off: No MODULE objects are configured for the controller (there are no modules in the I/O Conf iguration section of the controller organizer). 1 Flashing red: None of the MODULE objects are Running. 2 Flashing green: At least one MODULE object is not Running. 3 Solid green: All the Module objects are Running. Determine if communication has timed out with a specific deviceFaultCode INT For efficiency, use a DINT as the destination data type.A number that identifies a module fault, if one occurs. In the Instance Name, choose the device whose connection you want to monitor. Make sure to assign a name to the device in the I/O Configuration folder of the project.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 15Connections Chapter 1 If Module_Status is any value other than 4, the controller is not communicating with the module. See the
3 Solid green: All the Module objects are Running. Determine if communication has timed out with a specific deviceFaultCode INT For efficiency, use a DINT as the destination data type.A number that identifies a module fault, if one occurs. In the Instance Name, choose the device whose connection you want to monitor. Make sure to assign a name to the device in the I/O Configuration folder of the project.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 15Connections Chapter 1 If Module_Status is any value other than 4, the controller is not communicating with the module. See the example below.16 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Notes:Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 17Chapter 2 Determine Controller Memory Information IntroductionDepending on your type of controller, the memory of the controller may be divided into several areas. If you have this controller Then it stores this In this memory 1756 ControlLogix 1756 GuardLogix 1768 CompactLogix1768 Compact GuardLogixI/O tags I/O memory Produced / Consumed tags Communication via Message (MSG) instructions Communication with workstations Communication with polled (OPC/DDE ) tags that use RSLinx software (1) Tags other than I/O, produced, or consumed tags Data and logic memory(2) Logic routinesCommunication with polled (OPC/DDE ) tags that use RSLinx software (1) 1769-L2 x CompactLogix 1769-L3 x CompactLogix FlexLogix DriveLogix
complete information on how to access data using an MSG instruction, refer to Logix5000 Controllers Messages Programming Manual, publication 1756-UM012. Use these settings to read the Audit V alue attribute using the Message Configuration. ChangesToDetect FormatIf you want to: In this property Type or select Get AuditValue Message Type CIP Generic Service Type Audit Value Get Source leave blank Destination tag_name of type DINT[2] or LINT 1 This tag contains the AuditValue for the controller. Bit number Event description 0 Project stored to removable media 1 Online edits modified controller program 2 Transaction committed •Indicates that a batch of one or more ch anges has been applied to the controller. For example, this might happen when a routine is imported online or when a module configuration is changed online. 3 SFC forces enabled 4 SFC forces disabled 5 SFC forces removed 6 SFC element force value changed 7 I/O forces enabled 8 I/O forces disabled 9 I/O forces removedRockwell Automation Publication 1756-PM015E-EN-P - November 2012 49Change Detection Chapter 4 10 I/O forces modified 11 Firmware update attempted12 Firmware update from removable media attempted 13 Remote mode change 14 Keyswitch mode change 15 A major fault occurred 16 All major faults cleared 17 All major faults cleared through keyswitch 18 Task properties modified 19 Program properties modified 20 Controller time slice modified 21 Removable media removed 22 Removable media inserted 23 Safety signature
Manual, publication 1756-PM014. If the connection times out, produce a major fault in the controller.14 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Monitor the Health of a Module If you do not configure the major fault to occur, you should monitor the module status. If a module loses its connection to the controller, outputs go to their configured faulted state. The controller and other I/O modules continue to operate based on old data from the module. If communication with a module times out, the controller produces these warnings: ·The I/O status indicator on the front of the controller flashes green. ·A shows over the I/O configuration folder and over the device that has timed out. ·A module fault code is produced, which you can access through: –Module Properties window for the module. –GSV instruction. T o monitor the health of your connections, use a Get System Value (GSV) instruction to monitor the MODULE object for either the controller or a specific module. If the connection times out, continue operation without invoking a major fault on the controller. ! If you want to Get this attribute Data Type Description Determine if communication has timed out with any deviceLEDStatus INT For efficiency, use a DINT as the destination data type.Specifies the current state of the I/O status indicator on the front of the controller. You do not enter an instance name with this attribute. This attribute applies to the entire collection of

entries to the removable media when its internal buffer becomes 80% full. Additionally, the controller can be commanded to write the buffered entries to the removable media with a message instruction. This procedure is detailed below. Once a log entry is written to the removable media, it is removed from the buffer. If the removable media is not present, is full, or if the controller is not configured to automatically write buffered entries to the removable media, and the internal buffer becomes full, entries will continue to be saved in the buffer in a circular fashion. As new entries are stored, the oldest entries will be discarded. Controller Log Files and the Removable Media When written to the removable media, controller logs are stored in plain text files in the T ab Separated Value (TSV) format. Each time the controller writes entries to the CompactFlash card, the entries are appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012
appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 27Controller Logging Chapter 3 Writing the Controller Log to the CompactFlash Card The controller log can be written to the CompactFlash card either automatically or on demand. Automatic Save When the controller's internal log entry buffer becomes 80% full, it can automatically write the buffered entries to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save
to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save “Set” Ladder Instruction Automatic Save “Set” Configuration Dialog BoxTIP Some Logix controllers support additional types of removable media that can be used to write the controller log entries. Refer to the Logix controller documentation for information regarding the type of removable media your Logix controller supports.28 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging The current state of the automatic write setting can be retrieved by using a message instruction with a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Get” . A rung of ladder logic that gets this value and the configuration of the message instruction are shown below. Automatic Save “Get” Ladder Instruction Automatic Save “Get” Configuration Dialog BoxRockwell Automation Publication 1756-PM015E-EN-P - November 2012 29Controller Logging Chapter
removed, or modified •Firmware update •Constant tag data changed •Multiple constant tag data changed26 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging •Change to constant tag configuration reset •Mode change •Major fault, major fault cleared •Program properties modified •Ta s k p r o p e r ti e s m o d i f i e d •Controller timeslice modified •Removable media inserted or removed •Safety signature created or deleted •Safety locked or unlocked •Custom entry: User-defined logic to create a log entry, with user-defined entry description and extended information •Safety signature delete inhibited in Run mode •Safety signature delete allowed in Run mode •The Changes T o Detect value has changed Controller Log Buffer The controller keeps up to 100 log entries buffered in its internal memory. If so configured, the controller can write the buffered entries to the removable media when its internal buffer becomes 80% full. Additionally, the controller can be commanded to write the buffered entries to the removable media with a message instruction. This procedure is detailed below. Once a log entry is written to the removable media, it is removed from the buffer. If the removable media is not present, is full, or if the controller is not configured to automatically write buffered entries to the removable media, and the internal buffer becomes full, entries will continue to be saved in the buffer in a circular fashion. As new entries are

= va lue of the Mode attribute for the module. 2. The OTE instruction sets bit 2 of Module_1_Mode = 1. This means inhibit the connection. 3. The SSV instruction sets the Mode attr ibute for the module = Module_1_Mode.12 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Manage a Connection FailureIf the controller loses communication with a module, data from that device does not update. When this occurs, the logic makes decisions on data that may or may not be correct. This section explains how to program a controller to fault. If communication with a device in the I/O configuration of the controller does not occur for 100 ms, the communication times out. If this occurs, you have these options.ATTENTION: Outputs respond to the last, non- faulted state of the controlling inputs. To avoid potential injury and damage to machinery, make sure this does not create an unsafe operation. Configure critical I/O modules to generate a controller major fault when they lose their connections to the controller: or, monitor the status of I/O modules. EXAMPLE Loss of Communication ATTENTION: Controller B requires data from controller A. If communication fails between the controllers, then controller B continues to act on the last data that it received from controller A. A BCommunication Failure 41031 If you want the controller to Then Fault (major fault) Configure a Major Fault to Occur Continue operating Monitor the Health of a ModuleRockwell Automation
If the Controller Fault Handler does not clear the fault, then the controller shuts down. When you check the ‘Major Fault On Controller…Run Mode’ box, the controller: •must be connected to the module during the Program transition to Run mode. During the Program to Run mode transition, there can be a 20-second delay. During this delay, the controller makes one attempt to connect to a module. If the ‘Major Fault On Controller…Run Mode’ box is selected, and you cannot connect during the 20-second delay, a fault occurs because at least one required connection is not established before going to Run mode. This is a 3/23 type fault code. This fault can occur in large systems with networked I/O. •will fault if the connection is dropped while in Run mode. A required I/O module connection failed, creating a 3/16 type fault. For fault codes, see the Logix5000 Controllers Major and Minor Faults Programming Manual, publication 1756-PM014. If the connection times out, produce a major fault in the controller.14 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Monitor the Health of a Module If you do not configure the major fault to occur, you should monitor the module status. If a module loses its connection to the controller, outputs go to their configured faulted state. The controller and other I/O modules continue to operate based on old data from the module. If communication with a module times out, the controller produces these warnings: ·The I/O
create an unsafe operation. Configure critical I/O modules to generate a controller major fault when they lose their connections to the controller: or, monitor the status of I/O modules. EXAMPLE Loss of Communication ATTENTION: Controller B requires data from controller A. If communication fails between the controllers, then controller B continues to act on the last data that it received from controller A. A BCommunication Failure 41031 If you want the controller to Then Fault (major fault) Configure a Major Fault to Occur Continue operating Monitor the Health of a ModuleRockwell Automation Publication 1756-PM015E-EN-P - November 2012 13Connections Chapter 1 Configure a Major Fault to Occur Y ou can configure modules to generate a major fault in the controller if they lose their connection with the controller. This interrupts the execution of logic and executes the Controller Fault Handler. If the Controller Fault Handler does not clear the fault, then the controller shuts down. When you check the ‘Major Fault On Controller…Run Mode’ box, the controller: •must be connected to the module during the Program transition to Run mode. During the Program to Run mode transition, there can be a 20-second delay. During this delay, the controller makes one attempt to connect to a module. If the ‘Major Fault On Controller…Run Mode’ box is selected, and you cannot connect during the 20-second delay, a fault occurs because at least one required connection is not established before going
Manual, publication 1756-PM014. If the connection times out, produce a major fault in the controller.14 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Monitor the Health of a Module If you do not configure the major fault to occur, you should monitor the module status. If a module loses its connection to the controller, outputs go to their configured faulted state. The controller and other I/O modules continue to operate based on old data from the module. If communication with a module times out, the controller produces these warnings: ·The I/O status indicator on the front of the controller flashes green. ·A shows over the I/O configuration folder and over the device that has timed out. ·A module fault code is produced, which you can access through: –Module Properties window for the module. –GSV instruction. T o monitor the health of your connections, use a Get System Value (GSV) instruction to monitor the MODULE object for either the controller or a specific module. If the connection times out, continue operation without invoking a major fault on the controller. ! If you want to Get this attribute Data Type Description Determine if communication has timed out with any deviceLEDStatus INT For efficiency, use a DINT as the destination data type.Specifies the current state of the I/O status indicator on the front of the controller. You do not enter an instance name with this attribute. This attribute applies to the entire collection of

may be divided into several areas. If you have this controller Then it stores this In this memory 1756 ControlLogix 1756 GuardLogix 1768 CompactLogix1768 Compact GuardLogixI/O tags I/O memory Produced / Consumed tags Communication via Message (MSG) instructions Communication with workstations Communication with polled (OPC/DDE ) tags that use RSLinx software (1) Tags other than I/O, produced, or consumed tags Data and logic memory(2) Logic routinesCommunication with polled (OPC/DDE ) tags that use RSLinx software (1) 1769-L2 x CompactLogix 1769-L3 x CompactLogix FlexLogix DriveLogix SoftLogix5800These controllers do not divide their memory. They store all elements in one common memory area. (1) To communicate with polled tags, the contro ller uses both I/O data and logic memory. (2) 1756-L55M16 controllers have an additional memory section for logic.18 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 2 Determine Controller Memory Information Estimate Memory Information OfflineT o estimate how much controller memory your project requires, use the Memory tab of the Controller Properties dialog box. For each of the memory areas of your controller, the dialog box lets you estimate number of bytes of: •free (unused) memory. •used memory. •largest free contiguous block of memory. Follow these steps to estimate the controller memory. 1.Start the Logix Designer application and open a controller project. 2.On the Online toolbar (above the Controller Organizer),
of the 32 bit value Largest contiguous block of free I/O memory (32-bit words) INT_array[23] Lower 16 bits of the 32 bit value INT_array[24] Upper 16 bits of the 32 bit value Largest contiguous block of free data and logic memory (32-bit words) INT_array[27] Lower 16 bits of the 32 bit value INT_array[28] Upper 16 bits of the 32 bit value22 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 2 Determine Controller Memory Information T o convert the separate INT s into one usable value, use a Copy (COP) instruction. In the following example, the COP instruction produces the 32-bit value that represents the amount of free I/O memory, in 32-bit words.In this operand Specify Which means Source First INT of the 2 element pair (lower 16 bits)Start with the lower 16 bits. Destination DINT tag in which to store the 32-bit value Copy the va lue to the DINT tag. Length 1 Copy 1 times the number of bytes in the Dest ination data type. In this case, the instruction copies 4 bytes (32 bits), which combines the lower and upper 16 bits into one 32-bit value. EXAMPLE Convert INTs to a DINT •Elements 3 of INT_array is the lower 16 bits of the amount of free I/O memory. Element 4 is the upper 16 bits. •Memory_IO_Free is a DINT tag (32 bits) in which to store the value for the amount of free I/O memory. •To copy all 32 bits, specify a Length of 1. This tells the instruction to copy 1 times the size of the Destination (32 bits). This copies both element 3 (16 bits) and
- November 2012Chapter 2 Determine Controller Memory Information Estimate Memory Information OfflineT o estimate how much controller memory your project requires, use the Memory tab of the Controller Properties dialog box. For each of the memory areas of your controller, the dialog box lets you estimate number of bytes of: •free (unused) memory. •used memory. •largest free contiguous block of memory. Follow these steps to estimate the controller memory. 1.Start the Logix Designer application and open a controller project. 2.On the Online toolbar (above the Controller Organizer), click the controller properties icon. The Controller Properties dialog box appears. 3.Select the Memory tab. 4.In the ‘Estimated Data and Logic Memory section’ , view the memory information since the last estimate. 5.Click Estimate to re-estimate the amount of controller memory.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 19Determine Controller Memory Information Chapter 2 View Run-time Memory InformationWhen online with a controller, the Memory tab shows the actual memory usage of the controller. While the controller is running, it uses additional memory for communication. The amount of memory the controller needs varies depending on the state of the communication. The Memory tab of the controller includes a Max Used entry for each type of memory. The Max Used values show the peak of memory usage as communication occurs. Follow these steps to reset memory usage. 1.Start the Logix
source_array of type SINT[12] In this element Enter Which means source_array[0] 5 Get 5 attributes. source_array[1] 0 Null value. source_array[2] 1 Get free memory.source_array[3] 0 Null value. source_array[4] 2 Get total memory. source_array[5] 0 Null value.source_array[6] 5 Get largest contiguous block of additional free logic memory. source_array[7] 0 Null value. source_array[8] 6 Get largest contiguous block of free I/O memory.source_array[9] 0 Null value.source_array[10] 7 Get largest contiguous block of free data and logic memory. source_array[11] 0 Null value. Source Length 12 Write 12 bytes (12 SINTs). Destination INT_array of type INT[29] Communication Path 1, slot_number_of_controllerRockwell Automation Publication 1756-PM015E-EN-P - November 2012 21Determine Controller Memory Information Chapter 2 Choose the Memory Information The MSG instruction returns the following information to INT_array (destination tag of the MSG). Convert INTs to a DINT The MSG instruction returns each memory value as two separate INT s. •The first INT represents the lower 16 bits of the value. •The second INT represents the upper 16 bits of the value.IMPORTANT The controller returns the values in number of 32-bit words. To see a value in bytes, multiple it by 4. If your controller does not divide its memory, then the values show up as I/O memory. For the 1756-L55M16 controller, the MSG instruct ion returns two values for each logic memory category. To determine the free or total logic

entries to the removable media when its internal buffer becomes 80% full. Additionally, the controller can be commanded to write the buffered entries to the removable media with a message instruction. This procedure is detailed below. Once a log entry is written to the removable media, it is removed from the buffer. If the removable media is not present, is full, or if the controller is not configured to automatically write buffered entries to the removable media, and the internal buffer becomes full, entries will continue to be saved in the buffer in a circular fashion. As new entries are stored, the oldest entries will be discarded. Controller Log Files and the Removable Media When written to the removable media, controller logs are stored in plain text files in the T ab Separated Value (TSV) format. Each time the controller writes entries to the CompactFlash card, the entries are appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012
appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 27Controller Logging Chapter 3 Writing the Controller Log to the CompactFlash Card The controller log can be written to the CompactFlash card either automatically or on demand. Automatic Save When the controller's internal log entry buffer becomes 80% full, it can automatically write the buffered entries to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save
to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save “Set” Ladder Instruction Automatic Save “Set” Configuration Dialog BoxTIP Some Logix controllers support additional types of removable media that can be used to write the controller log entries. Refer to the Logix controller documentation for information regarding the type of removable media your Logix controller supports.28 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging The current state of the automatic write setting can be retrieved by using a message instruction with a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Get” . A rung of ladder logic that gets this value and the configuration of the message instruction are shown below. Automatic Save “Get” Ladder Instruction Automatic Save “Get” Configuration Dialog BoxRockwell Automation Publication 1756-PM015E-EN-P - November 2012 29Controller Logging Chapter
- November 2012 19Determine Controller Memory Information Chapter 2 View Run-time Memory InformationWhen online with a controller, the Memory tab shows the actual memory usage of the controller. While the controller is running, it uses additional memory for communication. The amount of memory the controller needs varies depending on the state of the communication. The Memory tab of the controller includes a Max Used entry for each type of memory. The Max Used values show the peak of memory usage as communication occurs. Follow these steps to reset memory usage. 1.Start the Logix Designer application and open a controller project. 2.On the Online toolbar (above the Controller Organizer), click the controller properties icon. The Controller Properties dialog box appears. 3.Select the Memory tab. 4.Click Reset All Max to reset values. 5.Click OK.20 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 2 Determine Controller Memory Information Write Logic to Get Memory InformationThere are several ways to use logic to get memory information: •Get Memory Information from the Controller . •Choose the Memory Information . •Convert INT s to a DINT . Get Memory Information from the Controller T o get memory information from the controller, execute a Message (MSG) instruction that is configured as follows. On this tab For this item Type or select Which means Configuration Message Type CIP Generic Execute a Control and Information Protocol command. Service Type Custom

use a Get System Value (GSV) instruction to monitor the MODULE object for either the controller or a specific module. If the connection times out, continue operation without invoking a major fault on the controller. ! If you want to Get this attribute Data Type Description Determine if communication has timed out with any deviceLEDStatus INT For efficiency, use a DINT as the destination data type.Specifies the current state of the I/O status indicator on the front of the controller. You do not enter an instance name with this attribute. This attribute applies to the entire collection of modules. Value Meaning 0 Status Indicator off: No MODULE objects are configured for the controller (there are no modules in the I/O Conf iguration section of the controller organizer). 1 Flashing red: None of the MODULE objects are Running. 2 Flashing green: At least one MODULE object is not Running. 3 Solid green: All the Module objects are Running. Determine if communication has timed out with a specific deviceFaultCode INT For efficiency, use a DINT as the destination data type.A number that identifies a module fault, if one occurs. In the Instance Name, choose the device whose connection you want to monitor. Make sure to assign a name to the device in the I/O Configuration folder of the project.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 15Connections Chapter 1 If Module_Status is any value other than 4, the controller is not communicating with the module. See the
is used by the attribute. B. Create a tag for the attribute and use the data type from step A. To Enter this instruction Get the value of an attribute GSV Set the value of an attribute SSV54 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 5 Access Status Information 9.Assign the required operands to the instruction: This examples gets the current date and time. For more GSV/SSV information, see the Logix5000 Controllers General Instructions Reference Manual, publication 1756-RM003.For this operand Select Class name Name of the object. Instance name Name of the specific object (for example, name of the required I/O module, task, message). •Not all objects require this entry. •To specify the current task, program, or routine, select THIS. Attribute name Name of the attribute. Dest (GSV) Tag that will store the retrieved value. If the tag is a user-defined data type or an array, select the first member or element. Source (SSV) Tag that stores the value to be set. If the tag is a user-defined data type or an array, select the first member or element. EXAMPLE Get a System Value At the first scan, gets the DateTime attrib ute of the WALLCLOCKTIME object and stores it in the wall_clock tag, which is based on a user-defined data type. 42370Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 55Index A access status information 51 AuditValue 48 B bridge module connection 10 C Change Detection 46 ChangesToDetect 46 communicate other controllers 9
source_array of type SINT[12] In this element Enter Which means source_array[0] 5 Get 5 attributes. source_array[1] 0 Null value. source_array[2] 1 Get free memory.source_array[3] 0 Null value. source_array[4] 2 Get total memory. source_array[5] 0 Null value.source_array[6] 5 Get largest contiguous block of additional free logic memory. source_array[7] 0 Null value. source_array[8] 6 Get largest contiguous block of free I/O memory.source_array[9] 0 Null value.source_array[10] 7 Get largest contiguous block of free data and logic memory. source_array[11] 0 Null value. Source Length 12 Write 12 bytes (12 SINTs). Destination INT_array of type INT[29] Communication Path 1, slot_number_of_controllerRockwell Automation Publication 1756-PM015E-EN-P - November 2012 21Determine Controller Memory Information Chapter 2 Choose the Memory Information The MSG instruction returns the following information to INT_array (destination tag of the MSG). Convert INTs to a DINT The MSG instruction returns each memory value as two separate INT s. •The first INT represents the lower 16 bits of the value. •The second INT represents the upper 16 bits of the value.IMPORTANT The controller returns the values in number of 32-bit words. To see a value in bytes, multiple it by 4. If your controller does not divide its memory, then the values show up as I/O memory. For the 1756-L55M16 controller, the MSG instruct ion returns two values for each logic memory category. To determine the free or total logic
may be divided into several areas. If you have this controller Then it stores this In this memory 1756 ControlLogix 1756 GuardLogix 1768 CompactLogix1768 Compact GuardLogixI/O tags I/O memory Produced / Consumed tags Communication via Message (MSG) instructions Communication with workstations Communication with polled (OPC/DDE ) tags that use RSLinx software (1) Tags other than I/O, produced, or consumed tags Data and logic memory(2) Logic routinesCommunication with polled (OPC/DDE ) tags that use RSLinx software (1) 1769-L2 x CompactLogix 1769-L3 x CompactLogix FlexLogix DriveLogix SoftLogix5800These controllers do not divide their memory. They store all elements in one common memory area. (1) To communicate with polled tags, the contro ller uses both I/O data and logic memory. (2) 1756-L55M16 controllers have an additional memory section for logic.18 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 2 Determine Controller Memory Information Estimate Memory Information OfflineT o estimate how much controller memory your project requires, use the Memory tab of the Controller Properties dialog box. For each of the memory areas of your controller, the dialog box lets you estimate number of bytes of: •free (unused) memory. •used memory. •largest free contiguous block of memory. Follow these steps to estimate the controller memory. 1.Start the Logix Designer application and open a controller project. 2.On the Online toolbar (above the Controller Organizer),

use a Get System Value (GSV) instruction to monitor the MODULE object for either the controller or a specific module. If the connection times out, continue operation without invoking a major fault on the controller. ! If you want to Get this attribute Data Type Description Determine if communication has timed out with any deviceLEDStatus INT For efficiency, use a DINT as the destination data type.Specifies the current state of the I/O status indicator on the front of the controller. You do not enter an instance name with this attribute. This attribute applies to the entire collection of modules. Value Meaning 0 Status Indicator off: No MODULE objects are configured for the controller (there are no modules in the I/O Conf iguration section of the controller organizer). 1 Flashing red: None of the MODULE objects are Running. 2 Flashing green: At least one MODULE object is not Running. 3 Solid green: All the Module objects are Running. Determine if communication has timed out with a specific deviceFaultCode INT For efficiency, use a DINT as the destination data type.A number that identifies a module fault, if one occurs. In the Instance Name, choose the device whose connection you want to monitor. Make sure to assign a name to the device in the I/O Configuration folder of the project.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 15Connections Chapter 1 If Module_Status is any value other than 4, the controller is not communicating with the module. See the
= va lue of the Mode attribute for the module. 2. The OTE instruction sets bit 2 of Module_1_Mode = 1. This means inhibit the connection. 3. The SSV instruction sets the Mode attr ibute for the module = Module_1_Mode.12 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Manage a Connection FailureIf the controller loses communication with a module, data from that device does not update. When this occurs, the logic makes decisions on data that may or may not be correct. This section explains how to program a controller to fault. If communication with a device in the I/O configuration of the controller does not occur for 100 ms, the communication times out. If this occurs, you have these options.ATTENTION: Outputs respond to the last, non- faulted state of the controlling inputs. To avoid potential injury and damage to machinery, make sure this does not create an unsafe operation. Configure critical I/O modules to generate a controller major fault when they lose their connections to the controller: or, monitor the status of I/O modules. EXAMPLE Loss of Communication ATTENTION: Controller B requires data from controller A. If communication fails between the controllers, then controller B continues to act on the last data that it received from controller A. A BCommunication Failure 41031 If you want the controller to Then Fault (major fault) Configure a Major Fault to Occur Continue operating Monitor the Health of a ModuleRockwell Automation
Manual, publication 1756-PM014. If the connection times out, produce a major fault in the controller.14 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 1 Connections Monitor the Health of a Module If you do not configure the major fault to occur, you should monitor the module status. If a module loses its connection to the controller, outputs go to their configured faulted state. The controller and other I/O modules continue to operate based on old data from the module. If communication with a module times out, the controller produces these warnings: ·The I/O status indicator on the front of the controller flashes green. ·A shows over the I/O configuration folder and over the device that has timed out. ·A module fault code is produced, which you can access through: –Module Properties window for the module. –GSV instruction. T o monitor the health of your connections, use a Get System Value (GSV) instruction to monitor the MODULE object for either the controller or a specific module. If the connection times out, continue operation without invoking a major fault on the controller. ! If you want to Get this attribute Data Type Description Determine if communication has timed out with any deviceLEDStatus INT For efficiency, use a DINT as the destination data type.Specifies the current state of the I/O status indicator on the front of the controller. You do not enter an instance name with this attribute. This attribute applies to the entire collection of
complete information on how to access data using an MSG instruction, refer to Logix5000 Controllers Messages Programming Manual, publication 1756-UM012. Use these settings to read the Audit V alue attribute using the Message Configuration. ChangesToDetect FormatIf you want to: In this property Type or select Get AuditValue Message Type CIP Generic Service Type Audit Value Get Source leave blank Destination tag_name of type DINT[2] or LINT 1 This tag contains the AuditValue for the controller. Bit number Event description 0 Project stored to removable media 1 Online edits modified controller program 2 Transaction committed •Indicates that a batch of one or more ch anges has been applied to the controller. For example, this might happen when a routine is imported online or when a module configuration is changed online. 3 SFC forces enabled 4 SFC forces disabled 5 SFC forces removed 6 SFC element force value changed 7 I/O forces enabled 8 I/O forces disabled 9 I/O forces removedRockwell Automation Publication 1756-PM015E-EN-P - November 2012 49Change Detection Chapter 4 10 I/O forces modified 11 Firmware update attempted12 Firmware update from removable media attempted 13 Remote mode change 14 Keyswitch mode change 15 A major fault occurred 16 All major faults cleared 17 All major faults cleared through keyswitch 18 Task properties modified 19 Program properties modified 20 Controller time slice modified 21 Removable media removed 22 Removable media inserted 23 Safety signature

appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 27Controller Logging Chapter 3 Writing the Controller Log to the CompactFlash Card The controller log can be written to the CompactFlash card either automatically or on demand. Automatic Save When the controller's internal log entry buffer becomes 80% full, it can automatically write the buffered entries to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save
to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save “Set” Ladder Instruction Automatic Save “Set” Configuration Dialog BoxTIP Some Logix controllers support additional types of removable media that can be used to write the controller log entries. Refer to the Logix controller documentation for information regarding the type of removable media your Logix controller supports.28 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging The current state of the automatic write setting can be retrieved by using a message instruction with a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Get” . A rung of ladder logic that gets this value and the configuration of the message instruction are shown below. Automatic Save “Get” Ladder Instruction Automatic Save “Get” Configuration Dialog BoxRockwell Automation Publication 1756-PM015E-EN-P - November 2012 29Controller Logging Chapter
entries to the removable media when its internal buffer becomes 80% full. Additionally, the controller can be commanded to write the buffered entries to the removable media with a message instruction. This procedure is detailed below. Once a log entry is written to the removable media, it is removed from the buffer. If the removable media is not present, is full, or if the controller is not configured to automatically write buffered entries to the removable media, and the internal buffer becomes full, entries will continue to be saved in the buffer in a circular fashion. As new entries are stored, the oldest entries will be discarded. Controller Log Files and the Removable Media When written to the removable media, controller logs are stored in plain text files in the T ab Separated Value (TSV) format. Each time the controller writes entries to the CompactFlash card, the entries are appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012
- November 2012 25Controller Logging Chapter 3 Controller Log Entry Each entry in the log can include the following information: ·Record Number ·Time of Occurrence (UTC - 24 hour clock) ·Entry Description ·Windows User Name ·Wo r k s t a t i o n Na m e ·FactoryT alk User ID (if available) ·Extended Information •Change Detection Audit Value (Refer to Controller Change Detection on page 46 .) Figure 1 - Example Excel File of a Controller Log Entries Captured in the Controller Log Below is a list of entries that are detected and logged. These events are described in more detail in Controller Log Events on page 39 . •Project downloaded •Project loaded from removable media •Project stored to removable media •Online edits modified controller program •Partial import online completed or T ranaction committed •I/O forces enabled, disabled, removed, or modified •SFC forces enabled, disabled, removed, or modified •Firmware update •Constant tag data changed •Multiple constant tag data changed26 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging •Change to constant tag configuration reset •Mode change •Major fault, major fault cleared •Program properties modified •Ta s k p r o p e r ti e s m o d i f i e d •Controller timeslice modified •Removable media inserted or removed •Safety signature created or deleted •Safety locked or unlocked •Custom entry: User-defined logic to create a log entry, with user-defined entry description and extended

to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save “Set” Ladder Instruction Automatic Save “Set” Configuration Dialog BoxTIP Some Logix controllers support additional types of removable media that can be used to write the controller log entries. Refer to the Logix controller documentation for information regarding the type of removable media your Logix controller supports.28 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging The current state of the automatic write setting can be retrieved by using a message instruction with a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Get” . A rung of ladder logic that gets this value and the configuration of the message instruction are shown below. Automatic Save “Get” Ladder Instruction Automatic Save “Get” Configuration Dialog BoxRockwell Automation Publication 1756-PM015E-EN-P - November 2012 29Controller Logging Chapter
entries to the removable media when its internal buffer becomes 80% full. Additionally, the controller can be commanded to write the buffered entries to the removable media with a message instruction. This procedure is detailed below. Once a log entry is written to the removable media, it is removed from the buffer. If the removable media is not present, is full, or if the controller is not configured to automatically write buffered entries to the removable media, and the internal buffer becomes full, entries will continue to be saved in the buffer in a circular fashion. As new entries are stored, the oldest entries will be discarded. Controller Log Files and the Removable Media When written to the removable media, controller logs are stored in plain text files in the T ab Separated Value (TSV) format. Each time the controller writes entries to the CompactFlash card, the entries are appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012
appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 27Controller Logging Chapter 3 Writing the Controller Log to the CompactFlash Card The controller log can be written to the CompactFlash card either automatically or on demand. Automatic Save When the controller's internal log entry buffer becomes 80% full, it can automatically write the buffered entries to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save
to the CompactFlash card. This counter value is available via a GSV instruction, and can range from 0…100, the maximum number of entries that the controller can buffer. This rung of ladder logic shows how to retrieve the Unsaved Entry Count by using a Get System Value (GSV) instruction. Figure 5 - Retrieve the Unsaved Entry Co unt Using a Get System Value Instruction32 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging Execution Modification Count The Execution Modification Count tracks the number of changes that occur that can change the behavior of a running controller. This counter can be configured to include or exclude force changes. The events that will cause the Execution Modification Count to increment include the following: ·Online edits tested or assembled ·Forces enabled or disabled (if so configured) ·Program properties modified ·Ta s k p r o p e r ti e s m o d i f i e d ·Controller timeslice modified This counter can be set to a known value by using an SSV instruction. This rung of ladder logic shows how to retrieve the Execution Modification Count by using a GSV instruction. Figure 6 - Retrieve the Execution Modifi cation Count by Using a GSV Instruction This rung of ladder logic shows how to set the Execution Modification Count to a known value. Figure 7 - Set the Execution Modification Count to a Known ValueRockwell Automation Publication 1756-PM015E-EN-P - November 2012 33Controller Logging Chapter 3 A message

is used by the attribute. B. Create a tag for the attribute and use the data type from step A. To Enter this instruction Get the value of an attribute GSV Set the value of an attribute SSV54 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 5 Access Status Information 9.Assign the required operands to the instruction: This examples gets the current date and time. For more GSV/SSV information, see the Logix5000 Controllers General Instructions Reference Manual, publication 1756-RM003.For this operand Select Class name Name of the object. Instance name Name of the specific object (for example, name of the required I/O module, task, message). •Not all objects require this entry. •To specify the current task, program, or routine, select THIS. Attribute name Name of the attribute. Dest (GSV) Tag that will store the retrieved value. If the tag is a user-defined data type or an array, select the first member or element. Source (SSV) Tag that stores the value to be set. If the tag is a user-defined data type or an array, select the first member or element. EXAMPLE Get a System Value At the first scan, gets the DateTime attrib ute of the WALLCLOCKTIME object and stores it in the wall_clock tag, which is based on a user-defined data type. 42370Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 55Index A access status information 51 AuditValue 48 B bridge module connection 10 C Change Detection 46 ChangesToDetect 46 communicate other controllers 9
or an array, select the first member or element. Source (SSV) Tag that stores the value to be set. If the tag is a user-defined data type or an array, select the first member or element. EXAMPLE Get a System Value At the first scan, gets the DateTime attrib ute of the WALLCLOCKTIME object and stores it in the wall_clock tag, which is based on a user-defined data type. 42370Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 55Index A access status information 51 AuditValue 48 B bridge module connection 10 C Change Detection 46 ChangesToDetect 46 communicate other controllers 9 CompactFlash log 26 configure I/O module 10 connection failure 12 fault checkbox 13 I/O fault 12 inhibit 10 major fault 13 monitor 14 controller log entries 23 memory information 17 D DINT 22 F fault communication loss 12 I/O connection 12 file log 36 G GSV/SSV objects 52 I I/O module communication loss 12 connection fault 12inhibit 10 path configuration 9 inhibit attention symbol 10 connetion 10 I/O module 10 ladder logic 11 INT 21 L ladder sample log file 38 log CompactFlash card 26 counters 30 custom entries 37 entries 25 file format 36 file location 35 header 24 memory buffer 26 modification count 32 sample ladder file 38 M memory determine amount 17 estimate free amount 18 run message instruction 20 types 17 view controller usage 19 monitor I/O connection 14 O objects data storage 52 P path connection route 9 S status access data 51 memory 17 monitor 52 system data access 5256
data types in Rockwell Automation controllers. If you want to: In this property Type or select Set controller events monitored for changesMessage Type CIP Generic Service Type Changes to Detect Set Source tag_name of type DINT[2] or LINT 1 This tag represents a bit mask of the changes monitored for the controller. Destination leave blank Get controller events monitored for changesMessage Type CIP Generic Service Type Changes to Detect Get Source leave blank Destination tag_name of type DINT[2] or LINT 1 This tag represents a bit mask of the changes monitored for the controller.48 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 4 Change Detection AuditValue Use the Get System V alue (GSV) instruction to read the AuditV alue attribute programmatically. The Message Configuration dialog can be used to read the AuditV alue attribute through CIP Generic Messages. For complete information on how to access data using an MSG instruction, refer to Logix5000 Controllers Messages Programming Manual, publication 1756-UM012. Use these settings to read the Audit V alue attribute using the Message Configuration. ChangesToDetect FormatIf you want to: In this property Type or select Get AuditValue Message Type CIP Generic Service Type Audit Value Get Source leave blank Destination tag_name of type DINT[2] or LINT 1 This tag contains the AuditValue for the controller. Bit number Event description 0 Project stored to removable media 1 Online edits modified controller
complete information on how to access data using an MSG instruction, refer to Logix5000 Controllers Messages Programming Manual, publication 1756-UM012. Use these settings to read the Audit V alue attribute using the Message Configuration. ChangesToDetect FormatIf you want to: In this property Type or select Get AuditValue Message Type CIP Generic Service Type Audit Value Get Source leave blank Destination tag_name of type DINT[2] or LINT 1 This tag contains the AuditValue for the controller. Bit number Event description 0 Project stored to removable media 1 Online edits modified controller program 2 Transaction committed •Indicates that a batch of one or more ch anges has been applied to the controller. For example, this might happen when a routine is imported online or when a module configuration is changed online. 3 SFC forces enabled 4 SFC forces disabled 5 SFC forces removed 6 SFC element force value changed 7 I/O forces enabled 8 I/O forces disabled 9 I/O forces removedRockwell Automation Publication 1756-PM015E-EN-P - November 2012 49Change Detection Chapter 4 10 I/O forces modified 11 Firmware update attempted12 Firmware update from removable media attempted 13 Remote mode change 14 Keyswitch mode change 15 A major fault occurred 16 All major faults cleared 17 All major faults cleared through keyswitch 18 Task properties modified 19 Program properties modified 20 Controller time slice modified 21 Removable media removed 22 Removable media inserted 23 Safety signature

the synchronization between the controller and the projec t file that was downloaded to it. Tip: Correlation Affected can include detection of a component being created, deleted, or modified, or logic was modified. Including the Correlation Affected event will update the audit value for these types of changes, even if other similar events (such as "Online edits modified controller program" or "Task properties modified") are masked. 33 Safety signature delete inhibited in Run mode 34 Safety signature delete allowed in Run modeBit number Event description50 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 4 Change Detection Change Detection in Logix Designer ApplicationVersion 20 and later of the application provides the Security tab in the Controller Properties dialog that allows users to configure Change Detection. T o edit the Changes T o Detect field you can type a new value. T o select the events to monitor for changes from a list, click the Configure button to open the Configure Changes to Detect dialog box. For additional information on how to configure the settings on the Security tab, refer to Logix5000 Security Programming Manual, publication 1756-PM016 or the the online help for the Logix Designer application. TIP To configure Change Detection programmatically use SSV, GSV or MSG instructions. See Controller Change Detection on page 46Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 51Chapter 5 Access Status Information
force value changed 7 I/O forces enabled 8 I/O forces disabled 9 I/O forces removedRockwell Automation Publication 1756-PM015E-EN-P - November 2012 49Change Detection Chapter 4 10 I/O forces modified 11 Firmware update attempted12 Firmware update from removable media attempted 13 Remote mode change 14 Keyswitch mode change 15 A major fault occurred 16 All major faults cleared 17 All major faults cleared through keyswitch 18 Task properties modified 19 Program properties modified 20 Controller time slice modified 21 Removable media removed 22 Removable media inserted 23 Safety signature created 24 Safety signature deleted 25 Safety lock 26 Safety unlock 27 Constant Tag value changed 28 Multiple constant Tag values changed 29 Constant Tag attribute cleared 30 Constant Tag attribute set 31 Custom Log Entry Added 32 Correlation affected •Indicates a change occurred in the controller that affects the synchronization between the controller and the projec t file that was downloaded to it. Tip: Correlation Affected can include detection of a component being created, deleted, or modified, or logic was modified. Including the Correlation Affected event will update the audit value for these types of changes, even if other similar events (such as "Online edits modified controller program" or "Task properties modified") are masked. 33 Safety signature delete inhibited in Run mode 34 Safety signature delete allowed in Run modeBit number Event description50 Rockwell Automation Publication
or when Changes to Detect is reconfigured. These types of events are not included in the Changes T o Detect mask. The Changes T oDetect mask can be configured programatically using SSV , GSV and MSG instructions.Attribute Name Description Access AuditValue The AuditValue is a unique value that is generated when a project is downloaded to the controller or loaded from removable storage. When a chan ge is detected this value is updated. To specify which changes are monitored, use the ChangesToDetect attribute.GSV ChangesToDetect Used to specify which changes are monitored. When a monitored change occurs, the Audit Value is updated. GSV/SSV IMPORTANT Change detection is unavailable on the RSLogix Emulate 5000 Controller and the SoftLogix5860 Controller. TIP The Audit Value updates when the controller is online. TIP You can use the Security tab in the Contro ller Properties dialog box to configure Change Detection if you are using version 20 or later of the application. See Change Detection in Logix Designer Application on page 50 .Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 47Change Detection Chapter 4 Use the Set System V alue (SSV) instruction to write to the Changes T o Detect attribute and the Get System V alue (GSV) instruction to read the Changes T o Detect attribute programmatically. The Message Configuration dialog can be used to read or write to the Changes T oDetect attribute through CIP Generic Messages. For complete information on how to access
- November 2012Chapter 4 Change Detection Controller Change Detection Two controller attributes are used to support the Change Detection feature in version 20 and later. ChangesToDetect The Changes T oDetect mask is a 64-bit value. Each bit of the Changes T oDetect mask corresponds to a particular event that could cause the Audit V alue to change. See ChangesT oDetect Format on page 48 . If a bit set to a value of 1, the corresponding event is monitored for changes and when a change for that event occurs the AuditV alue updates. If a bit is set to a value of 2, the corresponding event is not monitored and has no affect on the Audit V alue. The default Audit V alue of: 0xFFFFFFFFFFFFFFFF indicates that all events are monitored. There are some events that will always update the audit value when they occur. For example, the audit value changes when a project is downloaded to the controller, or when Changes to Detect is reconfigured. These types of events are not included in the Changes T o Detect mask. The Changes T oDetect mask can be configured programatically using SSV , GSV and MSG instructions.Attribute Name Description Access AuditValue The AuditValue is a unique value that is generated when a project is downloaded to the controller or loaded from removable storage. When a chan ge is detected this value is updated. To specify which changes are monitored, use the ChangesToDetect attribute.GSV ChangesToDetect Used to specify which changes are monitored. When a monitored

·Ta s k p r o p e r ti e s m o d i f i e d ·Controller timeslice modified This counter can be set to a known value by using an SSV instruction. This rung of ladder logic shows how to retrieve the Execution Modification Count by using a GSV instruction. Figure 6 - Retrieve the Execution Modifi cation Count by Using a GSV Instruction This rung of ladder logic shows how to set the Execution Modification Count to a known value. Figure 7 - Set the Execution Modification Count to a Known ValueRockwell Automation Publication 1756-PM015E-EN-P - November 2012 33Controller Logging Chapter 3 A message instruction of message type “CIP Generic” and a service type of “Controller Log Config Execution Set” is used to configure whether the Execution Modification Count includes forces. If it is sent a value of 1, forces will be included in the counter. If it is sent a value of 0, forces will not be included. The rung of ladder logic below shows how to send the message instruction. The configuration dialog box of the message instruction is also shown. Figure 8 - Set the Execution Count Configure Mask Instruction Figure 9 - Set the Execution Count Configure Mask Dialog Box The Source Element should be of data type DINT.34 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging A message instruction is also used to retrieve the current value of this configuration. This message uses a message type of “CIP Generic” and a service type of “Controller Log Config
to the CompactFlash card. This counter value is available via a GSV instruction, and can range from 0…100, the maximum number of entries that the controller can buffer. This rung of ladder logic shows how to retrieve the Unsaved Entry Count by using a Get System Value (GSV) instruction. Figure 5 - Retrieve the Unsaved Entry Co unt Using a Get System Value Instruction32 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging Execution Modification Count The Execution Modification Count tracks the number of changes that occur that can change the behavior of a running controller. This counter can be configured to include or exclude force changes. The events that will cause the Execution Modification Count to increment include the following: ·Online edits tested or assembled ·Forces enabled or disabled (if so configured) ·Program properties modified ·Ta s k p r o p e r ti e s m o d i f i e d ·Controller timeslice modified This counter can be set to a known value by using an SSV instruction. This rung of ladder logic shows how to retrieve the Execution Modification Count by using a GSV instruction. Figure 6 - Retrieve the Execution Modifi cation Count by Using a GSV Instruction This rung of ladder logic shows how to set the Execution Modification Count to a known value. Figure 7 - Set the Execution Modification Count to a Known ValueRockwell Automation Publication 1756-PM015E-EN-P - November 2012 33Controller Logging Chapter 3 A message
the synchronization between the controller and the projec t file that was downloaded to it. Tip: Correlation Affected can include detection of a component being created, deleted, or modified, or logic was modified. Including the Correlation Affected event will update the audit value for these types of changes, even if other similar events (such as "Online edits modified controller program" or "Task properties modified") are masked. 33 Safety signature delete inhibited in Run mode 34 Safety signature delete allowed in Run modeBit number Event description50 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 4 Change Detection Change Detection in Logix Designer ApplicationVersion 20 and later of the application provides the Security tab in the Controller Properties dialog that allows users to configure Change Detection. T o edit the Changes T o Detect field you can type a new value. T o select the events to monitor for changes from a list, click the Configure button to open the Configure Changes to Detect dialog box. For additional information on how to configure the settings on the Security tab, refer to Logix5000 Security Programming Manual, publication 1756-PM016 or the the online help for the Logix Designer application. TIP To configure Change Detection programmatically use SSV, GSV or MSG instructions. See Controller Change Detection on page 46Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 51Chapter 5 Access Status Information
(GSV) instruction. Total Entry Count by Using a Get System Value (GSV) InstructionCounter Name Desc ription Access Total Entry Count Number of entries added to the log since the last firmware update.GSV/SSV Unsaved Entry Count Number of entries in controller RAM not yet written to the CompactFlash card.GSV Modify Execution Count Count that specifically tracks modifications that can change behavior of a runnin g controller. A subset of entries increment this countGSV/SSVRockwell Automation Publication 1756-PM015E-EN-P - November 2012 31Controller Logging Chapter 3 This rung of ladder logic shows how to set the T otal Entry Count to a known value (in this example, 0) by using an SSV instruction. Figure 4 - Set the Total Entry Count to a Known Value Instruction Unsaved Entry Count The Unsaved Entry Count is the number of log entries that are in controller memory but have not yet been stored to the CompactFlash card. This counter value is available via a GSV instruction, and can range from 0…100, the maximum number of entries that the controller can buffer. This rung of ladder logic shows how to retrieve the Unsaved Entry Count by using a Get System Value (GSV) instruction. Figure 5 - Retrieve the Unsaved Entry Co unt Using a Get System Value Instruction32 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging Execution Modification Count The Execution Modification Count tracks the number of changes that occur that can change the behavior of

or when Changes to Detect is reconfigured. These types of events are not included in the Changes T o Detect mask. The Changes T oDetect mask can be configured programatically using SSV , GSV and MSG instructions.Attribute Name Description Access AuditValue The AuditValue is a unique value that is generated when a project is downloaded to the controller or loaded from removable storage. When a chan ge is detected this value is updated. To specify which changes are monitored, use the ChangesToDetect attribute.GSV ChangesToDetect Used to specify which changes are monitored. When a monitored change occurs, the Audit Value is updated. GSV/SSV IMPORTANT Change detection is unavailable on the RSLogix Emulate 5000 Controller and the SoftLogix5860 Controller. TIP The Audit Value updates when the controller is online. TIP You can use the Security tab in the Contro ller Properties dialog box to configure Change Detection if you are using version 20 or later of the application. See Change Detection in Logix Designer Application on page 50 .Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 47Change Detection Chapter 4 Use the Set System V alue (SSV) instruction to write to the Changes T o Detect attribute and the Get System V alue (GSV) instruction to read the Changes T o Detect attribute programmatically. The Message Configuration dialog can be used to read or write to the Changes T oDetect attribute through CIP Generic Messages. For complete information on how to access
Change Detection if you are using version 20 or later of the application. See Change Detection in Logix Designer Application on page 50 .Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 47Change Detection Chapter 4 Use the Set System V alue (SSV) instruction to write to the Changes T o Detect attribute and the Get System V alue (GSV) instruction to read the Changes T o Detect attribute programmatically. The Message Configuration dialog can be used to read or write to the Changes T oDetect attribute through CIP Generic Messages. For complete information on how to access data using an MSG instruction, refer to Logix5000 Controllers Messages Programming Manual, publication 1756-UM012. Use these settings to configure the Changes T oDetect attribute using the Message Configuration dialogTIP We recommend using the DINT[2] data type to avoid limitations when working with LINT data types in Rockwell Automation controllers. If you want to: In this property Type or select Set controller events monitored for changesMessage Type CIP Generic Service Type Changes to Detect Set Source tag_name of type DINT[2] or LINT 1 This tag represents a bit mask of the changes monitored for the controller. Destination leave blank Get controller events monitored for changesMessage Type CIP Generic Service Type Changes to Detect Get Source leave blank Destination tag_name of type DINT[2] or LINT 1 This tag represents a bit mask of the changes monitored for the controller.48 Rockwell
can type a new value. T o select the events to monitor for changes from a list, click the Configure button to open the Configure Changes to Detect dialog box. For additional information on how to configure the settings on the Security tab, refer to Logix5000 Security Programming Manual, publication 1756-PM016 or the the online help for the Logix Designer application. TIP To configure Change Detection programmatically use SSV, GSV or MSG instructions. See Controller Change Detection on page 46Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 51Chapter 5 Access Status Information Introduction The controller supports status keywords you can use in your logic to monitor specific events. •The status keywords are not case sensitive. •Because the status flags can change so quickly, the Logix Designer application does not display the status of the flags. For example, even when a status flag is set, an instruction that references that flag is not highlighted. •Y ou cannot define a tag alias to a keyword. Y ou can use these key words. Status of S:FS When the Project Has an SFCThe state of S:FS depends on the status of the SFC. •If you use S:FS in an action of a sequential function chart (SFC), S:FS is set (on) for one scan each time the step goes active. S:FS = step_name .FS. •If the SFC calls a routine, S:FS is set (on) for one scan each time the step that calls the routine goes active. S:FS = step_name .FS.To determine if Use The value you are storing cannot fit into
- November 2012Chapter 4 Change Detection Controller Change Detection Two controller attributes are used to support the Change Detection feature in version 20 and later. ChangesToDetect The Changes T oDetect mask is a 64-bit value. Each bit of the Changes T oDetect mask corresponds to a particular event that could cause the Audit V alue to change. See ChangesT oDetect Format on page 48 . If a bit set to a value of 1, the corresponding event is monitored for changes and when a change for that event occurs the AuditV alue updates. If a bit is set to a value of 2, the corresponding event is not monitored and has no affect on the Audit V alue. The default Audit V alue of: 0xFFFFFFFFFFFFFFFF indicates that all events are monitored. There are some events that will always update the audit value when they occur. For example, the audit value changes when a project is downloaded to the controller, or when Changes to Detect is reconfigured. These types of events are not included in the Changes T o Detect mask. The Changes T oDetect mask can be configured programatically using SSV , GSV and MSG instructions.Attribute Name Description Access AuditValue The AuditValue is a unique value that is generated when a project is downloaded to the controller or loaded from removable storage. When a chan ge is detected this value is updated. To specify which changes are monitored, use the ChangesToDetect attribute.GSV ChangesToDetect Used to specify which changes are monitored. When a monitored

entries to the removable media when its internal buffer becomes 80% full. Additionally, the controller can be commanded to write the buffered entries to the removable media with a message instruction. This procedure is detailed below. Once a log entry is written to the removable media, it is removed from the buffer. If the removable media is not present, is full, or if the controller is not configured to automatically write buffered entries to the removable media, and the internal buffer becomes full, entries will continue to be saved in the buffer in a circular fashion. As new entries are stored, the oldest entries will be discarded. Controller Log Files and the Removable Media When written to the removable media, controller logs are stored in plain text files in the T ab Separated Value (TSV) format. Each time the controller writes entries to the CompactFlash card, the entries are appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012
to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save “Set” Ladder Instruction Automatic Save “Set” Configuration Dialog BoxTIP Some Logix controllers support additional types of removable media that can be used to write the controller log entries. Refer to the Logix controller documentation for information regarding the type of removable media your Logix controller supports.28 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 3 Controller Logging The current state of the automatic write setting can be retrieved by using a message instruction with a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Get” . A rung of ladder logic that gets this value and the configuration of the message instruction are shown below. Automatic Save “Get” Ladder Instruction Automatic Save “Get” Configuration Dialog BoxRockwell Automation Publication 1756-PM015E-EN-P - November 2012 29Controller Logging Chapter
complete information on how to access data using an MSG instruction, refer to Logix5000 Controllers Messages Programming Manual, publication 1756-UM012. Use these settings to read the Audit V alue attribute using the Message Configuration. ChangesToDetect FormatIf you want to: In this property Type or select Get AuditValue Message Type CIP Generic Service Type Audit Value Get Source leave blank Destination tag_name of type DINT[2] or LINT 1 This tag contains the AuditValue for the controller. Bit number Event description 0 Project stored to removable media 1 Online edits modified controller program 2 Transaction committed •Indicates that a batch of one or more ch anges has been applied to the controller. For example, this might happen when a routine is imported online or when a module configuration is changed online. 3 SFC forces enabled 4 SFC forces disabled 5 SFC forces removed 6 SFC element force value changed 7 I/O forces enabled 8 I/O forces disabled 9 I/O forces removedRockwell Automation Publication 1756-PM015E-EN-P - November 2012 49Change Detection Chapter 4 10 I/O forces modified 11 Firmware update attempted12 Firmware update from removable media attempted 13 Remote mode change 14 Keyswitch mode change 15 A major fault occurred 16 All major faults cleared 17 All major faults cleared through keyswitch 18 Task properties modified 19 Program properties modified 20 Controller time slice modified 21 Removable media removed 22 Removable media inserted 23 Safety signature
appended to the text file until the file reaches 1 MB in size. At this point, the controller creates a new text file. The controller will not attempt to write log entries to a full removable media card. In the event that the removable media becomes full, the system will behave as if the removable media is not present. As controller log files are stored in plain text files in the TSV format, no special tools are required to read them. They can be opened in any text editor, or in a spreadsheet application, such as Microsoft Excel.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 27Controller Logging Chapter 3 Writing the Controller Log to the CompactFlash Card The controller log can be written to the CompactFlash card either automatically or on demand. Automatic Save When the controller's internal log entry buffer becomes 80% full, it can automatically write the buffered entries to the CompactFlash card. Additionally, buffered entries can be automatically written before a firmware update. This is configured by sending a message instruction to the controller, using a message type of “CIP Generic” and a service type of “Controller Log Automatic W rite Set” . Sending a value of 0 will turn off automatic writes, and sending a value of 1 will turn on automatic writes. By default, entries are not automatically written. A rung of logic that performs this configuration and the configuration dialog box of the message instruction are shown below. Figure 2 - Automatic Save

is used by the attribute. B. Create a tag for the attribute and use the data type from step A. To Enter this instruction Get the value of an attribute GSV Set the value of an attribute SSV54 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 5 Access Status Information 9.Assign the required operands to the instruction: This examples gets the current date and time. For more GSV/SSV information, see the Logix5000 Controllers General Instructions Reference Manual, publication 1756-RM003.For this operand Select Class name Name of the object. Instance name Name of the specific object (for example, name of the required I/O module, task, message). •Not all objects require this entry. •To specify the current task, program, or routine, select THIS. Attribute name Name of the attribute. Dest (GSV) Tag that will store the retrieved value. If the tag is a user-defined data type or an array, select the first member or element. Source (SSV) Tag that stores the value to be set. If the tag is a user-defined data type or an array, select the first member or element. EXAMPLE Get a System Value At the first scan, gets the DateTime attrib ute of the WALLCLOCKTIME object and stores it in the wall_clock tag, which is based on a user-defined data type. 42370Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 55Index A access status information 51 AuditValue 48 B bridge module connection 10 C Change Detection 46 ChangesToDetect 46 communicate other controllers 9
data types in Rockwell Automation controllers. If you want to: In this property Type or select Set controller events monitored for changesMessage Type CIP Generic Service Type Changes to Detect Set Source tag_name of type DINT[2] or LINT 1 This tag represents a bit mask of the changes monitored for the controller. Destination leave blank Get controller events monitored for changesMessage Type CIP Generic Service Type Changes to Detect Get Source leave blank Destination tag_name of type DINT[2] or LINT 1 This tag represents a bit mask of the changes monitored for the controller.48 Rockwell Automation Publication 1756-PM015E-EN-P - November 2012Chapter 4 Change Detection AuditValue Use the Get System V alue (GSV) instruction to read the AuditV alue attribute programmatically. The Message Configuration dialog can be used to read the AuditV alue attribute through CIP Generic Messages. For complete information on how to access data using an MSG instruction, refer to Logix5000 Controllers Messages Programming Manual, publication 1756-UM012. Use these settings to read the Audit V alue attribute using the Message Configuration. ChangesToDetect FormatIf you want to: In this property Type or select Get AuditValue Message Type CIP Generic Service Type Audit Value Get Source leave blank Destination tag_name of type DINT[2] or LINT 1 This tag contains the AuditValue for the controller. Bit number Event description 0 Project stored to removable media 1 Online edits modified controller
Change Detection if you are using version 20 or later of the application. See Change Detection in Logix Designer Application on page 50 .Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 47Change Detection Chapter 4 Use the Set System V alue (SSV) instruction to write to the Changes T o Detect attribute and the Get System V alue (GSV) instruction to read the Changes T o Detect attribute programmatically. The Message Configuration dialog can be used to read or write to the Changes T oDetect attribute through CIP Generic Messages. For complete information on how to access data using an MSG instruction, refer to Logix5000 Controllers Messages Programming Manual, publication 1756-UM012. Use these settings to configure the Changes T oDetect attribute using the Message Configuration dialogTIP We recommend using the DINT[2] data type to avoid limitations when working with LINT data types in Rockwell Automation controllers. If you want to: In this property Type or select Set controller events monitored for changesMessage Type CIP Generic Service Type Changes to Detect Set Source tag_name of type DINT[2] or LINT 1 This tag represents a bit mask of the changes monitored for the controller. Destination leave blank Get controller events monitored for changesMessage Type CIP Generic Service Type Changes to Detect Get Source leave blank Destination tag_name of type DINT[2] or LINT 1 This tag represents a bit mask of the changes monitored for the controller.48 Rockwell
Copy 1 times the number of bytes in the Dest ination data type. In this case, the instruction copies 4 bytes (32 bits), which combines the lower and upper 16 bits into one 32-bit value. EXAMPLE Convert INTs to a DINT •Elements 3 of INT_array is the lower 16 bits of the amount of free I/O memory. Element 4 is the upper 16 bits. •Memory_IO_Free is a DINT tag (32 bits) in which to store the value for the amount of free I/O memory. •To copy all 32 bits, specify a Length of 1. This tells the instruction to copy 1 times the size of the Destination (32 bits). This copies both element 3 (16 bits) and element 4 (16 bits) and places the 32-bit result in Memory_IO_Free.Rockwell Automation Publication 1756-PM015E-EN-P - November 2012 23Chapter 3 Controller Logging IntroductionThe controller logging feature provides a way to detect and log changes made to Logix Controllers without adding any auditing software. With controller logging, the controllers: ·detect changes and create logs entries containing information about the changes. ·store the log entries to removable mediafor later review. ·provide programmatic access to log entry counters to provide change detection information remotely. Note s: •The 1769-L3x and 1769-L4x CompactLogix Controllers do not support storing log entries to removable media, and the audit value is not populated. •The Audit Value is not supported in version 19 or earlier. Topic Page Controller Log 24 Controller Log Header 24 Controller Log Entry 25 Entries

